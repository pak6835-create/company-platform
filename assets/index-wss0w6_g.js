import{a as Ot,j as t}from"./index-Ggd34I_z.js";import{f as Sa,a as i}from"./vendor-react-BLQjSpGA.js";function Ia(r,c){const o=["red","orange","yellow","lime","green","teal","cyan","blue","indigo","purple","magenta","pink"],h=Math.floor((r+15)%360/30),u=c<30?"dark ":c>70?"light ":"";return c<15?"black":c>90?"white":u+o[h]}function de(r,c=70,o=50){const h=ce(r,c,o),u=Ia(r,o);return`${h} ${u}`}function $a(r,c){const o=["ë¹¨ê°•","ì£¼í™©","ë…¸ë‘","ì—°ë‘","ë…¹ìƒ‰","ì²­ë¡","í•˜ëŠ˜","íŒŒë‘","ë‚¨ìƒ‰","ë³´ë¼","ìì£¼","ë¶„í™"],h=Math.floor((r+15)%360/30),u=c<30?"ì–´ë‘ìš´ ":c>70?"ë°ì€ ":"";return c<15?"ê²€ì •":c>90?"í°ìƒ‰":u+o[h]}function ce(r,c,o){o/=100;const h=c*Math.min(o,1-o)/100,u=m=>{const f=(m+r/30)%12,p=o-h*Math.max(Math.min(f-3,9-f,1),-1);return Math.round(255*p).toString(16).padStart(2,"0")};return`#${u(0)}${u(8)}${u(4)}`}const La={basic:{name:"ê¸°ë³¸",icon:"ğŸ‘¤",items:{species:{name:"ì¢…ì¡±",icon:"ğŸ§¬",tags:[["human","ì¸ê°„"],["elf","ì—˜í”„"],["vampire","ë±€íŒŒì´ì–´"],["angel","ì²œì‚¬"],["demon","ì•…ë§ˆ"],["orc","ì˜¤í¬"],["dwarf","ë“œì›Œí”„"],["fairy","ìš”ì •"],["werewolf","ëŠ‘ëŒ€ì¸ê°„"],["cat person","ê³ ì–‘ì´ìˆ˜ì¸"],["fox person","ì—¬ìš°ìˆ˜ì¸"],["dragon humanoid","ìš©ì¸"]]},gender:{name:"ì„±ë³„",icon:"âš§",tags:[["male","ë‚¨ì„±"],["female","ì—¬ì„±"],["androgynous","ì¤‘ì„±ì "]]},age:{name:"ë‚˜ì´",icon:"ğŸ‚",type:"slider",min:5,max:80,default:25,unit:"ì„¸",prompt:r=>r<10?"child":r<18?"teenager":r<30?"young adult in 20s":r<40?"adult in 30s":r<50?"middle-aged in 40s":r<60?"mature adult in 50s":"elderly"},height:{name:"í‚¤",icon:"ğŸ“",type:"slider",min:140,max:200,default:170,unit:"cm",prompt:r=>`${r}cm tall`},headRatio:{name:"ë“±ì‹ ",icon:"ğŸ“",type:"slider",min:4,max:10,default:7,step:.5,unit:"ë“±ì‹ ",prompt:r=>`${r} head tall proportion`},bodyType:{name:"ì²´í˜•",icon:"ğŸ’ª",type:"slider",min:0,max:100,default:50,labels:["ë§ˆë¦„","ë³´í†µ","ê·¼ìœ¡"],prompt:r=>r<30?"slim skinny build":r<70?"average build":"muscular athletic build"},skinTone:{name:"í”¼ë¶€ìƒ‰",icon:"ğŸ¨",type:"skin",prompt:(r,c=40,o=50)=>{const h=ce(r,c,o);let u="";return o>80?u="very pale white":o>60?u="fair light":o>40?u="medium tan":o>20?u="brown":u="dark",`${h} ${u} skin tone`}}}},hair:{name:"ë¨¸ë¦¬",icon:"ğŸ’‡",items:{hairStyle:{name:"ìŠ¤íƒ€ì¼",icon:"ğŸ’‡",tags:[["bald","ëŒ€ë¨¸ë¦¬"],["buzz cut","ì§§ì€ì‚­ë°œ"],["short hair","ì§§ì€ë¨¸ë¦¬"],["medium hair","ì¤‘ê°„ë¨¸ë¦¬"],["long hair","ê¸´ë¨¸ë¦¬"],["very long hair","ë§¤ìš°ê¸´ë¨¸ë¦¬"],["straight hair","ìƒë¨¸ë¦¬"],["wavy hair","ì›¨ì´ë¸Œ"],["curly hair","ê³±ìŠ¬"],["ponytail","í¬ë‹ˆí…Œì¼"],["twin tails","íŠ¸ìœˆí…Œì¼"],["braid","ë•‹ì€ë¨¸ë¦¬"],["bun","ë˜¥ë¨¸ë¦¬"],["mohawk","ëª¨íˆì¹¸"],["dreadlocks","ë“œë ˆë“œë½"]]},hairBangs:{name:"ì•ë¨¸ë¦¬",icon:"âœ‚ï¸",tags:[["no bangs","ì•ë¨¸ë¦¬ì—†ìŒ"],["blunt bangs","ì¼ìì•ë¨¸ë¦¬"],["side swept bangs","ì˜†ìœ¼ë¡œë„˜ê¸´"],["parted bangs","ê°€ë¥´ë§ˆ"],["curtain bangs","ì»¤íŠ¼ë±…"],["wispy bangs","ì‹œìŠ¤ë£¨ë±…"]]},hairColor:{name:"ë¨¸ë¦¬ìƒ‰",icon:"ğŸ¨",type:"hue",prompt:(r,c=70,o=50)=>de(r,c,o)+" colored hair"}}},face:{name:"ì–¼êµ´",icon:"ğŸ‘¤",items:{faceShape:{name:"ì–¼êµ´í˜•",icon:"ğŸ—¿",tags:[["oval face","ê³„ë€í˜•"],["round face","ë‘¥ê·¼í˜•"],["square face","ê°ì§„í˜•"],["heart face","í•˜íŠ¸í˜•"],["long face","ê¸´í˜•"]]},eyeSize:{name:"ëˆˆí¬ê¸°",icon:"ğŸ‘ï¸",type:"slider",min:0,max:100,default:50,labels:["ì‘ìŒ","ë³´í†µ","í¼"],prompt:r=>r<30?"small narrow eyes":r<70?"normal eyes":"large anime eyes"},eyeShape:{name:"ëˆˆí˜•íƒœ",icon:"ğŸ‘€",tags:[["round eyes","ë™ê·¸ë€ëˆˆ"],["almond eyes","ì•„ëª¬ë“œëˆˆ"],["monolid eyes","ë¬´ìŒ"],["double eyelid","ìŒêº¼í’€"],["downturned eyes","ì²˜ì§„ëˆˆ"],["upturned eyes","ì˜¬ë¼ê°„ëˆˆ"]]},eyeColor:{name:"ëˆˆ/ë Œì¦ˆìƒ‰",icon:"ğŸ”µ",type:"hue",prompt:(r,c=70,o=50)=>de(r,c,o)+" colored eyes"},eyebrows:{name:"ëˆˆì¹",icon:"ğŸ¤¨",tags:[["thin eyebrows","ì–‡ì€ëˆˆì¹"],["thick eyebrows","ì§„í•œëˆˆì¹"],["arched eyebrows","ì•„ì¹˜í˜•"],["straight eyebrows","ì¼ìëˆˆì¹"],["bushy eyebrows","ë¥ìˆ˜ë£©í•œëˆˆì¹"]]},nose:{name:"ì½”",icon:"ğŸ‘ƒ",tags:[["small nose","ì‘ì€ì½”"],["high nose","ë†’ì€ì½”"],["flat nose","ë‚®ì€ì½”"],["pointed nose","ë¾°ì¡±í•œì½”"],["wide nose","ë„“ì€ì½”"]]},lips:{name:"ì…ìˆ ",icon:"ğŸ‘„",tags:[["thin lips","ì–‡ì€ì…ìˆ "],["full lips","ë„í†°í•œì…ìˆ "],["small lips","ì‘ì€ì…ìˆ "],["wide lips","ë„“ì€ì…ìˆ "]],hasColor:!0},expression:{name:"í‘œì •",icon:"ğŸ˜Š",tags:[["neutral","ë¬´í‘œì •"],["gentle smile","ë¯¸ì†Œ"],["big smile laughing","í™œì§ì›ƒìŒ"],["sad teary","ìŠ¬í””"],["angry frowning","í™”ë‚¨"],["surprised wide eyes","ë†€ëŒ"],["smirk confident","ëŠ¥ê¸€"],["pleading puppy eyes","ì• ì²˜ë¡œì›€"],["blushing embarrassed","ë¶€ë„ëŸ¼"],["thinking contemplating","ìƒê°"],["shy","ìˆ˜ì¤ìŒ"],["serious","ì§„ì§€í•¨"],["seductive","ë§¤í˜¹ì "],["crying tears","ëˆˆë¬¼"],["yawning sleepy","ì¡¸ë¦¼"],["disgusted","ì—­ê²¨ì›€"],["fearful scared","ë‘ë ¤ì›€"],["pouting","ì‚ì§"],["cool confident mysterious","ì‹œí¬"],["winking playful","ìœ™í¬"],["determined focused","ê²°ì—°í•¨"]]},wrinkles:{name:"ì£¼ë¦„",icon:"ã€°ï¸",type:"slider",min:0,max:100,default:0,labels:["ì—†ìŒ","ì•½ê°„","ë§ìŒ"],prompt:r=>r<20?"":r<50?"subtle wrinkles":"prominent wrinkles, aged face"},beard:{name:"ìˆ˜ì—¼",icon:"ğŸ§”",tags:[["clean shaven","ë©´ë„í•¨"],["stubble","ê±°ì¹œìˆ˜ì—¼"],["short beard","ì§§ì€ìˆ˜ì—¼"],["full beard","í’ì„±í•œìˆ˜ì—¼"],["goatee","ì—¼ì†Œìˆ˜ì—¼"],["mustache","ì½§ìˆ˜ì—¼"]],hasColor:!0}}},faceAcc:{name:"ì–¼êµ´ì•…ì„¸",icon:"ğŸ‘“",items:{glasses:{name:"ì•ˆê²½",icon:"ğŸ‘“",tags:[["no glasses","ì•ˆê²½ì—†ìŒ"],["glasses","ì•ˆê²½"],["round glasses","ë™ê·¸ë€ì•ˆê²½"],["square glasses","ì‚¬ê°ì•ˆê²½"],["sunglasses","ì„ ê¸€ë¼ìŠ¤"],["monocle","ì™¸ì•Œì•ˆê²½"]],hasColor:!0},headwear:{name:"ëª¨ì/ë¨¸ë¦¬ì¥ì‹",icon:"ğŸ©",tags:[["no hat","ì—†ìŒ"],["cap","ìº¡ëª¨ì"],["beanie","ë¹„ë‹ˆ"],["fedora","í˜ë„ë¼"],["crown","ì™•ê´€"],["tiara","í‹°ì•„ë¼"],["hairpin","í—¤ì–´í•€"],["ribbon","ë¦¬ë³¸"],["headband","ë¨¸ë¦¬ë "],["flower crown","ê½ƒì™•ê´€"]],hasColor:!0},mask:{name:"ë§ˆìŠ¤í¬",icon:"ğŸ­",tags:[["no mask","ì—†ìŒ"],["half mask","ë°˜ê°€ë©´"],["full mask","ì „ì²´ê°€ë©´"],["surgical mask","ë§ˆìŠ¤í¬"],["gas mask","ë°©ë…ë©´"]]}}},upperBody:{name:"ìƒì²´",icon:"ğŸ‘•",items:{outfitSet:{name:"ì˜ìƒì„¸íŠ¸",icon:"ğŸ‘”",tags:[["formal black suit white shirt tie","ğŸ¤µ ì •ì¥"],["casual hoodie jeans","ğŸ‘• ìºì£¼ì–¼"],["Korean hanbok traditional","ğŸ‘˜ í•œë³µ"],["school uniform blazer","ğŸ“ êµë³µ"],["medieval knight armor","âš”ï¸ ê°‘ì˜·"],["elegant ball gown dress","ğŸ‘— ë“œë ˆìŠ¤"],["sports jersey shorts","ğŸƒ ìš´ë™ë³µ"],["chef uniform apron","ğŸ‘¨â€ğŸ³ ì…°í”„"],["doctor white coat stethoscope","ğŸ‘¨â€âš•ï¸ ì˜ì‚¬"],["military combat uniform","ğŸ–ï¸ êµ°ë³µ"],["swimsuit beach","ğŸ‘™ ìˆ˜ì˜ë³µ"],["pajamas sleepwear","ğŸ˜´ ì ì˜·"],["maid outfit frilly","ğŸ€ ë©”ì´ë“œ"],["nurse uniform","ğŸ‘©â€âš•ï¸ ê°„í˜¸ì‚¬"],["police uniform","ğŸ‘® ê²½ì°°"],["kimono japanese","ğŸ ê¸°ëª¨ë…¸"]]},topLayer1:{name:"ìƒì˜1(ì•ˆìª½)",icon:"ğŸ‘•",tags:[["t-shirt","í‹°ì…”ì¸ "],["tank top","ë¯¼ì†Œë§¤"],["shirt","ì…”ì¸ "],["blouse","ë¸”ë¼ìš°ìŠ¤"],["crop top","í¬ë¡­íƒ‘"],["turtleneck","í„°í‹€ë„¥"],["vest","ì¡°ë¼"]],hasColor:!0},topLayer2:{name:"ìƒì˜2(ì¤‘ê°„)",icon:"ğŸ§¥",tags:[["none","ì—†ìŒ"],["hoodie","í›„ë“œí‹°"],["sweater","ìŠ¤ì›¨í„°"],["cardigan","ê°€ë””ê±´"],["jacket","ìì¼“"],["blazer","ë¸”ë ˆì´ì €"]],hasColor:!0},topLayer3:{name:"ìƒì˜3(ë°”ê¹¥)",icon:"ğŸ§¥",tags:[["none","ì—†ìŒ"],["coat","ì½”íŠ¸"],["trench coat","íŠ¸ë Œì¹˜ì½”íŠ¸"],["leather jacket","ê°€ì£½ìì¼“"],["parka","íŒŒì¹´"],["cape","ë§í† "],["cloak","í´ë¡œí¬"]],hasColor:!0},neckwear:{name:"ë„¥ì›¨ì–´",icon:"ğŸ‘”",tags:[["none","ì—†ìŒ"],["tie","ë„¥íƒ€ì´"],["bow tie","ë‚˜ë¹„ë„¥íƒ€ì´"],["scarf","ìŠ¤ì¹´í”„"],["choker","ì´ˆì»¤"],["necklace","ëª©ê±¸ì´"],["pendant","íœë˜íŠ¸"]],hasColor:!0},gloves:{name:"ì¥ê°‘",icon:"ğŸ§¤",tags:[["none","ì—†ìŒ"],["fingerless gloves","í•‘ê±°ë¦¬ìŠ¤"],["leather gloves","ê°€ì£½ì¥ê°‘"],["long gloves","ë¡±ì¥ê°‘"],["mittens","ë²™ì–´ë¦¬ì¥ê°‘"]],hasColor:!0}}},lowerBody:{name:"í•˜ì²´",icon:"ğŸ‘–",items:{bottom:{name:"í•˜ì˜",icon:"ğŸ‘–",tags:[["jeans","ì²­ë°”ì§€"],["slacks","ìŠ¬ë™ìŠ¤"],["shorts","ë°˜ë°”ì§€"],["skirt","ìŠ¤ì»¤íŠ¸"],["mini skirt","ë¯¸ë‹ˆìŠ¤ì»¤íŠ¸"],["long skirt","ë¡±ìŠ¤ì»¤íŠ¸"],["pleated skirt","í”Œë¦¬ì¸ "],["leggings","ë ˆê¹…ìŠ¤"],["sweatpants","ì¸„ë¦¬ë‹"]],hasColor:!0},socks:{name:"ì–‘ë§/ìŠ¤íƒ€í‚¹",icon:"ğŸ§¦",tags:[["none","ì—†ìŒ"],["ankle socks","ë°œëª©ì–‘ë§"],["crew socks","ì¤‘ê°„ì–‘ë§"],["knee socks","ë¬´ë¦ì–‘ë§"],["thigh highs","í—ˆë²…ì§€ì–‘ë§"],["stockings","ìŠ¤íƒ€í‚¹"],["fishnet","ë§ì‚¬"]],hasColor:!0},shoes:{name:"ì‹ ë°œ",icon:"ğŸ‘Ÿ",tags:[["sneakers","ìš´ë™í™”"],["boots","ë¶€ì¸ "],["high heels","í•˜ì´í"],["loafers","ë¡œí¼"],["sandals","ìƒŒë“¤"],["barefoot","ë§¨ë°œ"]],hasColor:!0}}},hands:{name:"ì†/ë¬´ê¸°",icon:"âœ‹",items:{leftHand:{name:"ì™¼ì†",icon:"ğŸ¤š",tags:[["empty hand","ë¹ˆì†"],["open palm","í¸ì†"],["fist","ì£¼ë¨¹"],["pointing","ê°€ë¦¬í‚¤ê¸°"],["peace sign","ë¸Œì´"],["thumbs up","ì—„ì§€ì²™"]]},rightHand:{name:"ì˜¤ë¥¸ì†",icon:"ğŸ¤š",tags:[["empty hand","ë¹ˆì†"],["open palm","í¸ì†"],["fist","ì£¼ë¨¹"],["pointing","ê°€ë¦¬í‚¤ê¸°"],["peace sign","ë¸Œì´"],["thumbs up","ì—„ì§€ì²™"]]},weapon:{name:"ë¬´ê¸°",icon:"âš”ï¸",tags:[["none","ì—†ìŒ"],["sword","ê²€"],["katana","ì¹´íƒ€ë‚˜"],["dagger","ë‹¨ê²€"],["bow","í™œ"],["staff","ì§€íŒ¡ì´"],["wand","ë§ˆë²•ë´‰"],["gun","ì´"],["shield","ë°©íŒ¨"],["spear","ì°½"],["axe","ë„ë¼"]]},bracelet:{name:"íŒ”ì°Œ",icon:"ğŸ“¿",tags:[["none","ì—†ìŒ"],["bracelet","íŒ”ì°Œ"],["bangle","ë±…ê¸€"],["watch","ì‹œê³„"],["wristband","ì†ëª©ë°´ë“œ"]],hasColor:!0},ring:{name:"ë°˜ì§€",icon:"ğŸ’",tags:[["none","ì—†ìŒ"],["simple ring","ì‹¬í”Œë°˜ì§€"],["gem ring","ë³´ì„ë°˜ì§€"],["multiple rings","ì—¬ëŸ¬ë°˜ì§€"]],hasColor:!0}}},fantasy:{name:"íŒíƒ€ì§€",icon:"ğŸ§š",items:{wings:{name:"ë‚ ê°œ",icon:"ğŸª½",tags:[["no wings","ì—†ìŒ"],["angel wings","ì²œì‚¬ë‚ ê°œ"],["demon wings","ì•…ë§ˆë‚ ê°œ"],["dragon wings","ë“œë˜ê³¤ë‚ ê°œ"],["fairy wings","ìš”ì •ë‚ ê°œ"],["butterfly wings","ë‚˜ë¹„ë‚ ê°œ"],["bat wings","ë°•ì¥ë‚ ê°œ"],["feathered wings","ê¹ƒí„¸ë‚ ê°œ"],["mechanical wings","ê¸°ê³„ë‚ ê°œ"]],hasColor:!0},wingSize:{name:"ë‚ ê°œí¬ê¸°",icon:"ğŸ“",type:"slider",min:0,max:100,default:50,labels:["ì‘ìŒ","ë³´í†µ","í¼"],prompt:r=>r<30?"small wings":r>70?"large magnificent wings":"medium wings"},wingState:{name:"ë‚ ê°œìƒíƒœ",icon:"ğŸ¦‹",tags:[["folded wings","ì ‘ì€ë‚ ê°œ"],["spread wings","í¼ì¹œë‚ ê°œ"],["half spread","ë°˜ì¯¤í¼ì¹œ"],["flapping wings","í¼ë•ì´ëŠ”"]]},ears:{name:"ê·€",icon:"ğŸ‘‚",tags:[["human ears","ì¸ê°„ê·€"],["elf ears","ì—˜í”„ê·€"],["cat ears","ê³ ì–‘ì´ê·€"],["fox ears","ì—¬ìš°ê·€"],["wolf ears","ëŠ‘ëŒ€ê·€"],["rabbit ears","í† ë¼ê·€"],["dog ears","ê°•ì•„ì§€ê·€"],["pointed ears","ë¾°ì¡±ê·€"],["droopy ears","ì²˜ì§„ê·€"]],hasColor:!0},tail:{name:"ê¼¬ë¦¬",icon:"ğŸ¦Š",tags:[["no tail","ì—†ìŒ"],["cat tail","ê³ ì–‘ì´ê¼¬ë¦¬"],["fox tail","ì—¬ìš°ê¼¬ë¦¬"],["wolf tail","ëŠ‘ëŒ€ê¼¬ë¦¬"],["dragon tail","ë“œë˜ê³¤ê¼¬ë¦¬"],["demon tail","ì•…ë§ˆê¼¬ë¦¬"],["fluffy tail","ë½€ì†¡ê¼¬ë¦¬"],["long tail","ê¸´ê¼¬ë¦¬"],["multiple tails","ì—¬ëŸ¬ê¼¬ë¦¬"]],hasColor:!0},tailCount:{name:"ê¼¬ë¦¬ê°œìˆ˜",icon:"ğŸ”¢",type:"slider",min:1,max:9,default:1,unit:"ê°œ",prompt:r=>r===1?"single tail":`${r} tails`},horns:{name:"ë¿”",icon:"ğŸ¦Œ",tags:[["no horns","ì—†ìŒ"],["small horns","ì‘ì€ë¿”"],["large horns","í°ë¿”"],["curved horns","êµ½ì€ë¿”"],["straight horns","ì§ì„ ë¿”"],["antlers","ì‚¬ìŠ´ë¿”"],["ram horns","ì–‘ë¿”"],["demon horns","ì•…ë§ˆë¿”"]],hasColor:!0},halo:{name:"í›„ê´‘",icon:"ğŸ˜‡",tags:[["no halo","ì—†ìŒ"],["golden halo","ê¸ˆìƒ‰í›„ê´‘"],["white halo","í°ìƒ‰í›„ê´‘"],["broken halo","ê¹¨ì§„í›„ê´‘"],["dark halo","ì–´ë‘ìš´í›„ê´‘"],["glowing halo","ë¹›ë‚˜ëŠ”í›„ê´‘"]]},extraFeatures:{name:"ì¶”ê°€íŠ¹ì§•",icon:"âœ¨",tags:[["none","ì—†ìŒ"],["scales on skin","í”¼ë¶€ë¹„ëŠ˜"],["glowing marks","ë¹›ë‚˜ëŠ”ë¬¸ì–‘"],["tattoo marks","ë¬¸ì‹ "],["freckles","ì£¼ê·¼ê¹¨"],["birthmark","ì "],["scars","í‰í„°"],["stitches","ë°”ëŠì§ˆìêµ­"]]}}},pose:{name:"í¬ì¦ˆ",icon:"ğŸƒ",items:{bodyPose:{name:"ì „ì‹ í¬ì¦ˆ",icon:"ğŸ§",tags:[["standing","ì„œìˆëŠ”"],["sitting","ì•‰ì€"],["kneeling","ë¬´ë¦ê¿‡ì€"],["lying down","ëˆ„ìš´"],["walking","ê±·ëŠ”"],["running","ë›°ëŠ”"],["jumping","ì í”„"],["fighting pose","ì „íˆ¬ìì„¸"],["dancing","ì¶¤ì¶”ëŠ”"],["floating","ë– ìˆëŠ”"]]},armPose:{name:"íŒ”í¬ì¦ˆ",icon:"ğŸ’ª",tags:[["arms at sides","íŒ”ë‚´ë¦¼"],["crossed arms","íŒ”ì§±"],["hands behind","ë’·ì§"],["hands on hips","í—ˆë¦¬ì†"],["raised arm","íŒ”ë“¤ê¸°"],["waving","ì†í”ë“¤ê¸°"]]},viewAngle:{name:"ì‹œì ",icon:"ğŸ“·",tags:[["front view","ì •ë©´"],["side view","ì¸¡ë©´"],["back view","ë’·ëª¨ìŠµ"],["three quarter view","3/4ì•µê¸€"],["from above","ìœ„ì—ì„œ"],["from below","ì•„ë˜ì—ì„œ"],["close up","í´ë¡œì¦ˆì—…"],["full body","ì „ì‹ "]]}}},style:{name:"ìŠ¤íƒ€ì¼",icon:"ğŸ¨",items:{artStyle:{name:"ê·¸ë¦¼ì²´",icon:"ğŸ¨",tags:[["korean webtoon","í•œêµ­ì›¹íˆ°"],["japanese anime","ì¼ë³¸ì• ë‹ˆ"],["ghibli style","ì§€ë¸Œë¦¬"],["disney pixar","ë””ì¦ˆë‹ˆí”½ì‚¬"],["semi realistic","ì„¸ë¯¸ë¦¬ì–¼"],["realistic","ì‹¤ì‚¬"],["chibi","ì¹˜ë¹„"],["manhwa","ë§Œí™”"],["watercolor","ìˆ˜ì±„í™”"],["oil painting","ìœ í™”"]]},quality:{name:"í’ˆì§ˆ",icon:"âœ¨",tags:[["masterpiece","ê±¸ì‘"],["best quality","ìµœê³ í’ˆì§ˆ"],["highly detailed","ìƒì„¸í•œ"],["sharp focus","ì„ ëª…í•œ"]]},mood:{name:"ë¶„ìœ„ê¸°",icon:"ğŸŒŸ",tags:[["bright","ë°ì€"],["dark","ì–´ë‘ìš´"],["warm","ë”°ëœ»í•œ"],["cold","ì°¨ê°€ìš´"],["dramatic","ê·¹ì ì¸"],["soft","ë¶€ë“œëŸ¬ìš´"],["vibrant","ìƒë™ê°ìˆëŠ”"]]}}},negative:{name:"ë„¤ê±°í‹°ë¸Œ",icon:"â›”",items:{negative:{name:"ì œì™¸í• ê²ƒ",icon:"â›”",tags:[["low quality","ì €í’ˆì§ˆ"],["blurry","íë¦°"],["ugly","ëª»ìƒê¸´"],["deformed","ë³€í˜•"],["bad anatomy","í•´ë¶€í•™ì˜¤ë¥˜"],["extra limbs","íŒ”ë‹¤ë¦¬ì¶”ê°€"],["missing limbs","íŒ”ë‹¤ë¦¬ì—†ìŒ"],["extra fingers","ì†ê°€ë½ì¶”ê°€"],["bad hands","ì´ìƒí•œì†"],["multiple characters","ì—¬ëŸ¬ìºë¦­í„°"],["watermark","ì›Œí„°ë§ˆí¬"],["text","í…ìŠ¤íŠ¸"]],isNeg:!0}}}},Ta={style:{name:"ìŠ¤íƒ€ì¼",icon:"ğŸ¨",items:{artStyle:{name:"ê·¸ë¦¼ì²´",icon:"ğŸ¨",tags:[["webtoon style","ì›¹íˆ°"],["anime style","ì• ë‹ˆë©”"],["ghibli style","ì§€ë¸Œë¦¬"],["photorealistic","ì‹¤ì‚¬"],["concept art","ì»¨ì…‰ì•„íŠ¸"],["watercolor","ìˆ˜ì±„í™”"],["oil painting","ìœ í™”"],["pixel art","í”½ì…€"]]},quality:{name:"í’ˆì§ˆ",icon:"âœ¨",tags:[["masterpiece","ê±¸ì‘"],["best quality","ìµœê³ í’ˆì§ˆ"],["highly detailed","ìƒì„¸í•œ"],["8k","8K"],["sharp focus","ì„ ëª…"]]}}},sky:{name:"í•˜ëŠ˜",icon:"ğŸŒ…",items:{timeOfDay:{name:"ì‹œê°„ëŒ€",icon:"ğŸ•",type:"slider",min:0,max:100,default:50,labels:["ìƒˆë²½","ì•„ì¹¨","ë‚®","ì„ì–‘","ë°¤"],prompt:r=>r<15?"dawn, early morning":r<35?"morning, sunrise":r<65?"daytime, bright sky":r<85?"sunset, golden hour":"night, dark sky, stars"},skyColor:{name:"í•˜ëŠ˜ìƒ‰",icon:"ğŸ¨",type:"hue",prompt:(r,c=70,o=50)=>de(r,c,o)+" colored sky"},weather:{name:"ë‚ ì”¨",icon:"ğŸŒ¤ï¸",tags:[["clear sky","ë§‘ìŒ"],["cloudy","íë¦¼"],["overcast","ì”ëœ©íë¦¼"],["rainy","ë¹„"],["snowy","ëˆˆ"],["foggy","ì•ˆê°œ"],["stormy","í­í’"]]},clouds:{name:"êµ¬ë¦„",icon:"â˜ï¸",type:"slider",min:0,max:100,default:30,labels:["ì—†ìŒ","ì•½ê°„","ë§ìŒ"],prompt:r=>r<20?"clear sky":"cloudy sky"},cloudColor:{name:"êµ¬ë¦„ìƒ‰",icon:"ğŸ¨",type:"hue",prompt:(r,c=30,o=80)=>de(r,c,o)+" tinted clouds"}}},far:{name:"ì›ê²½",icon:"ğŸ”ï¸",items:{farBg:{name:"ë¨¼ë°°ê²½",icon:"ğŸ”ï¸",tags:[["none","ì—†ìŒ"],["mountains","ì‚°"],["city skyline","ë„ì‹œìŠ¤ì¹´ì´ë¼ì¸"],["forest horizon","ìˆ²ì§€í‰ì„ "],["ocean horizon","ë°”ë‹¤ìˆ˜í‰ì„ "],["desert dunes","ì‚¬ë§‰ì–¸ë•"]]},farDetail:{name:"ì›ê²½ë””í…Œì¼",icon:"ğŸ”­",type:"slider",min:0,max:100,default:30,labels:["íë¦¿","ë³´í†µ","ì„ ëª…"],prompt:r=>r<30?"blurry distant background":"sharp detailed background"}}},mid:{name:"ì¤‘ê²½",icon:"ğŸ ",items:{location:{name:"ì¥ì†Œ",icon:"ğŸ“",tags:[["city street","ë„ì‹œê±°ë¦¬"],["alley","ê³¨ëª©"],["park","ê³µì›"],["forest","ìˆ²ì†"],["beach","í•´ë³€"],["mountain path","ì‚°ê¸¸"],["river","ê°•ê°€"],["bridge","ë‹¤ë¦¬"]]},building:{name:"ê±´ë¬¼",icon:"ğŸ¢",tags:[["none","ì—†ìŒ"],["houses","ì£¼íƒ"],["apartments","ì•„íŒŒíŠ¸"],["skyscrapers","ë§ˆì²œë£¨"],["traditional houses","ì „í†µê°€ì˜¥"],["shops","ìƒì ê°€"],["school","í•™êµ"],["castle","ì„±"]]},interior:{name:"ì‹¤ë‚´",icon:"ğŸ ",tags:[["none","ì—†ìŒ"],["living room","ê±°ì‹¤"],["bedroom","ì¹¨ì‹¤"],["kitchen","ì£¼ë°©"],["cafe","ì¹´í˜"],["restaurant","ë ˆìŠ¤í† ë‘"],["classroom","êµì‹¤"],["library","ë„ì„œê´€"],["office","ì‚¬ë¬´ì‹¤"]]}}},near:{name:"ê·¼ê²½",icon:"ğŸ›¤ï¸",items:{ground:{name:"ë°”ë‹¥",icon:"ğŸ›¤ï¸",tags:[["asphalt","ì•„ìŠ¤íŒ”íŠ¸"],["concrete","ì½˜í¬ë¦¬íŠ¸"],["grass","ì”ë””"],["dirt","í™"],["sand","ëª¨ë˜"],["wood floor","ë‚˜ë¬´ë°”ë‹¥"],["tile","íƒ€ì¼"],["carpet","ì¹´í«"]]},foreground:{name:"ì „ê²½ë¬¼ì²´",icon:"ğŸŒ³",tags:[["none","ì—†ìŒ"],["trees","ë‚˜ë¬´"],["flowers","ê½ƒ"],["rocks","ë°”ìœ„"],["fence","ìš¸íƒ€ë¦¬"],["bench","ë²¤ì¹˜"],["street lamp","ê°€ë¡œë“±"],["car","ìë™ì°¨"]]},depthBlur:{name:"ì‹¬ë„(ë¸”ëŸ¬)",icon:"ğŸ“¸",type:"slider",min:0,max:100,default:0,labels:["ì—†ìŒ","ì•½ê°„","ê°•í•¨"],prompt:r=>r<20?"":"depth of field, bokeh"}}},light:{name:"ì¡°ëª…",icon:"ğŸ’¡",items:{lightType:{name:"ì¡°ëª…ì¢…ë¥˜",icon:"ğŸ’¡",tags:[["natural light","ìì—°ê´‘"],["cinematic lighting","ì‹œë„¤ë§ˆí‹±"],["soft lighting","ë¶€ë“œëŸ¬ìš´"],["dramatic lighting","ê·¹ì ì¸"],["backlight","ì—­ê´‘"],["rim light","ë¦¼ë¼ì´íŠ¸"],["neon lights","ë„¤ì˜¨"],["candlelight","ì´›ë¶ˆ"],["moonlight","ë‹¬ë¹›"],["spotlight","ìŠ¤í¬íŠ¸ë¼ì´íŠ¸"]]},lightColor:{name:"ì¡°ëª…ìƒ‰",icon:"ğŸ¨",type:"hue",prompt:(r,c=60,o=60)=>de(r,c,o)+" colored lighting"},brightness:{name:"ë°ê¸°",icon:"â˜€ï¸",type:"slider",min:0,max:100,default:50,labels:["ì–´ë‘ì›€","ë³´í†µ","ë°ìŒ"],prompt:r=>r<30?"dark, low key":r>70?"bright, high key":""},contrast:{name:"ëŒ€ë¹„",icon:"â—",type:"slider",min:0,max:100,default:50,labels:["ë‚®ìŒ","ë³´í†µ","ë†’ìŒ"],prompt:r=>r<30?"low contrast, flat lighting":r>70?"high contrast, dramatic shadows":""},saturation:{name:"ì±„ë„",icon:"ğŸŒˆ",type:"slider",min:0,max:100,default:50,labels:["íƒí•¨","ë³´í†µ","ì„ ëª…"],prompt:r=>r<30?"desaturated, muted colors":r>70?"vibrant, saturated colors":""},ambientColor:{name:"í™˜ê²½ê´‘ìƒ‰",icon:"ğŸ¨",type:"hue",prompt:(r,c=40,o=50)=>de(r,c,o)+" ambient light"}}},negative:{name:"ë„¤ê±°í‹°ë¸Œ",icon:"â›”",items:{negative:{name:"ì œì™¸í• ê²ƒ",icon:"â›”",tags:[["low quality","ì €í’ˆì§ˆ"],["blurry","íë¦°"],["ugly","ëª»ìƒê¸´"],["watermark","ì›Œí„°ë§ˆí¬"],["text","í…ìŠ¤íŠ¸"],["cropped","ì˜ë¦°"]],isNeg:!0}}}},Pa=[{name:"âœ¨ ì¬ë²Œë‚¨ì£¼",icon:"âœ¨",data:{artStyle:["korean webtoon"],quality:["masterpiece","best quality","8k","ultra detailed"],gender:["male"],age:28,height:188,headRatio:8.5,bodyType:65,hairStyle:["short hair","undercut"],hairColor:{h:30,s:20,l:10},eyeShape:["sharp eyes"],eyeColor:{h:30,s:40,l:35},expression:["cold","serious"],faceShape:["sharp jawline"],topLayer1:["shirt"],topLayer1Color:{h:0,s:0,l:98},topLayer2:["vest"],topLayer2Color:{h:0,s:0,l:15},topLayer3:["coat"],topLayer3Color:{h:0,s:0,l:10},bottom:["slacks"],bottomColor:{h:0,s:0,l:12},bodyPose:["standing"],viewAngle:["three quarter view"],mood:["dramatic","cinematic"]}},{name:"ğŸ’– ë¡œíŒì—¬ì£¼",icon:"ğŸ’–",data:{artStyle:["korean webtoon"],quality:["masterpiece","best quality","8k","ultra detailed"],gender:["female"],age:20,height:165,headRatio:7,hairStyle:["very long hair","wavy hair"],hairBangs:["curtain bangs"],hairColor:{h:45,s:30,l:75},eyeSize:70,eyeShape:["big eyes"],eyeColor:{h:280,s:60,l:65},expression:["innocent","sparkling eyes"],faceShape:["oval face"],skinTone:{h:25,s:30,l:92},topLayer1:["dress"],topLayer1Color:{h:340,s:50,l:85},accessory:["ribbon","necklace"],bodyPose:["elegant pose"],viewAngle:["three quarter view"],mood:["soft","dreamy"]}},{name:"ğŸ–¤ ë¹ŒëŸ°ë‚¨ì£¼",icon:"ğŸ–¤",data:{artStyle:["korean webtoon"],quality:["masterpiece","best quality","cinematic lighting"],gender:["male"],age:30,height:190,headRatio:8.5,bodyType:70,hairStyle:["medium hair","slicked back"],hairColor:{h:0,s:0,l:5},eyeShape:["sharp eyes","narrow eyes"],eyeColor:{h:0,s:80,l:45},expression:["smirk","menacing"],faceShape:["sharp jawline"],topLayer1:["turtleneck"],topLayer1Color:{h:0,s:0,l:8},topLayer3:["coat"],topLayer3Color:{h:0,s:100,l:25},bottom:["slacks"],bottomColor:{h:0,s:0,l:10},bodyPose:["arms crossed"],viewAngle:["low angle"],mood:["dark","dramatic"]}},{name:"ğŸŒ¸ í•˜ì´í‹´ì—¬ì£¼",icon:"ğŸŒ¸",data:{artStyle:["korean webtoon"],quality:["masterpiece","best quality","vivid colors"],gender:["female"],age:17,height:163,headRatio:7,hairStyle:["long hair","straight hair"],hairBangs:["see-through bangs"],hairColor:{h:25,s:60,l:15},eyeSize:65,eyeShape:["round eyes"],expression:["blushing","shy"],topLayer1:["blouse"],topLayer1Color:{h:0,s:0,l:98},topLayer2:["cardigan"],topLayer2Color:{h:350,s:45,l:75},bottom:["pleated skirt"],bottomColor:{h:220,s:50,l:25},socks:["knee socks"],shoes:["loafers"],bodyPose:["standing"],viewAngle:["front view"],mood:["soft","cute"]}},{name:"âš”ï¸ ë¬´í˜‘ê²€ê°",icon:"âš”ï¸",data:{artStyle:["semi realistic","chinese painting style"],quality:["masterpiece","highly detailed","cinematic"],gender:["male"],age:25,height:182,bodyType:70,hairStyle:["long hair","ponytail"],hairColor:{h:0,s:0,l:8},eyeShape:["sharp eyes"],eyeColor:{h:30,s:50,l:30},expression:["cold","serious"],topLayer1:["hanfu"],topLayer1Color:{h:0,s:0,l:95},topLayer3:["robe"],topLayer3Color:{h:220,s:60,l:25},weapon:["sword"],bodyPose:["fighting pose"],viewAngle:["dynamic angle"],mood:["dramatic","epic"]}},{name:"ğŸ‘‘ í™©ë…€",icon:"ğŸ‘‘",data:{artStyle:["korean webtoon"],quality:["masterpiece","best quality","ornate details"],gender:["female"],age:22,height:168,headRatio:7.5,hairStyle:["very long hair","elegant updo"],hairColor:{h:45,s:25,l:85},eyeSize:60,eyeColor:{h:200,s:70,l:60},expression:["elegant","noble"],skinTone:{h:25,s:25,l:95},topLayer1:["royal dress"],topLayer1Color:{h:50,s:80,l:55},accessory:["crown","jewelry"],bodyPose:["elegant pose"],viewAngle:["three quarter view"],mood:["luxurious","majestic"]}},{name:"ğŸ—¡ï¸ ì–´ìŒ”ì‹ ",icon:"ğŸ—¡ï¸",data:{artStyle:["concept art","semi realistic"],quality:["masterpiece","highly detailed","dynamic lighting"],gender:["female"],age:24,height:170,bodyType:55,hairStyle:["short hair","asymmetrical"],hairColor:{h:270,s:30,l:20},eyeShape:["sharp eyes"],eyeColor:{h:180,s:80,l:50},expression:["cold","focused"],topLayer1:["bodysuit"],topLayer1Color:{h:0,s:0,l:12},topLayer3:["hooded cape"],topLayer3Color:{h:270,s:40,l:15},weapon:["dual daggers"],bodyPose:["action pose"],viewAngle:["dynamic angle"],mood:["dark","mysterious"]}},{name:"ğŸ”® ëŒ€ë§ˆë²•ì‚¬",icon:"ğŸ”®",data:{artStyle:["fantasy art","semi realistic"],quality:["masterpiece","highly detailed","magical effects"],gender:["male"],age:35,height:185,hairStyle:["long hair"],hairColor:{h:220,s:20,l:70},eyeColor:{h:200,s:100,l:60},expression:["wise","mysterious"],topLayer1:["robe"],topLayer1Color:{h:220,s:60,l:20},topLayer3:["cloak"],topLayer3Color:{h:270,s:50,l:25},weapon:["staff"],accessory:["magical orb"],bodyPose:["casting spell"],mood:["mystical","powerful"]}},{name:"ğŸ‰ ìš©ì¡±",icon:"ğŸ‰",data:{species:["dragon humanoid"],artStyle:["fantasy art","semi realistic"],quality:["masterpiece","highly detailed","intricate scales"],gender:["male"],age:500,height:195,bodyType:80,hairStyle:["long hair"],hairColor:{h:0,s:0,l:95},eyeColor:{h:50,s:100,l:50},expression:["fierce","proud"],skinTone:{h:220,s:30,l:40},topLayer1:["armor"],topLayer1Color:{h:220,s:50,l:30},accessory:["horns","scales"],bodyPose:["powerful stance"],mood:["epic","majestic"]}},{name:"ğŸ¤ K-POPë‚¨ëŒ",icon:"ğŸ¤",data:{artStyle:["semi realistic"],quality:["masterpiece","best quality","studio lighting"],gender:["male"],age:22,height:180,headRatio:8,bodyType:55,hairStyle:["two-block cut"],hairColor:{h:30,s:60,l:65},eyeShape:["sharp eyes"],eyeColor:{h:30,s:40,l:30},expression:["charismatic","smirk"],skinTone:{h:25,s:30,l:88},topLayer1:["crop top"],topLayer1Color:{h:0,s:0,l:10},topLayer2:["jacket"],topLayer2Color:{h:0,s:0,l:5},bottom:["leather pants"],bottomColor:{h:0,s:0,l:8},accessory:["earrings","chain necklace"],bodyPose:["cool pose"],mood:["stylish","edgy"]}},{name:"ğŸ’œ K-POPì—¬ëŒ",icon:"ğŸ’œ",data:{artStyle:["semi realistic"],quality:["masterpiece","best quality","soft lighting"],gender:["female"],age:20,height:167,headRatio:7.5,hairStyle:["long hair","wavy hair"],hairBangs:["curtain bangs"],hairColor:{h:330,s:40,l:45},eyeSize:60,eyeColor:{h:30,s:50,l:35},expression:["cute","wink"],skinTone:{h:25,s:25,l:92},topLayer1:["crop top"],topLayer1Color:{h:280,s:60,l:70},bottom:["mini skirt"],bottomColor:{h:0,s:0,l:15},socks:["thigh high"],shoes:["platform boots"],accessory:["choker","earrings"],bodyPose:["cute pose"],mood:["vibrant","energetic"]}},{name:"ğŸ–¼ï¸ ë¯¸ìˆ ì‘í’ˆí’",icon:"ğŸ–¼ï¸",data:{artStyle:["oil painting","classical art"],quality:["masterpiece","museum quality","fine art"],gender:["female"],age:25,hairStyle:["very long hair","flowing"],hairColor:{h:30,s:40,l:25},eyeColor:{h:30,s:50,l:40},expression:["serene","thoughtful"],topLayer1:["elegant dress"],topLayer1Color:{h:220,s:50,l:40},accessory:["pearl earrings"],bodyPose:["elegant pose"],viewAngle:["portrait"],mood:["classical","timeless"]}}],Ra=[{name:"ğŸŒƒ ì‹œí‹°ë·°ì•¼ê²½",icon:"ğŸŒƒ",data:{artStyle:["webtoon style"],quality:["masterpiece","best quality","8k","cinematic"],location:["penthouse balcony"],building:["skyscrapers","city lights"],timeOfDay:90,lightType:["neon lights","ambient glow"],saturation:65,mood:["romantic","luxurious"]}},{name:"ğŸ›ï¸ ìœ ëŸ½ê¶ì „",icon:"ğŸ›ï¸",data:{artStyle:["webtoon style"],quality:["masterpiece","ornate details","grand scale"],interior:["palace hall"],lightType:["chandelier","golden light"],lightColor:{h:45,s:70,l:65},mood:["luxurious","elegant"]}},{name:"ğŸŒ¹ ì¥ë¯¸ì •ì›",icon:"ğŸŒ¹",data:{artStyle:["webtoon style"],quality:["masterpiece","best quality","detailed flowers"],location:["garden"],foreground:["rose bushes","flowers"],lightType:["soft sunlight"],timeOfDay:45,lightColor:{h:35,s:60,l:70},mood:["romantic","dreamy"]}},{name:"â˜• ê³ ê¸‰ì¹´í˜",icon:"â˜•",data:{artStyle:["webtoon style"],quality:["masterpiece","cozy atmosphere"],interior:["luxury cafe"],lightType:["warm ambient"],lightColor:{h:30,s:55,l:60},saturation:50,mood:["cozy","intimate"]}},{name:"ğŸ“š ë°©ê³¼í›„êµì‹¤",icon:"ğŸ“š",data:{artStyle:["webtoon style"],quality:["masterpiece","golden hour lighting"],interior:["empty classroom"],lightType:["sunset through window"],timeOfDay:70,lightColor:{h:25,s:80,l:55},mood:["nostalgic","warm"]}},{name:"ğŸŒ¸ ë²šê½ƒí†µí•™ë¡œ",icon:"ğŸŒ¸",data:{artStyle:["webtoon style"],quality:["masterpiece","particle effects","petals falling"],location:["cherry blossom street"],foreground:["cherry trees","falling petals"],lightType:["soft spring light"],timeOfDay:45,mood:["romantic","spring"]}},{name:"ğŸ« í•™êµì˜¥ìƒ",icon:"ğŸ«",data:{artStyle:["webtoon style"],quality:["masterpiece","wide angle"],location:["school rooftop"],farBg:["city skyline"],lightType:["natural light"],timeOfDay:50,mood:["nostalgic","peaceful"]}},{name:"ğŸ° ë§ˆì™•ì„±",icon:"ğŸ°",data:{artStyle:["concept art","dark fantasy"],quality:["masterpiece","highly detailed","epic scale"],building:["dark castle","gothic architecture"],farBg:["storm clouds","lightning"],timeOfDay:85,lightType:["dramatic lighting","red glow"],mood:["ominous","epic"]}},{name:"âœ¨ ë§ˆë²•ìˆ²",icon:"âœ¨",data:{artStyle:["fantasy art"],quality:["masterpiece","magical particles","bioluminescent"],location:["enchanted forest"],foreground:["glowing mushrooms","magical plants"],lightType:["ethereal glow"],timeOfDay:80,mood:["mystical","magical"]}},{name:"ğŸ‰ ìš©ì˜ë‘¥ì§€",icon:"ğŸ‰",data:{artStyle:["concept art"],quality:["masterpiece","epic scale","dramatic"],location:["dragon lair"],farBg:["volcanic mountains"],lightType:["fire glow","lava light"],mood:["dangerous","epic"]}},{name:"ğŸŒ… í™©ê¸ˆì‹œê°„",icon:"ğŸŒ…",data:{artStyle:["webtoon style"],quality:["masterpiece","lens flare","golden hour"],location:["rooftop"],farBg:["sunset sky"],timeOfDay:72,lightType:["backlight","rim light"],lightColor:{h:30,s:90,l:60},mood:["emotional","cinematic"]}},{name:"ğŸŒ§ï¸ ë¹„ì˜¤ëŠ”ê±°ë¦¬",icon:"ğŸŒ§ï¸",data:{artStyle:["webtoon style"],quality:["masterpiece","rain effects","reflections"],location:["city street"],weather:["rain","wet ground"],timeOfDay:65,lightType:["street lights","neon reflections"],mood:["melancholic","atmospheric"]}},{name:"â„ï¸ ê²¨ìš¸ëˆˆê¸¸",icon:"â„ï¸",data:{artStyle:["webtoon style"],quality:["masterpiece","snow particles","cold atmosphere"],location:["snowy street"],weather:["snowfall"],lightType:["soft winter light"],timeOfDay:55,mood:["peaceful","cold"]}},{name:"ğŸŒ™ ë‹¬ë¹›ì•„ë˜",icon:"ğŸŒ™",data:{artStyle:["webtoon style"],quality:["masterpiece","moonlit","atmospheric"],location:["garden"],timeOfDay:95,lightType:["moonlight","soft shadows"],mood:["mysterious","romantic"]}}],ue=[{id:"gemini-2.5-flash-image",name:"ë‚˜ë…¸ë°”ë‚˜ë‚˜ (2.5 Flash)",desc:"ë¹ ë¥¸ ìƒì„±, 1K í•´ìƒë„",maxSize:"1K",price:"~$0.039/ì¥",provider:"gemini"},{id:"gemini-3-pro-image-preview",name:"ë‚˜ë…¸ë°”ë‚˜ë‚˜ Pro (3 Pro)",desc:"ìµœê³  í’ˆì§ˆ, 2K/4K ì§€ì›, ì°¸ì¡°ì´ë¯¸ì§€ 14ì¥",maxSize:"4K",price:"ìœ ë£Œ (í”„ë¦¬ë¯¸ì—„)",provider:"gemini"},{id:"local-gpu",name:"ğŸ–¥ï¸ ë¡œì»¬ GPU (Z-Image)",desc:"ë¡œì»¬ ì„œë²„ ì—°ê²° í•„ìš”, ë¬´ë£Œ",maxSize:"1K",price:"ë¬´ë£Œ (ë¡œì»¬)",provider:"local"}];function $t(r){const c=ue.find(o=>o.id===r);return(c==null?void 0:c.provider)||"gemini"}const Aa="http://localhost:8765",at=["gemini-3-pro-image-preview"],Lt=["1K","2K","4K"],Tt=["1:1","2:3","3:2","3:4","4:3","4:5","5:4","9:16","16:9","21:9"],Mt=r=>{var o,h,u,m,f;const c=((u=(h=(o=r.candidates)==null?void 0:o[0])==null?void 0:h.content)==null?void 0:u.parts)||[];for(const p of c){const P=((m=p.inlineData)==null?void 0:m.data)||((f=p.inline_data)==null?void 0:f.data);if(P)return P}return null};async function Pt(r,c,o=ue[0].id,h){const u=`https://generativelanguage.googleapis.com/v1beta/models/${o}:generateContent?key=${r}`,m={responseModalities:["TEXT","IMAGE"]},f=at.includes(o);(h!=null&&h.aspectRatio||h!=null&&h.imageSize&&f)&&(m.imageConfig={},h.aspectRatio&&(m.imageConfig.aspectRatio=h.aspectRatio),h.imageSize&&f&&(m.imageConfig.imageSize=h.imageSize));const p={contents:[{parts:[{text:c}]}],generationConfig:m};console.log("[generateImage] ìš”ì²­:",JSON.stringify(p,null,2));const b=await(await fetch(u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)})).json();if(console.log("[generateImage] ì‘ë‹µ:",b.error?b.error:"ì„±ê³µ"),b.error)throw new Error(b.error.message||"API ì˜¤ë¥˜");const I=Mt(b);if(!I)throw new Error("ì´ë¯¸ì§€ ìƒì„± ì‹¤íŒ¨");return{base64:I,url:`data:image/png;base64,${I}`}}async function Rt(r,c,o){var I,$,ne,k,O,G,W,Z,R,v;let h=1024,u=1024;if(o!=null&&o.aspectRatio){const[C,j]=o.aspectRatio.split(":").map(Number);C>j?(h=1024,u=Math.round(1024*j/C)):(u=1024,h=Math.round(1024*C/j))}console.log("[generateImageModelScope] ì‘ì—… ì œì¶œ:",{prompt:c.slice(0,100),width:h,height:u});const m=await fetch("/api/modelscope?action=generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiKey:r,prompt:c,width:h,height:u})}),f=await m.json();if(console.log("[generateImageModelScope] ì œì¶œ ì‘ë‹µ:",JSON.stringify(f,null,2)),f.error)throw new Error(f.error.message||f.error||"ModelScope API ì˜¤ë¥˜");if(f.errors){const C=typeof f.errors=="object"?JSON.stringify(f.errors):f.errors;throw new Error("ModelScope API ì˜¤ë¥˜: "+C)}if(!m.ok)throw new Error(`HTTP ${m.status}: ${f.message||"ìš”ì²­ ì‹¤íŒ¨"}`);if(($=(I=f.output)==null?void 0:I.output_images)!=null&&$[0])return await Qe(f.output.output_images[0]);if((k=(ne=f.data)==null?void 0:ne[0])!=null&&k.url)return await Qe(f.data[0].url);const p=f.task_id||((O=f.output)==null?void 0:O.task_id);if(!p)throw new Error("ì‘ì—… IDë¥¼ ë°›ì§€ ëª»í–ˆìŠµë‹ˆë‹¤: "+JSON.stringify(f));const P=30,b=2e3;for(let C=0;C<P;C++){await new Promise(he=>setTimeout(he,b));const N=await(await fetch("/api/modelscope?action=poll",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiKey:r,taskId:p})})).json();console.log(`[generateImageModelScope] í´ë§ ${C+1}/${P}:`,N.task_status||N.status);const re=N.task_status||N.status;if(re==="SUCCEED"||re==="SUCCESS"){const he=((G=N.output_images)==null?void 0:G[0])||((Z=(W=N.output)==null?void 0:W.output_images)==null?void 0:Z[0])||((v=(R=N.result)==null?void 0:R.output_images)==null?void 0:v[0]);if(he)return await Qe(he);throw new Error("ì´ë¯¸ì§€ URLì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤")}else if(re==="FAILED"||re==="FAILURE")throw new Error("ì´ë¯¸ì§€ ìƒì„± ì‹¤íŒ¨: "+(N.message||N.error||"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜"))}throw new Error("ì´ë¯¸ì§€ ìƒì„± ì‹œê°„ ì´ˆê³¼ (60ì´ˆ)")}async function Qe(r){const o=await(await fetch("/api/modelscope?action=fetch-image",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageUrl:r})})).json();if(o.error)throw new Error(o.error);return{base64:o.base64,url:o.url}}async function At(r,c){let o=1024,h=1024;if(c!=null&&c.aspectRatio){const[u,m]=c.aspectRatio.split(":").map(Number);u>m?(o=1024,h=Math.round(1024*m/u)):(h=1024,o=Math.round(1024*u/m))}console.log("[generateImageLocalGpu] ìš”ì²­:",{prompt:r.slice(0,100),width:o,height:h});try{const m=await(await fetch(`${Aa}/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:r,width:o,height:h,num_inference_steps:9,guidance_scale:0,seed:-1})})).json();if(console.log("[generateImageLocalGpu] ì‘ë‹µ:",m.success?"ì„±ê³µ":m.error),!m.success)throw new Error(m.error||"ì´ë¯¸ì§€ ìƒì„± ì‹¤íŒ¨");return{base64:m.base64,url:m.url}}catch(u){throw u instanceof TypeError&&u.message.includes("fetch")?new Error("ë¡œì»¬ GPU ì„œë²„ì— ì—°ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸í•˜ì„¸ìš”."):u}}async function oe(r,c,o,h=ue[0].id,u="image/png",m,f){const p=`https://generativelanguage.googleapis.com/v1beta/models/${h}:generateContent?key=${r}`,P=[{text:o},{inline_data:{mime_type:u,data:c}}];if(m){const W=(Array.isArray(m)?m:[m]).slice(0,14);for(const Z of W)Z&&P.push({inline_data:{mime_type:u,data:Z}})}const b={responseModalities:["TEXT","IMAGE"]},I=at.includes(h);(f!=null&&f.aspectRatio||f!=null&&f.imageSize&&I)&&(b.imageConfig={},f.aspectRatio&&(b.imageConfig.aspectRatio=f.aspectRatio),f.imageSize&&I&&(b.imageConfig.imageSize=f.imageSize));const $={contents:[{parts:P}],generationConfig:b};console.log("[editImage] ìš”ì²­:",{model:h,mimeType:u,promptLength:o.length,imageDataLength:c.length,hasReference:!!m,referenceLength:(m==null?void 0:m.length)||0});const k=await(await fetch(p,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify($)})).json();if(console.log("[editImage] ì‘ë‹µ:",k.error?k.error:"ì„±ê³µ"),k.error)throw new Error(k.error.message||"API ì˜¤ë¥˜");const O=Mt(k);if(!O)throw new Error("ì´ë¯¸ì§€ í¸ì§‘ ì‹¤íŒ¨");return{base64:O,url:`data:image/png;base64,${O}`}}function Ea(r,c,o){const h=document.createElement("canvas");h.width=r.width,h.height=r.height,h.getContext("2d").putImageData(r,0,0);const m=document.createElement("canvas");m.width=c,m.height=o;const f=m.getContext("2d");return f.drawImage(h,0,0,c,o),f.getImageData(0,0,c,o)}function Oa(r,c){let o=c;(r.width!==c.width||r.height!==c.height)&&(console.warn(`[extractAlpha] ì´ë¯¸ì§€ í¬ê¸° ë¶ˆì¼ì¹˜! í°ë°°ê²½: ${r.width}x${r.height}, ê²€ì •ë°°ê²½: ${c.width}x${c.height}`),console.log("[extractAlpha] ê²€ì •ë°°ê²½ ì´ë¯¸ì§€ë¥¼ í°ë°°ê²½ í¬ê¸°ë¡œ ë¦¬ì‚¬ì´ì¦ˆí•©ë‹ˆë‹¤."),o=Ea(c,r.width,r.height));const h=r.width,u=r.height,m=r.data,f=o.data,p=new Uint8ClampedArray(m.length),P=Math.sqrt(765*255);for(let b=0;b<h*u;b++){const I=b*4,$=m[I],ne=m[I+1],k=m[I+2],O=f[I],G=f[I+1],W=f[I+2];let R=1-Math.sqrt(Math.pow($-O,2)+Math.pow(ne-G,2)+Math.pow(k-W,2))/P;R=Math.max(0,Math.min(1,R));let v=0,C=0,j=0;R>.01&&(v=O/R,C=G/R,j=W/R),p[I]=Math.round(Math.min(255,v)),p[I+1]=Math.round(Math.min(255,C)),p[I+2]=Math.round(Math.min(255,j)),p[I+3]=Math.round(R*255)}return new ImageData(p,h,u)}function Et(r){return new Promise((c,o)=>{const h=new Image;h.onload=()=>{const u=document.createElement("canvas");u.width=h.width,u.height=h.height;const m=u.getContext("2d");m.drawImage(h,0,0),c(m.getImageData(0,0,u.width,u.height))},h.onerror=()=>o(new Error("ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨")),h.src=r})}function Ma(r){const c=document.createElement("canvas");return c.width=r.width,c.height=r.height,c.getContext("2d").putImageData(r,0,0),c.toDataURL("image/png")}async function Ue(r,c,o=ue[0].id,h){h==null||h("ê²€ì •ë°°ê²½ìœ¼ë¡œ ë³€í™˜ ì¤‘...");const u=await oe(r,c,"Change the white background to solid pure black #000000. Keep everything else exactly the same. Do not modify the character at all, only change the background color.",o);h==null||h("íˆ¬ëª… ë°°ê²½ ìƒì„± ì¤‘...");const m=`data:image/png;base64,${c}`,[f,p]=await Promise.all([Et(m),Et(u.url)]),P=Oa(f,p);return Ma(P)}const tt=[{id:"style",name:"í™”í’",icon:"ğŸ¨",prompt:"match the art style and color palette"},{id:"pose",name:"í¬ì¦ˆ",icon:"ğŸƒ",prompt:"match the pose and body position"},{id:"outfit",name:"ì˜ìƒ",icon:"ğŸ‘•",prompt:"use the same outfit and clothing"},{id:"color",name:"ìƒ‰ê°",icon:"ğŸŒˆ",prompt:"use the same color scheme"},{id:"face",name:"ì–¼êµ´",icon:"ğŸ‘¤",prompt:"match the facial features"},{id:"bg",name:"ë°°ê²½",icon:"ğŸï¸",prompt:"use the same background"},{id:"object",name:"ì˜¤ë¸Œì íŠ¸",icon:"ğŸ“¦",prompt:"include this object in the image"}];function qa({onImageGenerated:r}){const c=Sa(),{assets:o,addAsset:h,removeAsset:u}=Ot(),[m,f]=i.useState("char"),[p,P]=i.useState(""),[b,I]=i.useState(ue[0].id),[$,ne]=i.useState("1K"),[k,O]=i.useState("1:1"),[G,W]=i.useState(1),[Z,R]=i.useState(!1),[v,C]=i.useState([]),[j,N]=i.useState(-1),[re,he]=i.useState(450),[Ce,st]=i.useState(1),[Ne,_e]=i.useState({x:0,y:0}),[nt,Se]=i.useState(!1),[Ie,rt]=i.useState(!1),[it,qt]=i.useState({x:0,y:0}),[$e,lt]=i.useState("generate"),[Dt,ot]=i.useState(!1),[ct,Ke]=i.useState(!1),[zt,pe]=i.useState(!1),[_,Le]=i.useState("same"),[Te,Pe]=i.useState({pose:!0,expr:!0,angle:!0,cloth:!1}),[Ut,_t]=i.useState("expression"),[Da,za]=i.useState([]),[Kt,Bt]=i.useState("age"),[Ft,Gt]=i.useState(0),[Jt,Ht]=i.useState(100),[Be,Vt]=i.useState([]),[Ua,dt]=i.useState([]),[ht,_a]=i.useState("style"),[Re,Ka]=i.useState("korean webtoon"),[Fe,Ba]=i.useState(1),[mt,ie]=i.useState(0),[Fa,gt]=i.useState(!1),[Ge,Ae]=i.useState([]),[Je,Ga]=i.useState("all"),[Ja,ut]=i.useState(!1),[J,He]=i.useState(null),[X,fe]=i.useState(""),[Ee,Q]=i.useState(!1),[le,ye]=i.useState([]),[M,Oe]=i.useState({style:!0,expression:!0,pose:!1,background:!1}),[pt,H]=i.useState(null),[ee,Wt]=i.useState(!1),[te,ft]=i.useState(new Set),[be,ae]=i.useState([]),[Ve,We]=i.useState(null),yt=i.useCallback(e=>{ne(e),(e==="2K"||e==="4K")&&(at.includes(b)||I("gemini-3-pro-image-preview"))},[b]),[Xt,Yt]=i.useState({cat:"basic",values:{},negTags:["low quality","blurry","bad anatomy","extra limbs","bad hands","multiple characters"],refImgs:[]}),[Zt,Qt]=i.useState({cat:"style",values:{},negTags:["low quality","blurry","watermark","text"],refImgs:[]}),[q,V]=i.useState([]),[xe,bt]=i.useState(()=>{const e=localStorage.getItem("ai-studio-custom-presets");return e?JSON.parse(e):[]}),[ve,xt]=i.useState(""),[ea,we]=i.useState(!1),[D,vt]=i.useState(0),[K,wt]=i.useState(70),[B,jt]=i.useState(50),[ta,Me]=i.useState(()=>{const e=localStorage.getItem("ai-studio-color-palette"),a=e?JSON.parse(e):[],s=new Array(40).fill(null);return a.forEach((n,l)=>{l<40&&(s[l]=n)}),s}),[me,qe]=i.useState(null),y=m==="char"?Xt:Zt,S=m==="char"?Yt:Qt,je=m==="char"?La:Ta,aa=m==="char"?Pa:Ra,sa=i.useCallback(e=>{S(a=>({...a,cat:e}))},[S]),na=i.useCallback((e,a,s)=>{S(n=>{if(s){const l=n.negTags.includes(a)?n.negTags.filter(d=>d!==a):[...n.negTags,a];return{...n,negTags:l}}else{const l=n.values[e];let d;return Array.isArray(l)?d=l.includes(a)?l.filter(w=>w!==a):[...l,a]:d=[a],{...n,values:{...n.values,[e]:d.length>0?d:void 0}}}})},[S]),kt=i.useCallback((e,a)=>{S(s=>({...s,values:{...s.values,[e]:a}}))},[S]);i.useCallback((e,a,s)=>{S(n=>{const l=n.values[e]||{h:30,l:50};return{...n,values:{...n.values,[e]:{...l,[a]:s}}}})},[S]);const Ct=i.useCallback(e=>{S(a=>({...a,values:{...a.values,[e]:{h:D,s:K,l:B}}})),Me(a=>{if(a.some(l=>l&&l.h===D&&l.s===K&&l.l===B))return a;const n=[{h:D,s:K,l:B},...a].slice(0,40);return localStorage.setItem("ai-studio-color-palette",JSON.stringify(n)),n})},[D,K,B,S]),ra=i.useCallback((e,a)=>{S(s=>{if(a)return{...s,negTags:[]};const n={...s.values};return delete n[e],delete n[e+"Color"],delete n[e+"Str"],{...s,values:n}})},[S]),Nt=i.useCallback(e=>{S(a=>({...a,values:{...e.data}}))},[S]),ia=i.useCallback(()=>{S(e=>({...e,values:{}}))},[S]),St=i.useCallback(()=>{if(!ve.trim()){alert("í”„ë¦¬ì…‹ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”");return}const e={name:ve.trim(),icon:m==="char"?"ğŸ‘¤":"ğŸ™ï¸",data:{...y.values}},a=[...xe,e];bt(a),localStorage.setItem("ai-studio-custom-presets",JSON.stringify(a)),xt(""),we(!1),alert(`"${ve}" í”„ë¦¬ì…‹ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤`)},[ve,m,y.values,xe]),la=i.useCallback(e=>{if(!confirm("ì´ í”„ë¦¬ì…‹ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?"))return;const a=xe.filter((s,n)=>n!==e);bt(a),localStorage.setItem("ai-studio-custom-presets",JSON.stringify(a))},[xe]),Xe=i.useCallback(async e=>{const a=[];for(const s of Array.from(e)){if(y.refImgs.length+a.length>=14)break;const n=URL.createObjectURL(s),l=await se(s);a.push({url:n,b64:l,type:"style",strength:.8})}S(s=>({...s,refImgs:[...s.refImgs,...a]}))},[y.refImgs.length,S]),oa=i.useCallback(e=>{S(a=>({...a,refImgs:a.refImgs.filter((s,n)=>n!==e)}))},[S]),ca=i.useCallback((e,a)=>{S(s=>({...s,refImgs:s.refImgs.map((n,l)=>l===e?{...n,type:a}:n)}))},[S]);i.useCallback((e,a)=>{S(s=>({...s,refImgs:s.refImgs.map((n,l)=>l===e?{...n,strength:a}:n)}))},[S]);const E=i.useMemo(()=>{const e=[];Object.values(je).forEach(s=>{Object.entries(s.items).forEach(([n,l])=>{if("isNeg"in l&&l.isNeg)return;const d=y.values[n];if(d==null||d===""||Array.isArray(d)&&d.length===0)return;let w="";if("type"in l&&l.type){const x=l;if(x.type==="hue"||x.type==="skin"){const A=d;w=x.prompt(A.h,A.s??70,A.l)}else w=x.prompt(d)}else if("tags"in l){const x=l,z=(Array.isArray(d)?d:[d]).filter(g=>g&&g!=="none"&&!g.startsWith("no ")&&!g.startsWith("empty"));if(z.length===0)return;if(x.hasColor&&y.values[n+"Color"]){const g=y.values[n+"Color"];w=z.map(F=>de(g.h,g.s??70,g.l)+" colored "+F).join(", ")}else w=z.join(", ")}if(w){const x=y.values[n+"Str"]??1;e.push(x!==1?`(${w}:${x})`:w)}})});let a=e.join(", ");return m==="char"&&(a=`A single character, full body, pure white background, ${a}. Only ONE character.`),a},[je,y.values,m]),De=i.useMemo(()=>y.negTags.join(", "),[y.negTags]);i.useMemo(()=>Je==="all"?o:o.filter(e=>e.category===Je),[o,Je]);const da=i.useCallback(async(e,a)=>{let s;if(y.refImgs.length>0){const n=y.refImgs.map(l=>l.b64);s=await oe(p,n[0],e,b,"image/png",n.slice(1),{imageSize:$,aspectRatio:k})}else{const n=$t(b);n==="modelscope"?s=await Rt(p,e,{aspectRatio:k}):n==="local"?s=await At(e,{aspectRatio:k}):s=await Pt(p,e,b,{imageSize:$,aspectRatio:k})}if(ee){H(`ì´ë¯¸ì§€ ${a+1} íˆ¬ëª…í™” ì²˜ë¦¬ ì¤‘...`);const n=await Ue(p,s.base64,b,d=>H(`ì´ë¯¸ì§€ ${a+1}: ${d}`)),l=n.split(",")[1];return{url:n,b64:l,prompt:`[íˆ¬ëª…ë°°ê²½] ${e}`}}return{url:s.url,b64:s.base64,prompt:e}},[p,y.refImgs,b,$,k,ee]),ha=i.useCallback(()=>{Ve&&Ve.abort(),ae([]),R(!1),H(null),We(null)},[Ve]),ma=i.useCallback(e=>{ae(a=>a.map(s=>s.id===e?{...s,status:"cancelled"}:s))},[]),ga=i.useCallback(async()=>{if(!p){alert("API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”");return}if(ee&&!window.confirm(`âš ï¸ íˆ¬ëª…ë°°ê²½ ìƒì„± ì•ˆë‚´

â€¢ í°ë°°ê²½ ì´ë¯¸ì§€ ìƒì„± í›„ ê²€ì •ë°°ê²½ìœ¼ë¡œ ë³€í™˜í•˜ì—¬ ì•ŒíŒŒ ì±„ë„ì„ ì¶”ì¶œí•©ë‹ˆë‹¤.
â€¢ ì¼ë°˜ ìƒì„±ë³´ë‹¤ 2ë°°ì˜ API í˜¸ì¶œì´ í•„ìš”í•©ë‹ˆë‹¤.
â€¢ ì²˜ë¦¬ ì‹œê°„ì´ ë” ì˜¤ë˜ ê±¸ë¦½ë‹ˆë‹¤.

ê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`))return;R(!0);const e=new AbortController;We(e);const a=Array.from({length:G},(s,n)=>({id:`gen-${Date.now()}-${n}`,index:n,status:"generating"}));ae(a);try{let s=E;if(y.refImgs.length>0){const g=et(y.refImgs);s+=`

`+g}y.negTags.length>0&&(s+=`

Avoid: ${De}`);const n=(g,F,T)=>{ae(U=>U.map(Y=>Y.id===g?{...Y,progress:F,...T?{status:T}:{}}:Y))},l=async g=>{const F=be.find(T=>T.id===g.id);if((F==null?void 0:F.status)==="cancelled")return{slotId:g.id,result:null,failed:!1};try{n(g.id,"API í˜¸ì¶œ ì¤‘...");let T;if(y.refImgs.length>0){n(g.id,"ì°¸ì¡° ì´ë¯¸ì§€ ì²˜ë¦¬ ì¤‘...");const U=y.refImgs.map(Y=>Y.b64);T=await oe(p,U[0],s,b,"image/png",U.slice(1),{imageSize:$,aspectRatio:k})}else{n(g.id,"ì´ë¯¸ì§€ ìƒì„± ì¤‘...");const U=$t(b);U==="modelscope"?T=await Rt(p,s,{aspectRatio:k}):U==="local"?T=await At(s,{aspectRatio:k}):T=await Pt(p,s,b,{imageSize:$,aspectRatio:k})}if(n(g.id,"ì´ë¯¸ì§€ ìˆ˜ì‹  ì™„ë£Œ"),ee){n(g.id,"íˆ¬ëª…í™” ì¤€ë¹„...","transparent");const U=await Ue(p,T.base64,b,ke=>n(g.id,ke,"transparent")),Y=U.split(",")[1];return{slotId:g.id,result:{url:U,b64:Y,prompt:`[íˆ¬ëª…ë°°ê²½] ${s}`},failed:!1}}return{slotId:g.id,result:{url:T.url,b64:T.base64,prompt:s},failed:!1}}catch(T){const U=T instanceof Error?T.message:"ìƒì„± ì‹¤íŒ¨";return ae(Y=>Y.map(ke=>ke.id===g.id?{...ke,status:"failed",error:U,progress:"ì‹¤íŒ¨"}:ke)),{slotId:g.id,result:null,failed:!0}}},d=a.map(g=>l(g)),w=await Promise.all(d),x=w.filter(g=>g.result!==null&&!g.failed).map(g=>g.result).reverse(),A=w.filter(g=>g.result!==null&&!g.failed).map(g=>g.slotId);ae(g=>g.filter(F=>!A.includes(F.id))),x.length>0&&(V(g=>[...x,...g]),x.forEach(g=>{r==null||r(g.url,g.prompt||""),h({url:g.url,prompt:g.prompt,category:m==="char"?"character":"background",source:"whiteboard"})}));const z=w.filter(g=>g.failed).length;z>0&&console.log(`${z}ê°œ ì´ë¯¸ì§€ ìƒì„± ì‹¤íŒ¨`)}catch(s){s instanceof Error&&s.name==="AbortError"?console.log("ìƒì„±ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤"):(console.error("ìƒì„± ì˜¤ë¥˜:",s),alert(s instanceof Error?s.message:"ìƒì„± ì‹¤íŒ¨"))}finally{R(!1),H(null),ae(s=>s.filter(n=>n.status==="failed")),We(null)}},[p,G,E,y.refImgs,y.negTags,De,da,ee,r,be]),ua=i.useCallback((e,a)=>{const s=document.createElement("a");s.href=e.url,s.download=`image_${Date.now()}_${a}.png`,s.click()},[]),pa=i.useCallback(()=>{confirm("ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ëª¨ë“  ì´ë¯¸ì§€ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&V([])},[]),fa=i.useCallback((e,a)=>{if(a.ctrlKey||a.metaKey)C(s=>{if(s.includes(e)){const n=s.filter(l=>l!==e);return j===e&&N(n.length>0?n[0]:-1),n}else return[...s,e].sort((n,l)=>n-l)});else if(a.shiftKey&&v.length>0){const s=v[v.length-1],n=Math.min(s,e),l=Math.max(s,e),d=Array.from({length:l-n+1},(w,x)=>n+x);C(w=>[...new Set([...w,...d])].sort((x,A)=>x-A)),N(e)}else C([e]),N(e)},[v,j]),ze=i.useCallback(()=>{C([]),N(-1)},[]),It=i.useCallback(()=>{C(q.map((e,a)=>a)),N(0)},[q]);i.useCallback(()=>{if(v.length===0)return;const e=v.indexOf(j);e>0&&N(v[e-1])},[v,j]),i.useCallback(()=>{if(v.length===0)return;const e=v.indexOf(j);e<v.length-1&&N(v[e+1])},[v,j]);const ge=j>=0?q[j]:null,L=v.map(e=>q[e]).filter(Boolean),Ye=i.useCallback(()=>{v.length!==0&&confirm(`ì„ íƒí•œ ${v.length}ê°œ ì´ë¯¸ì§€ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)&&(V(e=>e.filter((a,s)=>!v.includes(s))),C([]),N(-1))},[v]),Ze=i.useCallback(e=>{if(!(e.target instanceof HTMLTextAreaElement||e.target instanceof HTMLInputElement)&&q.length!==0)if(e.key==="ArrowUp"){e.preventDefault();const a=j>=0?j:0,s=a>0?a-1:q.length-1;C([s]),N(s)}else if(e.key==="ArrowDown"){e.preventDefault();const a=j>=0?j:-1,s=a<q.length-1?a+1:0;C([s]),N(s)}else e.key==="Escape"?ze():e.key==="a"&&(e.ctrlKey||e.metaKey)?(e.preventDefault(),It()):e.key==="Delete"&&v.length>0&&Ye()},[v,j,q,ze,It,Ye]);i.useEffect(()=>(window.addEventListener("keydown",Ze),()=>window.removeEventListener("keydown",Ze)),[Ze]),i.useEffect(()=>{const e=s=>{s.code==="Space"&&!s.repeat&&!(s.target instanceof HTMLTextAreaElement||s.target instanceof HTMLInputElement)&&(s.preventDefault(),rt(!0))},a=s=>{s.code==="Space"&&(rt(!1),Se(!1))};return window.addEventListener("keydown",e),window.addEventListener("keyup",a),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",a)}},[]),i.useEffect(()=>{_e({x:0,y:0})},[j]);const ya=i.useCallback(e=>{confirm("ì´ ì´ë¯¸ì§€ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&(V(a=>a.filter((s,n)=>n!==e)),C(a=>a.filter(s=>s!==e).map(s=>s>e?s-1:s)),j===e?N(-1):j>e&&N(a=>a-1))},[j]),ba=i.useCallback(e=>{e.preventDefault(),ot(!0);const a=e.clientX,s=re,n=d=>{const w=a-d.clientX,x=Math.min(Math.max(s+w,300),800);he(x)},l=()=>{ot(!1),window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",l)};window.addEventListener("mousemove",n),window.addEventListener("mouseup",l)},[re]),xa=i.useCallback(async e=>{const a=e.target.files;if(!a)return;const s=[];for(const n of Array.from(a)){const l=URL.createObjectURL(n),d=await se(n);s.push({url:l,b64:d,prompt:`[ì—…ë¡œë“œ] ${n.name}`})}V(n=>[...s,...n]),e.target.value=""},[]),va=i.useCallback(async e=>{e.preventDefault(),Ke(!1);const a=e.dataTransfer.files;if(!a.length)return;const s=[];for(const n of Array.from(a)){if(!n.type.startsWith("image/"))continue;const l=URL.createObjectURL(n),d=await se(n);s.push({url:l,b64:d,prompt:`[ì—…ë¡œë“œ] ${n.name}`})}s.length>0&&V(n=>[...s,...n])},[]),wa=i.useCallback(e=>{e.preventDefault(),e.stopPropagation(),Ke(!0)},[]),ja=i.useCallback(e=>{e.preventDefault(),e.stopPropagation();const a=e.currentTarget.getBoundingClientRect(),s=e.clientX,n=e.clientY;s>=a.left&&s<=a.right&&n>=a.top&&n<=a.bottom||Ke(!1)},[]);i.useCallback(async e=>{const a=e.target.files;if(!a)return;const s=[];for(const n of Array.from(a)){const l=URL.createObjectURL(n),d=await se(n);s.push({url:l,b64:d})}Vt(n=>[...n,...s]),e.target.value=""},[]),i.useCallback(async e=>{const a=[];for(const s of Array.from(e)){if(Ge.length+a.length>=14)break;const n=URL.createObjectURL(s),l=await se(s);a.push({url:n,b64:l,type:"style",strength:.8})}Ae(s=>[...s,...a])},[Ge.length]),i.useCallback(e=>{Ae(a=>a.filter((s,n)=>n!==e))},[]),i.useCallback((e,a)=>{Ae(s=>s.map((n,l)=>l===e?{...n,type:a}:n))},[]),i.useCallback((e,a)=>{Ae(s=>s.map((n,l)=>l===e?{...n,strength:a}:n))},[]),i.useCallback(async()=>{if(!p||Be.length===0){alert("API í‚¤ì™€ ë³€í™˜í•  ì´ë¯¸ì§€ë¥¼ ì¶”ê°€í•˜ì„¸ìš”");return}gt(!0),ie(0),dt([]);const e={style:`Convert this image to ${Re} art style. Keep the composition and subject the same.`,full:`Completely redraw this image in ${Re} style. Reimagine all elements.`,color:`Adjust the color palette of this image to match ${Re} aesthetic. Keep everything else the same.`,pose:"Change the pose of the character in this image to a different pose. Keep the same character, style, and background. Use reference images for the new pose if provided.",angle:"Change the camera angle/view of this image. Keep the same subject and style but show it from a different perspective. Use reference images if provided.",expression:"Change the facial expression of the character in this image. Keep everything else the same - same pose, clothes, background.",lineart:"Extract clean line art from this image. Black lines on white background, no colors.",sketch:"Convert this image to a pencil sketch style. Grayscale, hand-drawn look.",enhance:"Enhance this image with better quality, sharper details, and improved lighting.",upscale:"Upscale and enhance this image while preserving all details.",removebg:"Remove the background and make it pure white. Keep the main subject intact.",nightify:"Convert this daytime scene to a nighttime scene. Add moonlight and stars.",dayify:"Convert this nighttime scene to a daytime scene. Add sunlight and blue sky."};let a=e[ht]||e.style;if(y.refImgs.length>0){const d=et(y.refImgs);a+=`

`+d}const s=[];Be.forEach((d,w)=>{for(let x=0;x<Fe;x++)s.push({input:d,idx:w*Fe+x})});const n=s.length;let l=0;try{const d=s.map(async({input:x})=>{const A=y.refImgs.map(g=>g.b64),z=await oe(p,x.b64,a,b,"image/png",A.length>0?A:void 0,{imageSize:$,aspectRatio:k});return l++,ie(l/n*100),{url:z.url,b64:z.base64,prompt:a}}),w=await Promise.all(d);dt(w),w.forEach(x=>{h({url:x.url,prompt:x.prompt,category:"batch",source:"whiteboard"})})}catch(d){console.error("ë°°ì¹˜ ì˜¤ë¥˜:",d),alert(d instanceof Error?d.message:"ë°°ì¹˜ ì²˜ë¦¬ ì‹¤íŒ¨")}finally{gt(!1)}},[p,Be,Fe,ht,Re,Ge,b,$,k,h]),i.useCallback(e=>{He(e),fe(""),ut(!0)},[]),i.useCallback(async()=>{if(!p||!J||!X.trim()){alert("API í‚¤ì™€ í¸ì§‘ í”„ë¡¬í”„íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”");return}Q(!0);try{const e=await oe(p,J.b64,X,b,"image/png",void 0,{imageSize:$,aspectRatio:k});He({url:e.url,b64:e.base64,prompt:X})}catch(e){console.error("í¸ì§‘ ì˜¤ë¥˜:",e),alert(e instanceof Error?e.message:"í¸ì§‘ ì‹¤íŒ¨")}finally{Q(!1)}},[p,J,X,b,$,k]),i.useCallback(()=>{J&&(V(e=>[J,...e]),ut(!1))},[J]),i.useCallback(async(e,a)=>{if(!p){alert("API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”");return}H(`ì´ë¯¸ì§€ ${a+1} íˆ¬ëª…í™” ì²˜ë¦¬ ì¤‘...`);try{const s=await Ue(p,e.b64,b,d=>H(`ì´ë¯¸ì§€ ${a+1}: ${d}`)),n=s.split(",")[1],l={url:s,b64:n,prompt:`[íˆ¬ëª…ë°°ê²½] ${e.prompt||""}`};V(d=>[l,...d]),r==null||r(s,l.prompt||"")}catch(s){console.error("íˆ¬ëª…í™” ì˜¤ë¥˜:",s),alert(s instanceof Error?s.message:"íˆ¬ëª…í™” ì‹¤íŒ¨")}finally{H(null)}},[p,b,r]),i.useCallback(async()=>{if(!p||!J){alert("API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”");return}Q(!0),H("íˆ¬ëª…í™” ì²˜ë¦¬ ì¤‘...");try{const e=await Ue(p,J.b64,b,s=>H(s)),a=e.split(",")[1];He({url:e,b64:a,prompt:`[íˆ¬ëª…ë°°ê²½] ${J.prompt||""}`})}catch(e){console.error("íˆ¬ëª…í™” ì˜¤ë¥˜:",e),alert(e instanceof Error?e.message:"íˆ¬ëª…í™” ì‹¤íŒ¨")}finally{Q(!1),H(null)}},[p,J,b]);const ka=(e,a)=>{if(!a||Array.isArray(a)&&a.length===0)return"";if("type"in e&&e.type==="slider")return`${a}${e.unit||""}`;if("type"in e&&(e.type==="hue"||e.type==="skin")){const s=a;return $a(s.h,s.l)}if("tags"in e){const s=e,n=Array.isArray(a)?a:[a],l=n.slice(0,2).map(d=>{var w;return((w=s.tags.find(x=>x[0]===d))==null?void 0:w[1])||d}).join(", ");return n.length>2?l+"...":l}return String(a)},Ca=e=>{const a=je[e];return Object.keys(a.items).some(s=>{const n=y.values[s];return n!=null&&n!==""&&!(Array.isArray(n)&&n.length===0)})};return t.jsxs("div",{className:"ai-studio",children:[t.jsxs("header",{className:"studio-header",children:[t.jsx("button",{className:"nav-btn back-btn",onClick:()=>c("/workspace"),children:"â† ì›Œí¬ìŠ¤í˜ì´ìŠ¤"}),t.jsx("div",{className:"logo",children:"ğŸ¨ AI ìŠ¤íŠœë””ì˜¤"}),t.jsxs("div",{className:"header-controls",children:[t.jsx("input",{type:"password",className:"inp api-input",value:p,onChange:e=>P(e.target.value),placeholder:"ğŸ”‘ API Key"}),t.jsx("select",{className:"sel model-select",value:b,onChange:e=>I(e.target.value),title:"AI ëª¨ë¸",children:ue.map(e=>t.jsx("option",{value:e.id,title:`${e.desc} | ${e.price}`,children:e.name},e.id))})]})]}),t.jsxs("div",{className:"studio-main",children:[t.jsxs("div",{className:"left-panel",children:[t.jsxs("div",{className:"page-tabs",children:[t.jsx("button",{className:`page-tab ${m==="char"?"active":""}`,onClick:()=>f("char"),children:"ğŸ‘¤ ìºë¦­í„°"}),t.jsx("button",{className:`page-tab ${m==="bg"?"active":""}`,onClick:()=>f("bg"),children:"ğŸ™ï¸ ë°°ê²½"})]}),t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"left-panel-actions",children:t.jsx("button",{className:"btn-reset",onClick:ia,title:"ëª¨ë“  ì„¤ì • ì´ˆê¸°í™”",children:"ğŸ”„ ì´ˆê¸°í™”"})}),t.jsx("div",{className:"cat-bar",children:Object.entries(je).map(([e,a])=>t.jsxs("button",{className:`cat-btn ${y.cat===e?"active":""} ${Ca(e)?"has-val":""}`,onClick:()=>sa(e),children:[t.jsx("span",{className:"dot"}),a.icon," ",a.name]},e))}),t.jsx("div",{className:"settings",children:Na()}),t.jsxs("div",{className:"panel-section preset-section-left",children:[t.jsxs("div",{className:"panel-title",children:[t.jsx("span",{children:"ğŸ“š"})," í”„ë¦¬ì…‹",t.jsx("button",{className:"btn-add-preset-sm",onClick:()=>we(!0),children:"+ ì €ì¥"})]}),t.jsxs("div",{className:"preset-grid-left",children:[xe.map((e,a)=>t.jsxs("div",{className:"preset-chip custom",onClick:()=>Nt(e),children:[t.jsx("span",{children:e.name}),t.jsx("button",{className:"preset-del",onClick:s=>{s.stopPropagation(),la(a)},children:"Ã—"})]},`c-${a}`)),aa.map((e,a)=>t.jsx("div",{className:"preset-chip",onClick:()=>Nt(e),children:e.name},a))]})]}),t.jsxs("div",{className:"panel-section color-picker-section",children:[t.jsxs("div",{className:"panel-title",children:[t.jsx("span",{children:"ğŸ¨"})," ìƒ‰ìƒ ì„ íƒ"]}),t.jsx("div",{className:"color-preview-box",style:{background:ce(D,K,B)},children:t.jsx("span",{className:"color-hex-label",children:ce(D,K,B)})}),t.jsxs("div",{className:"color-slider-row",children:[t.jsx("span",{className:"color-slider-label",children:"ìƒ‰ìƒ"}),t.jsx("div",{className:"color-slider-track hue-track",children:t.jsx("input",{type:"range",min:0,max:360,value:D,onChange:e=>vt(Number(e.target.value))})}),t.jsxs("span",{className:"color-slider-value",children:[D,"Â°"]})]}),t.jsxs("div",{className:"color-slider-row",children:[t.jsx("span",{className:"color-slider-label",children:"ì±„ë„"}),t.jsx("div",{className:"color-slider-track sat-track",style:{"--hue":D,"--light":B},children:t.jsx("input",{type:"range",min:0,max:100,value:K,onChange:e=>wt(Number(e.target.value))})}),t.jsxs("span",{className:"color-slider-value",children:[K,"%"]})]}),t.jsxs("div",{className:"color-slider-row",children:[t.jsx("span",{className:"color-slider-label",children:"ëª…ë„"}),t.jsx("div",{className:"color-slider-track light-track",style:{"--hue":D,"--sat":K},children:t.jsx("input",{type:"range",min:5,max:95,value:B,onChange:e=>jt(Number(e.target.value))})}),t.jsxs("span",{className:"color-slider-value",children:[B,"%"]})]}),t.jsxs("div",{className:"mini-palette",children:[t.jsxs("div",{className:"mini-palette-header",children:[t.jsx("span",{className:"mini-palette-label",children:"íŒ”ë ˆíŠ¸"}),t.jsx("button",{className:`btn-bucket ${me!==null?"active":""}`,onClick:()=>{me!==null&&(Me(e=>{const a=[...e];return a[me]={h:D,s:K,l:B},localStorage.setItem("ai-studio-color-palette",JSON.stringify(a)),a}),qe(null))},disabled:me===null,title:"ì„ íƒëœ ì¹¸ì— í˜„ì¬ ìƒ‰ìƒ ì±„ìš°ê¸°",children:"ğŸª£"}),t.jsx("button",{className:"btn-clear-palette",onClick:()=>{Me(new Array(40).fill(null)),localStorage.setItem("ai-studio-color-palette",JSON.stringify(new Array(40).fill(null))),qe(null)},title:"íŒ”ë ˆíŠ¸ ì´ˆê¸°í™”",children:"âœ•"})]}),t.jsx("div",{className:"mini-palette-grid-40",children:ta.map((e,a)=>t.jsx("button",{className:`mini-palette-slot ${e?"filled":"empty"} ${me===a?"slot-selected":""} ${e&&D===e.h&&K===e.s&&B===e.l?"color-active":""}`,style:e?{background:ce(e.h,e.s,e.l)}:void 0,onClick:()=>{e?(vt(e.h),wt(e.s),jt(e.l),qe(null)):qe(me===a?null:a)},onContextMenu:s=>{s.preventDefault(),Me(n=>{const l=[...n];return l[a]=null,localStorage.setItem("ai-studio-color-palette",JSON.stringify(l)),l})},title:e?`H:${e.h} S:${e.s} L:${e.l} (ìš°í´ë¦­: ì‚­ì œ)`:"í´ë¦­í•˜ì—¬ ì„ íƒ í›„ ğŸª£ ë²„í‚·ìœ¼ë¡œ ì±„ìš°ê¸°"},a))})]})]})]})]}),t.jsxs("div",{className:"center-panel",children:[t.jsxs("div",{className:`lib-area ${ct?"drag-over":""}`,onDrop:va,onDragOver:wa,onDragLeave:ja,children:[ct&&t.jsx("div",{className:"drop-overlay",children:t.jsx("div",{className:"drop-message",children:"ğŸ“¥ ì´ë¯¸ì§€ë¥¼ ì—¬ê¸°ì— ë†“ìœ¼ì„¸ìš”"})}),t.jsxs("div",{className:"lib-header-inline",children:[t.jsx("span",{className:"title",children:"ğŸ“¸ ë¼ì´ë¸ŒëŸ¬ë¦¬"}),t.jsx("span",{className:"count",children:q.length}),pt&&t.jsxs("span",{className:"progress-text",children:["â³ ",pt]}),t.jsx("div",{className:"spacer"}),t.jsx("button",{className:"btn-icon",onClick:()=>{var e;return(e=document.getElementById("lib-upload"))==null?void 0:e.click()},title:"ì—…ë¡œë“œ",children:"ğŸ“¤"}),t.jsx("input",{type:"file",id:"lib-upload",accept:"image/*",multiple:!0,hidden:!0,onChange:xa}),t.jsx("button",{className:"btn-icon danger",onClick:pa,title:"ì „ì²´ì‚­ì œ",children:"ğŸ—‘ï¸"})]}),t.jsxs("div",{className:"lib-grid large",children:[be.map(e=>t.jsxs("div",{className:`lib-card generating ${e.status}`,children:[t.jsx("div",{className:"generating-content",children:e.status==="failed"?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"failed-icon",children:"âŒ"}),t.jsx("span",{className:"generating-text failed-text",children:"ìƒì„± ì‹¤íŒ¨"}),t.jsx("span",{className:"failed-error",children:e.error||"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜"})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"spinner"}),t.jsx("span",{className:"generating-text",children:e.progress||(e.status==="transparent"?"íˆ¬ëª…í™” ì¤‘...":e.status==="cancelled"?"ì·¨ì†Œë¨":"ìƒì„± ì¤‘...")}),t.jsxs("span",{className:"generating-index",children:["#",e.index+1]}),e.status==="transparent"&&t.jsx("span",{className:"generating-status-badge",children:"ğŸ”® íˆ¬ëª…í™”"})]})}),t.jsx("div",{className:"actions",children:e.status==="failed"?t.jsx("button",{onClick:()=>ae(a=>a.filter(s=>s.id!==e.id)),title:"ë‹«ê¸°",children:"âœ–ï¸"}):t.jsx("button",{onClick:()=>ma(e.id),title:"ì´ ì´ë¯¸ì§€ ì·¨ì†Œ",disabled:e.status==="cancelled",children:"â¹ï¸"})})]},e.id)),q.length===0&&be.length===0?t.jsx("div",{className:"empty-lib",children:"ğŸ¨ ì´ë¯¸ì§€ë¥¼ ìƒì„±í•˜ë©´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤"}):q.map((e,a)=>t.jsxs("div",{className:`lib-card clickable ${v.includes(a)?"selected":""} ${j===a?"previewing":""}`,onClick:s=>fa(a,s),children:[t.jsx("img",{src:e.url,alt:`Generated ${a}`}),v.includes(a)&&v.length>1&&t.jsx("div",{className:"selection-badge",children:v.indexOf(a)+1})]},a))]})]}),t.jsxs(t.Fragment,{children:[t.jsx("div",{className:`preview-resize-handle ${Dt?"resizing":""}`,onMouseDown:ba,title:"ë“œë˜ê·¸í•˜ì—¬ í¬ê¸° ì¡°ì ˆ",children:t.jsx("div",{className:"resize-bar"})}),t.jsx("div",{className:"preview-panel-large",children:t.jsx("div",{className:`preview-viewer ${Ie?"pan-mode":""}`,style:{cursor:Ie?nt?"grabbing":"grab":"default"},onWheel:e=>{if(ge){e.preventDefault();const a=e.deltaY>0?-.1:.1;st(s=>Math.min(Math.max(s+a,.5),3))}},onMouseDown:e=>{Ie&&ge&&(e.preventDefault(),Se(!0),qt({x:e.clientX-Ne.x,y:e.clientY-Ne.y}))},onMouseMove:e=>{nt&&Ie&&_e({x:e.clientX-it.x,y:e.clientY-it.y})},onMouseUp:()=>Se(!1),onMouseLeave:()=>Se(!1),children:ge?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"preview-image-lg-container",children:t.jsx("img",{src:ge.url,alt:"Preview",className:"preview-image-lg",style:{transform:`scale(${Ce}) translate(${Ne.x/Ce}px, ${Ne.y/Ce}px)`},draggable:!1})}),t.jsxs("div",{className:"preview-info-bar",children:[t.jsx("span",{className:"preview-counter-lg",children:v.length>1?`${v.indexOf(j)+1}/${v.length} ì„ íƒë¨`:`${j+1} / ${q.length}`}),t.jsxs("span",{className:"preview-zoom-info",children:[Math.round(Ce*100),"%"]}),t.jsxs("div",{className:"preview-quick-actions",children:[t.jsx("button",{onClick:()=>{st(1),_e({x:0,y:0})},title:"ë·° ì´ˆê¸°í™”",children:"ğŸ”"}),t.jsx("button",{onClick:()=>ge&&ua(ge,j),title:"PNGë¡œ ì €ì¥",children:"ğŸ’¾"}),v.length>1?t.jsxs("button",{onClick:Ye,title:`ì„ íƒí•œ ${v.length}ê°œ ì‚­ì œ`,className:"danger",children:["ğŸ—‘ï¸ ",v.length]}):t.jsx("button",{onClick:()=>ya(j),title:"ì‚­ì œ",className:"danger",children:"ğŸ—‘ï¸"}),t.jsx("button",{onClick:ze,title:"ì„ íƒ í•´ì œ",children:"âœ•"})]})]})]}):t.jsxs("div",{className:"preview-empty",children:[t.jsx("div",{className:"preview-empty-icon",children:"ğŸ–¼ï¸"}),t.jsx("div",{className:"preview-empty-text",children:"ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ì´ë¯¸ì§€ë¥¼ ì„ íƒí•˜ì„¸ìš”"}),t.jsx("div",{className:"preview-empty-hint",children:"íœ : í™•ëŒ€/ì¶•ì†Œ | Space+ë“œë˜ê·¸: íŒ¨ë‹"})]})})})]})]}),t.jsxs("div",{className:"right-panel",children:[t.jsxs("div",{className:"right-panel-tabs",children:[t.jsx("button",{className:`tab-btn ${$e==="generate"?"active":""}`,onClick:()=>lt("generate"),children:"ğŸ¨ ìƒì„±"}),t.jsxs("button",{className:`tab-btn ${$e==="edit"?"active":""}`,onClick:()=>lt("edit"),children:["âœï¸ í¸ì§‘ ",L.length>0&&`(${L.length})`]})]}),$e==="generate"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"preview-edit-section prompt-section",children:[t.jsxs("div",{className:"preview-edit-title",children:[t.jsx("span",{children:"âœ¨ í˜„ì¬ í”„ë¡¬í”„íŠ¸"}),t.jsx("div",{className:"prompt-actions-inline",children:t.jsx("button",{className:"btn-mini",onClick:()=>navigator.clipboard.writeText(E),title:"ë³µì‚¬",children:"ğŸ“‹"})})]}),t.jsx("div",{className:"prompt-preview-box",children:E?E.slice(0,150)+(E.length>150?"...":""):"(ì¢Œì¸¡ì—ì„œ íƒœê·¸ë¥¼ ì„ íƒí•˜ì„¸ìš”)"}),De&&t.jsxs("div",{className:"prompt-neg-preview",children:[t.jsx("span",{className:"neg-label",children:"ì œì™¸:"})," ",De.slice(0,40),"..."]})]}),t.jsxs("div",{className:`preview-edit-section ref-section ref-dropzone ${y.refImgs.length===0?"empty":""}`,onDragOver:e=>{e.preventDefault(),e.currentTarget.classList.add("drag-over")},onDragLeave:e=>{e.preventDefault(),e.currentTarget.classList.remove("drag-over")},onDrop:async e=>{e.preventDefault(),e.currentTarget.classList.remove("drag-over");const a=e.dataTransfer.files;a.length>0&&Xe(a)},children:[t.jsx("div",{className:"preview-edit-title",children:t.jsxs("span",{children:["ğŸ“ ì°¸ì¡° ì´ë¯¸ì§€ ",y.refImgs.length>0&&`(${y.refImgs.length}/14)`]})}),y.refImgs.length>0?t.jsxs("div",{className:"ref-list-with-roles",children:[y.refImgs.map((e,a)=>t.jsxs("div",{className:"ref-item-with-role",children:[t.jsxs("div",{className:"ref-item-thumb",children:[t.jsx("img",{src:e.url,alt:`Ref ${a}`}),t.jsx("button",{className:"ref-del-btn",onClick:()=>oa(a),children:"Ã—"})]}),t.jsx("select",{className:"ref-role-select",value:e.type,onChange:s=>ca(a,s.target.value),children:tt.map(s=>t.jsxs("option",{value:s.id,children:[s.icon," ",s.name]},s.id))})]},a)),t.jsxs("label",{className:"ref-add-btn-large",children:[t.jsx("input",{type:"file",accept:"image/*",multiple:!0,hidden:!0,onChange:e=>{e.target.files&&Xe(e.target.files),e.target.value=""}}),t.jsx("span",{children:"+ ì¶”ê°€"})]})]}):t.jsxs("label",{className:"ref-empty-drop",children:[t.jsx("input",{type:"file",accept:"image/*",multiple:!0,hidden:!0,onChange:e=>{e.target.files&&Xe(e.target.files),e.target.value=""}}),t.jsx("div",{className:"ref-drop-icon",children:"ğŸ“¥"}),t.jsx("div",{className:"ref-drop-text",children:"ì´ë¯¸ì§€ë¥¼ ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­"}),t.jsx("div",{className:"ref-drop-hint",children:"ê° ì´ë¯¸ì§€ë³„ë¡œ ì—­í•  ì§€ì • ê°€ëŠ¥"})]})]}),t.jsxs("div",{className:"preview-edit-section settings-section",children:[t.jsx("div",{className:"preview-edit-title",children:t.jsx("span",{children:"âš™ï¸ ìƒì„± ì„¤ì •"})}),t.jsxs("div",{className:"gen-settings-grid",children:[t.jsxs("div",{className:"gen-setting-row",children:[t.jsx("label",{children:"í•´ìƒë„"}),t.jsx("select",{className:"sel",value:$,onChange:e=>yt(e.target.value),children:Lt.map(e=>t.jsx("option",{value:e,children:e},e))})]}),t.jsxs("div",{className:"gen-setting-row",children:[t.jsx("label",{children:"ì¢…íš¡ë¹„"}),t.jsx("select",{className:"sel",value:k,onChange:e=>O(e.target.value),children:Tt.map(e=>t.jsx("option",{value:e,children:e},e))})]}),t.jsxs("div",{className:"gen-setting-row",children:[t.jsx("label",{children:"ìƒì„± ê°œìˆ˜"}),t.jsxs("div",{className:"gen-count-row",children:[t.jsx("select",{className:"sel",value:G,onChange:e=>W(Number(e.target.value)),children:[1,2,3,4,6,8,10].map(e=>t.jsxs("option",{value:e,children:[e,"ì¥"]},e))}),t.jsx("button",{className:"btn-mini",onClick:()=>pe(!0),title:"ì—¬ëŸ¬ì¥ ìƒì„± ì˜µì…˜",children:"âš™ï¸"})]})]}),t.jsxs("div",{className:"gen-setting-row",children:[t.jsx("label",{children:"íˆ¬ëª…ë°°ê²½"}),t.jsxs("label",{className:"toggle-switch",children:[t.jsx("input",{type:"checkbox",checked:ee,onChange:e=>Wt(e.target.checked)}),t.jsx("span",{className:"toggle-slider"})]})]})]})]}),t.jsx("div",{className:"preview-edit-section action-section",children:Z?t.jsxs("button",{className:"btn-action cancel full-width",onClick:ha,children:["â¹ï¸ ìƒì„± ì·¨ì†Œ (",be.length,")"]}):t.jsx("button",{className:`btn-action generate full-width ${ee?"transparent-mode":""}`,onClick:ga,disabled:!p,children:ee?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"btn-icon-glow",children:"ğŸ”®"}),t.jsx("span",{children:"íˆ¬ëª…ë°°ê²½ ìƒì„±"}),t.jsx("span",{className:"btn-badge",children:"2x API"})]}):t.jsx(t.Fragment,{children:"ğŸ¨ ì´ë¯¸ì§€ ìƒì„±"})})})]}),$e==="edit"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"preview-edit-section compact",children:[t.jsxs("div",{className:"preview-edit-title",children:[t.jsxs("span",{children:["ğŸ–¼ï¸ í¸ì§‘ ëŒ€ìƒ ",L.length>0&&`(${L.length})`]}),L.length>0&&t.jsx("button",{className:"btn-mini",onClick:ze,title:"ì„ íƒ í•´ì œ",children:"âœ•"})]}),L.length>0?t.jsx("div",{className:"edit-target-grid",children:L.map((e,a)=>t.jsx("div",{className:"edit-target-thumb",children:t.jsx("img",{src:e.url,alt:`Target ${a}`})},a))}):t.jsxs("div",{className:"edit-empty-hint",children:["ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ì´ë¯¸ì§€ ì„ íƒ",t.jsx("br",{}),t.jsx("small",{children:"Ctrl+í´ë¦­ìœ¼ë¡œ ë‹¤ì¤‘ ì„ íƒ / ë°©í–¥í‚¤ë¡œ ì´ë™"})]})]}),t.jsxs("div",{className:"preview-edit-section prompt-section",children:[t.jsxs("div",{className:"preview-edit-title",children:[t.jsx("span",{children:"âœï¸ í¸ì§‘ ë‚´ìš©"}),t.jsx("button",{className:"btn-mini",onClick:()=>fe(""),title:"ì§€ìš°ê¸°",children:"ğŸ—‘ï¸"})]}),t.jsx("textarea",{className:"preview-edit-prompt",value:X,onChange:e=>fe(e.target.value),placeholder:`í¸ì§‘í•  ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”...
ì˜ˆ: í‘œì •ì„ ì›ƒëŠ” ì–¼êµ´ë¡œ ë³€ê²½
ì˜ˆ: ë°°ê²½ì„ ë°”ë‹¤ë¡œ ë³€ê²½
ì˜ˆ: ì†Œí’ˆ ì¶”ê°€ (ì°¸ì¡° ì´ë¯¸ì§€ ì‚¬ìš©)`,rows:4})]}),t.jsxs("div",{className:"preview-edit-section prompt-section compact",children:[t.jsxs("div",{className:"preview-edit-title",children:[t.jsx("span",{children:"âœ¨ í”„ë¡¬í”„íŠ¸ íƒœê·¸"}),t.jsx("button",{className:"btn-mini",onClick:()=>fe(e=>e?e+`
`+E:E),title:"ì¢Œì¸¡ í”„ë¡¬í”„íŠ¸ ì¶”ê°€",children:"+ ì ìš©"})]}),t.jsx("div",{className:"prompt-preview-box scrollable small",onClick:()=>fe(E),children:E?E.length>60?E.slice(0,60)+"...":E:"(ì¢Œì¸¡ì—ì„œ íƒœê·¸ ì„ íƒ)"})]}),t.jsxs("div",{className:`preview-edit-section ref-section ref-dropzone ${le.length===0?"empty":""}`,onDragOver:e=>{e.preventDefault(),e.currentTarget.classList.add("drag-over")},onDragLeave:e=>{e.preventDefault(),e.currentTarget.classList.remove("drag-over")},onDrop:async e=>{e.preventDefault(),e.currentTarget.classList.remove("drag-over");const a=e.dataTransfer.files;if(!a.length)return;const s=[];for(const n of Array.from(a)){if(!n.type.startsWith("image/"))continue;const l=URL.createObjectURL(n),d=await se(n);s.push({url:l,b64:d,type:"object",strength:1})}ye(n=>[...n,...s].slice(0,14))},children:[t.jsx("div",{className:"preview-edit-title",children:t.jsxs("span",{children:["ğŸ“ ì°¸ì¡° ì´ë¯¸ì§€ ",le.length>0&&`(${le.length}/14)`]})}),le.length>0?t.jsxs("div",{className:"ref-list-with-roles",children:[le.map((e,a)=>t.jsxs("div",{className:"ref-item-with-role",children:[t.jsxs("div",{className:"ref-item-thumb",children:[t.jsx("img",{src:e.url,alt:`Ref ${a}`}),t.jsx("button",{className:"ref-del-btn",onClick:()=>ye(s=>s.filter((n,l)=>l!==a)),children:"Ã—"})]}),t.jsx("select",{className:"ref-role-select",value:e.type,onChange:s=>ye(n=>n.map((l,d)=>d===a?{...l,type:s.target.value}:l)),children:tt.map(s=>t.jsxs("option",{value:s.id,children:[s.icon," ",s.name]},s.id))})]},a)),t.jsxs("label",{className:"ref-add-btn-large",children:[t.jsx("input",{type:"file",accept:"image/*",multiple:!0,hidden:!0,onChange:async e=>{const a=e.target.files;if(!a)return;const s=[];for(const n of Array.from(a)){const l=URL.createObjectURL(n),d=await se(n);s.push({url:l,b64:d,type:"object",strength:1})}ye(n=>[...n,...s].slice(0,14)),e.target.value=""}}),t.jsx("span",{children:"+ ì¶”ê°€"})]})]}):t.jsxs("label",{className:"ref-empty-drop small",children:[t.jsx("input",{type:"file",accept:"image/*",multiple:!0,hidden:!0,onChange:async e=>{const a=e.target.files;if(!a)return;const s=[];for(const n of Array.from(a)){const l=URL.createObjectURL(n),d=await se(n);s.push({url:l,b64:d,type:"object",strength:1})}ye(n=>[...n,...s].slice(0,14)),e.target.value=""}}),t.jsx("div",{className:"ref-drop-icon",children:"ğŸ“¥"}),t.jsx("div",{className:"ref-drop-text",children:"ë“œë˜ê·¸ ë˜ëŠ” í´ë¦­"}),t.jsx("div",{className:"ref-drop-hint",children:"ì†Œí’ˆ/ìºë¦­í„° ì¶”ê°€"})]})]}),t.jsxs("div",{className:"preview-edit-section settings-section",children:[t.jsxs("div",{className:"preview-edit-title",children:[t.jsx("span",{children:"âš™ï¸ ì¶œë ¥ ì„¤ì • + ë¹ ë¥¸ ë³€í™˜"}),te.size>0&&t.jsx("button",{className:"btn-mini",onClick:()=>ft(new Set),title:"ë³€í™˜ ì´ˆê¸°í™”",children:"âœ•"})]}),t.jsxs("div",{className:"gen-settings-grid compact",children:[t.jsxs("div",{className:"gen-setting-row",children:[t.jsx("label",{children:"í•´ìƒë„"}),t.jsx("select",{className:"sel",value:$,onChange:e=>yt(e.target.value),children:Lt.map(e=>t.jsx("option",{value:e,children:e},e))})]}),t.jsxs("div",{className:"gen-setting-row",children:[t.jsx("label",{children:"ì¢…íš¡ë¹„"}),t.jsx("select",{className:"sel",value:k,onChange:e=>O(e.target.value),children:Tt.map(e=>t.jsx("option",{value:e,children:e},e))})]})]}),t.jsx("div",{className:"quick-transform-chips compact",children:[{id:"enhance",label:"í–¥ìƒ"},{id:"line",label:"ë¼ì¸"},{id:"webtoon",label:"ì›¹íˆ°"},{id:"day",label:"ë‚®"},{id:"night",label:"ë°¤"},{id:"flip",label:"ë°˜ì „"},{id:"smile",label:"ì›ƒìŒ"},{id:"sad",label:"ìŠ¬í””"},{id:"angry",label:"í™”ë‚¨"},{id:"surprised",label:"ë†€ëŒ"},{id:"cool",label:"ì‹œí¬"}].map(e=>t.jsx("button",{className:`transform-chip ${te.has(e.id)?"selected":""}`,onClick:()=>ft(a=>{const s=new Set(a);return s.has(e.id)?s.delete(e.id):s.add(e.id),s}),children:e.label},e.id))}),te.size>0&&t.jsxs("div",{className:"selected-transforms compact",children:["ì ìš©: ",Array.from(te).map(e=>({enhance:"í–¥ìƒ",line:"ë¼ì¸",webtoon:"ì›¹íˆ°",day:"ë‚®",night:"ë°¤",flip:"ë°˜ì „",smile:"ì›ƒìŒ",sad:"ìŠ¬í””",angry:"í™”ë‚¨",surprised:"ë†€ëŒ",cool:"ì‹œí¬"})[e]).join(" + ")]})]}),t.jsxs("div",{className:"preview-edit-section preserve-options",children:[t.jsx("div",{className:"preview-edit-title",children:t.jsx("span",{children:"ğŸ”’ ìœ ì§€ ì˜µì…˜"})}),t.jsxs("div",{className:"preserve-options-grid",children:[t.jsxs("label",{className:`preserve-option ${M.style?"active":""}`,children:[t.jsx("input",{type:"checkbox",checked:M.style,onChange:e=>Oe(a=>({...a,style:e.target.checked}))}),t.jsx("span",{children:"ğŸ¨ ìŠ¤íƒ€ì¼"})]}),t.jsxs("label",{className:`preserve-option ${M.expression?"active":""}`,children:[t.jsx("input",{type:"checkbox",checked:M.expression,onChange:e=>Oe(a=>({...a,expression:e.target.checked}))}),t.jsx("span",{children:"ğŸ˜Š í‘œì •"})]}),t.jsxs("label",{className:`preserve-option ${M.pose?"active":""}`,children:[t.jsx("input",{type:"checkbox",checked:M.pose,onChange:e=>Oe(a=>({...a,pose:e.target.checked}))}),t.jsx("span",{children:"ğŸ•º í¬ì¦ˆ"})]}),t.jsxs("label",{className:`preserve-option ${M.background?"active":""}`,children:[t.jsx("input",{type:"checkbox",checked:M.background,onChange:e=>Oe(a=>({...a,background:e.target.checked}))}),t.jsx("span",{children:"ğŸï¸ ë°°ê²½"})]})]})]}),t.jsx("div",{className:"preview-edit-section action-section",children:t.jsx("button",{className:"btn-action edit full-width",onClick:async()=>{if(L.length===0){alert("í¸ì§‘í•  ì´ë¯¸ì§€ë¥¼ ì„ íƒí•˜ì„¸ìš”");return}if(!p){alert("API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”");return}if(!X.trim()){alert("í¸ì§‘ í”„ë¡¬í”„íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”");return}Q(!0),ie(0);try{const e=[],a=le.map(d=>d.b64),s=et(le),n=[];M.style&&n.push("maintain the original art style"),M.expression&&n.push("keep the facial expression unchanged"),M.pose&&n.push("preserve the body pose"),M.background&&n.push("keep the background unchanged");let l=X;s&&(l+=`

`+s),n.length>0&&(l+=`

Important: ${n.join(", ")}.`);for(let d=0;d<L.length;d++){ie(d+1);const w=L[d],x=await oe(p,w.b64,l,b,"image/png",a.length>0?a:void 0,{imageSize:$,aspectRatio:k});e.push({url:x.url,b64:x.base64,prompt:X})}V(d=>[...e,...d]),C([0]),N(0)}catch(e){alert("í¸ì§‘ ì‹¤íŒ¨: "+(e instanceof Error?e.message:"ì˜¤ë¥˜"))}finally{Q(!1),ie(0)}},disabled:Ee||L.length===0||!p||!X.trim(),children:Ee?`â³ í¸ì§‘ì¤‘... (${mt}/${L.length})`:"âœï¸ AI í¸ì§‘ ì ìš©"})}),te.size>0&&t.jsx("div",{className:"preview-edit-section action-section",children:t.jsx("button",{className:"btn-action transform full-width",onClick:async()=>{if(L.length===0||!p||te.size===0)return;Q(!0);const e={enhance:"Enhance image quality, sharpen details, improve lighting.",line:"Extract clean black line art on white background.",webtoon:"Convert to Korean webtoon style with clean lines and flat colors.",day:"Change to daytime scene with bright sunlight and blue sky.",night:"Change to nighttime scene with moonlight and stars.",flip:"Mirror flip the image horizontally.",smile:"Change character expression to smile, happy face.",sad:"Change character expression to sad, tearful face.",angry:"Change character expression to angry face.",surprised:"Change character expression to surprised, shocked face with wide eyes.",cool:"Change character expression to cool, confident, mysterious look."},a={enhance:"í–¥ìƒ",line:"ë¼ì¸",webtoon:"ì›¹íˆ°",day:"ë‚®",night:"ë°¤",flip:"ë°˜ì „",smile:"ì›ƒìŒ",sad:"ìŠ¬í””",angry:"í™”ë‚¨",surprised:"ë†€ëŒ",cool:"ì‹œí¬"},s=Array.from(te).map(l=>e[l]).join(" "),n=Array.from(te).map(l=>a[l]).join("+");try{const l=[];for(let d=0;d<L.length;d++){const w=L[d];ie(d+1);const x=await oe(p,w.b64,s,b,"image/png",void 0,{imageSize:$,aspectRatio:k});l.push({url:x.url,b64:x.base64,prompt:`[${n}]`})}V(d=>[...l,...d]),C([0]),N(0)}catch(l){alert("ë³€í™˜ ì‹¤íŒ¨: "+(l instanceof Error?l.message:"ì˜¤ë¥˜"))}finally{Q(!1),ie(0)}},disabled:Ee||L.length===0,children:Ee?`â³ ë³€í™˜ì¤‘... (${mt}/${L.length})`:"âš¡ ë¹ ë¥¸ ë³€í™˜ ì‹¤í–‰"})})]})]})]}),zt&&t.jsx("div",{className:"gen-modal show",onClick:()=>pe(!1),children:t.jsxs("div",{className:"gen-modal-content",onClick:e=>e.stopPropagation(),children:[t.jsxs("div",{className:"gen-modal-title",children:["âš™ï¸ ì—¬ëŸ¬ì¥ ìƒì„± ì˜µì…˜",t.jsx("button",{className:"gen-modal-close",onClick:()=>pe(!1),children:"Ã—"})]}),t.jsxs("div",{className:`gen-mode-item ${_==="same"?"selected":""}`,onClick:()=>Le("same"),children:[t.jsx("input",{type:"radio",name:"genModeRadio",checked:_==="same",readOnly:!0}),t.jsxs("div",{className:"gen-mode-info",children:[t.jsx("div",{className:"name",children:"ğŸ“‹ ë™ì¼ ì„¤ì •"}),t.jsx("div",{className:"desc",children:"ê°™ì€ í”„ë¡¬í”„íŠ¸ë¡œ ì—¬ëŸ¬ì¥ ìƒì„± (ì‹œë“œë§Œ ë‹¤ë¦„)"})]})]}),t.jsxs("div",{className:`gen-mode-item ${_==="random"?"selected":""}`,onClick:()=>Le("random"),children:[t.jsx("input",{type:"radio",name:"genModeRadio",checked:_==="random",readOnly:!0}),t.jsxs("div",{className:"gen-mode-info",children:[t.jsx("div",{className:"name",children:"ğŸ² ëœë¤ ë³€í˜•"}),t.jsx("div",{className:"desc",children:"ë§¤ ì¥ë§ˆë‹¤ ì„ íƒí•œ í•­ëª©ì„ ëœë¤í•˜ê²Œ ë³€ê²½"}),_==="random"&&t.jsxs("div",{className:"gen-mode-opts",style:{display:"block"},children:[t.jsxs("label",{children:[t.jsx("input",{type:"checkbox",checked:Te.pose,onChange:e=>Pe(a=>({...a,pose:e.target.checked}))})," í¬ì¦ˆ ë³€í˜•"]}),t.jsxs("label",{children:[t.jsx("input",{type:"checkbox",checked:Te.expr,onChange:e=>Pe(a=>({...a,expr:e.target.checked}))})," í‘œì • ë³€í˜•"]}),t.jsxs("label",{children:[t.jsx("input",{type:"checkbox",checked:Te.angle,onChange:e=>Pe(a=>({...a,angle:e.target.checked}))})," ì•µê¸€ ë³€í˜•"]}),t.jsxs("label",{children:[t.jsx("input",{type:"checkbox",checked:Te.cloth,onChange:e=>Pe(a=>({...a,cloth:e.target.checked}))})," ì˜ìƒ ë³€í˜•"]})]})]})]}),t.jsxs("div",{className:`gen-mode-item ${_==="sequence"?"selected":""}`,onClick:()=>Le("sequence"),children:[t.jsx("input",{type:"radio",name:"genModeRadio",checked:_==="sequence",readOnly:!0}),t.jsxs("div",{className:"gen-mode-info",children:[t.jsx("div",{className:"name",children:"ğŸ”¢ ìˆœì°¨ ë³€í˜•"}),t.jsx("div",{className:"desc",children:"íŠ¹ì • í•­ëª©ì„ ìˆœì„œëŒ€ë¡œ ë³€ê²½í•˜ë©° ìƒì„±"}),_==="sequence"&&t.jsxs("div",{className:"gen-mode-opts",style:{display:"block"},children:[t.jsxs("div",{className:"gen-seq-item",children:[t.jsx("label",{children:"í•­ëª©:"}),t.jsxs("select",{className:"sel",value:Ut,onChange:e=>_t(e.target.value),children:[t.jsx("option",{value:"expression",children:"í‘œì •"}),t.jsx("option",{value:"bodyPose",children:"í¬ì¦ˆ"}),t.jsx("option",{value:"viewAngle",children:"ì•µê¸€"}),t.jsx("option",{value:"artStyle",children:"í™”í’"})]})]}),t.jsx("div",{style:{fontSize:"0.5rem",color:"var(--text3)",marginTop:4},children:"â€» ìƒì„± ê°œìˆ˜ë§Œí¼ ìˆœì„œëŒ€ë¡œ ë³€í˜•ë©ë‹ˆë‹¤"})]})]})]}),t.jsxs("div",{className:`gen-mode-item ${_==="interpolate"?"selected":""}`,onClick:()=>Le("interpolate"),children:[t.jsx("input",{type:"radio",name:"genModeRadio",checked:_==="interpolate",readOnly:!0}),t.jsxs("div",{className:"gen-mode-info",children:[t.jsx("div",{className:"name",children:"ğŸŒˆ ìŠ¬ë¼ì´ë” ê·¸ë¼ë°ì´ì…˜"}),t.jsx("div",{className:"desc",children:"ìŠ¬ë¼ì´ë” ê°’ì„ ì ì§„ì ìœ¼ë¡œ ë³€í™”ì‹œí‚¤ë©° ìƒì„±"}),_==="interpolate"&&t.jsxs("div",{className:"gen-mode-opts",style:{display:"block"},children:[t.jsxs("div",{className:"gen-seq-item",children:[t.jsx("label",{children:"í•­ëª©:"}),t.jsxs("select",{className:"sel",value:Kt,onChange:e=>Bt(e.target.value),children:[t.jsx("option",{value:"age",children:"ë‚˜ì´"}),t.jsx("option",{value:"bodyType",children:"ì²´í˜•"}),t.jsx("option",{value:"eyeSize",children:"ëˆˆí¬ê¸°"}),t.jsx("option",{value:"timeOfDay",children:"ì‹œê°„ëŒ€"}),t.jsx("option",{value:"brightness",children:"ë°ê¸°"})]})]}),t.jsxs("div",{className:"gen-seq-item",children:[t.jsx("label",{children:"ì‹œì‘:"}),t.jsx("input",{type:"number",className:"inp",style:{width:60},value:Ft,onChange:e=>Gt(Number(e.target.value))}),t.jsx("label",{children:"ë:"}),t.jsx("input",{type:"number",className:"inp",style:{width:60},value:Jt,onChange:e=>Ht(Number(e.target.value))})]})]})]})]}),t.jsxs("div",{className:"gen-modal-actions",children:[t.jsx("button",{className:"btn btn-secondary",onClick:()=>pe(!1),children:"ì·¨ì†Œ"}),t.jsx("button",{className:"btn btn-primary",onClick:()=>pe(!1),children:"âœ… í™•ì¸"})]})]})}),ea&&t.jsx("div",{className:"preset-modal show",onClick:()=>we(!1),children:t.jsxs("div",{className:"preset-modal-content",onClick:e=>e.stopPropagation(),children:[t.jsxs("div",{className:"preset-modal-title",children:["ğŸ’¾ í”„ë¦¬ì…‹ ì €ì¥",t.jsx("button",{className:"preset-modal-close",onClick:()=>we(!1),children:"Ã—"})]}),t.jsxs("div",{className:"preset-modal-body",children:[t.jsx("p",{children:"í˜„ì¬ ì„¤ì •ì„ í”„ë¦¬ì…‹ìœ¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤."}),t.jsx("input",{type:"text",className:"inp",value:ve,onChange:e=>xt(e.target.value),placeholder:"í”„ë¦¬ì…‹ ì´ë¦„ ì…ë ¥...",style:{width:"100%",marginTop:10},autoFocus:!0,onKeyDown:e=>e.key==="Enter"&&St()})]}),t.jsxs("div",{className:"preset-modal-actions",children:[t.jsx("button",{className:"btn btn-secondary",onClick:()=>we(!1),children:"ì·¨ì†Œ"}),t.jsx("button",{className:"btn btn-primary",onClick:St,children:"ğŸ’¾ ì €ì¥"})]})]})})]});function Na(){const e=je[y.cat];return e?t.jsx("div",{className:"settings-grid",children:Object.entries(e.items).map(([a,s])=>{var w,x,A,z;const n=y.values[a],l="isNeg"in s&&s.isNeg,d=l?y.negTags.length>0:n!=null&&n!==""&&!(Array.isArray(n)&&n.length===0);return t.jsxs("div",{className:`card ${d?"active":""}`,children:[t.jsxs("div",{className:"card-header",children:[t.jsx("span",{className:"card-icon",children:"icon"in s?s.icon:""}),t.jsx("span",{children:s.name}),t.jsx("span",{className:"card-val",children:l?y.negTags.length>0?`${y.negTags.length}ê°œ`:"":ka(s,n)}),d&&t.jsx("button",{className:"card-clear",onClick:()=>ra(a,l),children:"Ã—"})]}),"tags"in s&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"hasColor"in s&&s.hasColor?"tags-with-bucket":"",children:[t.jsx("div",{className:"tags",children:s.tags.map(([g,F])=>{const T=l?y.negTags.includes(g):Array.isArray(n)?n.includes(g):n===g;return t.jsx("div",{className:`tag ${T?"selected":""}`,onClick:()=>na(a,g,l||!1),children:F},g)})}),"hasColor"in s&&s.hasColor&&d&&t.jsx("div",{className:"color-inline-box",onClick:()=>Ct(a+"Color"),title:"í´ë¦­í•˜ì—¬ ìƒ‰ìƒ ì ìš©",style:{background:ce(((w=y.values[a+"Color"])==null?void 0:w.h)??0,((x=y.values[a+"Color"])==null?void 0:x.s)??70,((A=y.values[a+"Color"])==null?void 0:A.l)??50)}})]}),!l&&d&&t.jsxs("div",{className:"slider-row weight-slider",children:[t.jsx("span",{className:"slider-label",children:"ê°•ë„"}),t.jsxs("div",{className:"slider-track",children:[t.jsx("input",{type:"range",min:.5,max:1.5,step:.1,value:y.values[a+"Str"]??1,onChange:g=>kt(a+"Str",parseFloat(g.target.value))}),t.jsx("div",{className:"thumb",style:{left:`${((y.values[a+"Str"]??1)-.5)/1*100}%`}})]}),t.jsxs("span",{className:"slider-value",children:[y.values[a+"Str"]??1,"x"]})]})]}),"type"in s&&s.type==="slider"&&t.jsxs("div",{className:"slider-row",children:[t.jsx("span",{className:"slider-label",children:((z=s.labels)==null?void 0:z[0])||s.min}),t.jsxs("div",{className:"slider-track",children:[t.jsx("input",{type:"range",min:s.min,max:s.max,step:s.step||1,value:n??s.default,onChange:g=>kt(a,parseFloat(g.target.value))}),t.jsx("div",{className:"thumb",style:{left:`${((n??s.default)-s.min)/(s.max-s.min)*100}%`}})]}),t.jsxs("span",{className:"slider-value",children:[n??s.default,s.unit||""]})]}),"type"in s&&(s.type==="hue"||s.type==="skin")&&t.jsxs("div",{className:"color-inline-row",children:[t.jsx("span",{className:"color-inline-label",children:s.name}),t.jsx("div",{className:"color-inline-box",onClick:()=>Ct(a),title:"í´ë¦­í•˜ì—¬ ìƒ‰ìƒ ì ìš©",style:{background:ce((n==null?void 0:n.h)??30,(n==null?void 0:n.s)??70,(n==null?void 0:n.l)??50)}})]})]},a)})}):null}}async function se(r){return new Promise(c=>{const o=new FileReader;o.onload=()=>c(o.result.split(",")[1]),o.readAsDataURL(r)})}function et(r){if(r.length===0)return"";const c=[];return r.forEach((o,h)=>{const u=tt.find(m=>m.id===o.type);u&&c.push(`From reference image #${h+1}, ${u.prompt}.`)}),c.length===0?`Using the ${r.length} provided reference image(s) as visual guide.`:c.join(" ")}function Wa(){const{addAsset:r}=Ot(),c=(o,h)=>{r({url:o,prompt:h,category:"ai-generated",source:"whiteboard"})};return t.jsx("div",{style:{height:"100vh",display:"flex",flexDirection:"column"},children:t.jsx(qa,{onImageGenerated:c})})}export{Wa as default};
