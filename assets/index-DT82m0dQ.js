import{a as dt,j as t}from"./index-CVU1Nt4s.js";import{f as ta,a as r}from"./vendor-react-BLQjSpGA.js";function aa(l,h){const d=["red","orange","yellow","lime","green","teal","cyan","blue","indigo","purple","magenta","pink"],c=Math.floor((l+15)%360/30),p=h<30?"dark ":h>70?"light ":"";return h<15?"black":h>90?"white":p+d[c]}function _e(l,h=70,d=50){const c=se(l,h,d),p=aa(l,d);return`${c} ${p}`}function sa(l,h){const d=["ë¹¨ê°•","ì£¼í™©","ë…¸ë‘","ì—°ë‘","ë…¹ìƒ‰","ì²­ë¡","í•˜ëŠ˜","íŒŒë‘","ë‚¨ìƒ‰","ë³´ë¼","ìì£¼","ë¶„í™"],c=Math.floor((l+15)%360/30),p=h<30?"ì–´ë‘ìš´ ":h>70?"ë°ì€ ":"";return h<15?"ê²€ì •":h>90?"í°ìƒ‰":p+d[c]}function se(l,h,d){d/=100;const c=h*Math.min(d,1-d)/100,p=u=>{const x=(u+l/30)%12,g=d-c*Math.max(Math.min(x-3,9-x,1),-1);return Math.round(255*g).toString(16).padStart(2,"0")};return`#${p(0)}${p(8)}${p(4)}`}const na={basic:{name:"ê¸°ë³¸",icon:"ğŸ‘¤",items:{species:{name:"ì¢…ì¡±",icon:"ğŸ§¬",tags:[["human","ì¸ê°„"],["elf","ì—˜í”„"],["vampire","ë±€íŒŒì´ì–´"],["angel","ì²œì‚¬"],["demon","ì•…ë§ˆ"],["orc","ì˜¤í¬"],["dwarf","ë“œì›Œí”„"],["fairy","ìš”ì •"],["werewolf","ëŠ‘ëŒ€ì¸ê°„"],["cat person","ê³ ì–‘ì´ìˆ˜ì¸"],["fox person","ì—¬ìš°ìˆ˜ì¸"],["dragon humanoid","ìš©ì¸"]]},gender:{name:"ì„±ë³„",icon:"âš§",tags:[["male","ë‚¨ì„±"],["female","ì—¬ì„±"],["androgynous","ì¤‘ì„±ì "]]},age:{name:"ë‚˜ì´",icon:"ğŸ‚",type:"slider",min:5,max:80,default:25,unit:"ì„¸",prompt:l=>l<10?"child":l<18?"teenager":l<30?"young adult in 20s":l<40?"adult in 30s":l<50?"middle-aged in 40s":l<60?"mature adult in 50s":"elderly"},height:{name:"í‚¤",icon:"ğŸ“",type:"slider",min:140,max:200,default:170,unit:"cm",prompt:l=>`${l}cm tall`},headRatio:{name:"ë“±ì‹ ",icon:"ğŸ“",type:"slider",min:4,max:10,default:7,step:.5,unit:"ë“±ì‹ ",prompt:l=>`${l} head tall proportion`},bodyType:{name:"ì²´í˜•",icon:"ğŸ’ª",type:"slider",min:0,max:100,default:50,labels:["ë§ˆë¦„","ë³´í†µ","ê·¼ìœ¡"],prompt:l=>l<30?"slim skinny build":l<70?"average build":"muscular athletic build"},skinTone:{name:"í”¼ë¶€ìƒ‰",icon:"ğŸ¨",type:"skin",prompt:(l,h=40,d=50)=>{const c=se(l,h,d);let p="";return d>80?p="very pale white":d>60?p="fair light":d>40?p="medium tan":d>20?p="brown":p="dark",`${c} ${p} skin tone`}}}},hair:{name:"ë¨¸ë¦¬",icon:"ğŸ’‡",items:{hairStyle:{name:"ìŠ¤íƒ€ì¼",icon:"ğŸ’‡",tags:[["bald","ëŒ€ë¨¸ë¦¬"],["buzz cut","ì§§ì€ì‚­ë°œ"],["short hair","ì§§ì€ë¨¸ë¦¬"],["medium hair","ì¤‘ê°„ë¨¸ë¦¬"],["long hair","ê¸´ë¨¸ë¦¬"],["very long hair","ë§¤ìš°ê¸´ë¨¸ë¦¬"],["straight hair","ìƒë¨¸ë¦¬"],["wavy hair","ì›¨ì´ë¸Œ"],["curly hair","ê³±ìŠ¬"],["ponytail","í¬ë‹ˆí…Œì¼"],["twin tails","íŠ¸ìœˆí…Œì¼"],["braid","ë•‹ì€ë¨¸ë¦¬"],["bun","ë˜¥ë¨¸ë¦¬"],["mohawk","ëª¨íˆì¹¸"],["dreadlocks","ë“œë ˆë“œë½"]]},hairBangs:{name:"ì•ë¨¸ë¦¬",icon:"âœ‚ï¸",tags:[["no bangs","ì•ë¨¸ë¦¬ì—†ìŒ"],["blunt bangs","ì¼ìì•ë¨¸ë¦¬"],["side swept bangs","ì˜†ìœ¼ë¡œë„˜ê¸´"],["parted bangs","ê°€ë¥´ë§ˆ"],["curtain bangs","ì»¤íŠ¼ë±…"],["wispy bangs","ì‹œìŠ¤ë£¨ë±…"]]},hairColor:{name:"ë¨¸ë¦¬ìƒ‰",icon:"ğŸ¨",type:"hue",prompt:(l,h=70,d=50)=>_e(l,h,d)+" colored hair"}}},face:{name:"ì–¼êµ´",icon:"ğŸ‘¤",items:{faceShape:{name:"ì–¼êµ´í˜•",icon:"ğŸ—¿",tags:[["oval face","ê³„ë€í˜•"],["round face","ë‘¥ê·¼í˜•"],["square face","ê°ì§„í˜•"],["heart face","í•˜íŠ¸í˜•"],["long face","ê¸´í˜•"]]},eyeSize:{name:"ëˆˆí¬ê¸°",icon:"ğŸ‘ï¸",type:"slider",min:0,max:100,default:50,labels:["ì‘ìŒ","ë³´í†µ","í¼"],prompt:l=>l<30?"small narrow eyes":l<70?"normal eyes":"large anime eyes"},eyeShape:{name:"ëˆˆí˜•íƒœ",icon:"ğŸ‘€",tags:[["round eyes","ë™ê·¸ë€ëˆˆ"],["almond eyes","ì•„ëª¬ë“œëˆˆ"],["monolid eyes","ë¬´ìŒ"],["double eyelid","ìŒêº¼í’€"],["downturned eyes","ì²˜ì§„ëˆˆ"],["upturned eyes","ì˜¬ë¼ê°„ëˆˆ"]]},eyeColor:{name:"ëˆˆ/ë Œì¦ˆìƒ‰",icon:"ğŸ”µ",type:"hue",prompt:(l,h=70,d=50)=>_e(l,h,d)+" colored eyes"},eyebrows:{name:"ëˆˆì¹",icon:"ğŸ¤¨",tags:[["thin eyebrows","ì–‡ì€ëˆˆì¹"],["thick eyebrows","ì§„í•œëˆˆì¹"],["arched eyebrows","ì•„ì¹˜í˜•"],["straight eyebrows","ì¼ìëˆˆì¹"],["bushy eyebrows","ë¥ìˆ˜ë£©í•œëˆˆì¹"]]},nose:{name:"ì½”",icon:"ğŸ‘ƒ",tags:[["small nose","ì‘ì€ì½”"],["high nose","ë†’ì€ì½”"],["flat nose","ë‚®ì€ì½”"],["pointed nose","ë¾°ì¡±í•œì½”"],["wide nose","ë„“ì€ì½”"]]},lips:{name:"ì…ìˆ ",icon:"ğŸ‘„",tags:[["thin lips","ì–‡ì€ì…ìˆ "],["full lips","ë„í†°í•œì…ìˆ "],["small lips","ì‘ì€ì…ìˆ "],["wide lips","ë„“ì€ì…ìˆ "]],hasColor:!0},expression:{name:"í‘œì •",icon:"ğŸ˜Š",tags:[["neutral","ë¬´í‘œì •"],["smiling","ë¯¸ì†Œ"],["laughing","ì›ƒìŒ"],["sad","ìŠ¬í””"],["angry","í™”ë‚¨"],["surprised","ë†€ëŒ"],["shy","ìˆ˜ì¤ìŒ"],["serious","ì§„ì§€í•¨"],["seductive","ë§¤í˜¹ì "],["crying","ëˆˆë¬¼"]]},wrinkles:{name:"ì£¼ë¦„",icon:"ã€°ï¸",type:"slider",min:0,max:100,default:0,labels:["ì—†ìŒ","ì•½ê°„","ë§ìŒ"],prompt:l=>l<20?"":l<50?"subtle wrinkles":"prominent wrinkles, aged face"},beard:{name:"ìˆ˜ì—¼",icon:"ğŸ§”",tags:[["clean shaven","ë©´ë„í•¨"],["stubble","ê±°ì¹œìˆ˜ì—¼"],["short beard","ì§§ì€ìˆ˜ì—¼"],["full beard","í’ì„±í•œìˆ˜ì—¼"],["goatee","ì—¼ì†Œìˆ˜ì—¼"],["mustache","ì½§ìˆ˜ì—¼"]],hasColor:!0}}},faceAcc:{name:"ì–¼êµ´ì•…ì„¸",icon:"ğŸ‘“",items:{glasses:{name:"ì•ˆê²½",icon:"ğŸ‘“",tags:[["no glasses","ì•ˆê²½ì—†ìŒ"],["glasses","ì•ˆê²½"],["round glasses","ë™ê·¸ë€ì•ˆê²½"],["square glasses","ì‚¬ê°ì•ˆê²½"],["sunglasses","ì„ ê¸€ë¼ìŠ¤"],["monocle","ì™¸ì•Œì•ˆê²½"]],hasColor:!0},headwear:{name:"ëª¨ì/ë¨¸ë¦¬ì¥ì‹",icon:"ğŸ©",tags:[["no hat","ì—†ìŒ"],["cap","ìº¡ëª¨ì"],["beanie","ë¹„ë‹ˆ"],["fedora","í˜ë„ë¼"],["crown","ì™•ê´€"],["tiara","í‹°ì•„ë¼"],["hairpin","í—¤ì–´í•€"],["ribbon","ë¦¬ë³¸"],["headband","ë¨¸ë¦¬ë "],["flower crown","ê½ƒì™•ê´€"]],hasColor:!0},mask:{name:"ë§ˆìŠ¤í¬",icon:"ğŸ­",tags:[["no mask","ì—†ìŒ"],["half mask","ë°˜ê°€ë©´"],["full mask","ì „ì²´ê°€ë©´"],["surgical mask","ë§ˆìŠ¤í¬"],["gas mask","ë°©ë…ë©´"]]}}},upperBody:{name:"ìƒì²´",icon:"ğŸ‘•",items:{topLayer1:{name:"ìƒì˜1(ì•ˆìª½)",icon:"ğŸ‘•",tags:[["t-shirt","í‹°ì…”ì¸ "],["tank top","ë¯¼ì†Œë§¤"],["shirt","ì…”ì¸ "],["blouse","ë¸”ë¼ìš°ìŠ¤"],["crop top","í¬ë¡­íƒ‘"],["turtleneck","í„°í‹€ë„¥"],["vest","ì¡°ë¼"]],hasColor:!0},topLayer2:{name:"ìƒì˜2(ì¤‘ê°„)",icon:"ğŸ§¥",tags:[["none","ì—†ìŒ"],["hoodie","í›„ë“œí‹°"],["sweater","ìŠ¤ì›¨í„°"],["cardigan","ê°€ë””ê±´"],["jacket","ìì¼“"],["blazer","ë¸”ë ˆì´ì €"]],hasColor:!0},topLayer3:{name:"ìƒì˜3(ë°”ê¹¥)",icon:"ğŸ§¥",tags:[["none","ì—†ìŒ"],["coat","ì½”íŠ¸"],["trench coat","íŠ¸ë Œì¹˜ì½”íŠ¸"],["leather jacket","ê°€ì£½ìì¼“"],["parka","íŒŒì¹´"],["cape","ë§í† "],["cloak","í´ë¡œí¬"]],hasColor:!0},neckwear:{name:"ë„¥ì›¨ì–´",icon:"ğŸ‘”",tags:[["none","ì—†ìŒ"],["tie","ë„¥íƒ€ì´"],["bow tie","ë‚˜ë¹„ë„¥íƒ€ì´"],["scarf","ìŠ¤ì¹´í”„"],["choker","ì´ˆì»¤"],["necklace","ëª©ê±¸ì´"],["pendant","íœë˜íŠ¸"]],hasColor:!0},gloves:{name:"ì¥ê°‘",icon:"ğŸ§¤",tags:[["none","ì—†ìŒ"],["fingerless gloves","í•‘ê±°ë¦¬ìŠ¤"],["leather gloves","ê°€ì£½ì¥ê°‘"],["long gloves","ë¡±ì¥ê°‘"],["mittens","ë²™ì–´ë¦¬ì¥ê°‘"]],hasColor:!0}}},lowerBody:{name:"í•˜ì²´",icon:"ğŸ‘–",items:{bottom:{name:"í•˜ì˜",icon:"ğŸ‘–",tags:[["jeans","ì²­ë°”ì§€"],["slacks","ìŠ¬ë™ìŠ¤"],["shorts","ë°˜ë°”ì§€"],["skirt","ìŠ¤ì»¤íŠ¸"],["mini skirt","ë¯¸ë‹ˆìŠ¤ì»¤íŠ¸"],["long skirt","ë¡±ìŠ¤ì»¤íŠ¸"],["pleated skirt","í”Œë¦¬ì¸ "],["leggings","ë ˆê¹…ìŠ¤"],["sweatpants","ì¸„ë¦¬ë‹"]],hasColor:!0},socks:{name:"ì–‘ë§/ìŠ¤íƒ€í‚¹",icon:"ğŸ§¦",tags:[["none","ì—†ìŒ"],["ankle socks","ë°œëª©ì–‘ë§"],["crew socks","ì¤‘ê°„ì–‘ë§"],["knee socks","ë¬´ë¦ì–‘ë§"],["thigh highs","í—ˆë²…ì§€ì–‘ë§"],["stockings","ìŠ¤íƒ€í‚¹"],["fishnet","ë§ì‚¬"]],hasColor:!0},shoes:{name:"ì‹ ë°œ",icon:"ğŸ‘Ÿ",tags:[["sneakers","ìš´ë™í™”"],["boots","ë¶€ì¸ "],["high heels","í•˜ì´í"],["loafers","ë¡œí¼"],["sandals","ìƒŒë“¤"],["barefoot","ë§¨ë°œ"]],hasColor:!0}}},hands:{name:"ì†/ë¬´ê¸°",icon:"âœ‹",items:{leftHand:{name:"ì™¼ì†",icon:"ğŸ¤š",tags:[["empty hand","ë¹ˆì†"],["open palm","í¸ì†"],["fist","ì£¼ë¨¹"],["pointing","ê°€ë¦¬í‚¤ê¸°"],["peace sign","ë¸Œì´"],["thumbs up","ì—„ì§€ì²™"]]},rightHand:{name:"ì˜¤ë¥¸ì†",icon:"ğŸ¤š",tags:[["empty hand","ë¹ˆì†"],["open palm","í¸ì†"],["fist","ì£¼ë¨¹"],["pointing","ê°€ë¦¬í‚¤ê¸°"],["peace sign","ë¸Œì´"],["thumbs up","ì—„ì§€ì²™"]]},weapon:{name:"ë¬´ê¸°",icon:"âš”ï¸",tags:[["none","ì—†ìŒ"],["sword","ê²€"],["katana","ì¹´íƒ€ë‚˜"],["dagger","ë‹¨ê²€"],["bow","í™œ"],["staff","ì§€íŒ¡ì´"],["wand","ë§ˆë²•ë´‰"],["gun","ì´"],["shield","ë°©íŒ¨"],["spear","ì°½"],["axe","ë„ë¼"]]},bracelet:{name:"íŒ”ì°Œ",icon:"ğŸ“¿",tags:[["none","ì—†ìŒ"],["bracelet","íŒ”ì°Œ"],["bangle","ë±…ê¸€"],["watch","ì‹œê³„"],["wristband","ì†ëª©ë°´ë“œ"]],hasColor:!0},ring:{name:"ë°˜ì§€",icon:"ğŸ’",tags:[["none","ì—†ìŒ"],["simple ring","ì‹¬í”Œë°˜ì§€"],["gem ring","ë³´ì„ë°˜ì§€"],["multiple rings","ì—¬ëŸ¬ë°˜ì§€"]],hasColor:!0}}},pose:{name:"í¬ì¦ˆ",icon:"ğŸƒ",items:{bodyPose:{name:"ì „ì‹ í¬ì¦ˆ",icon:"ğŸ§",tags:[["standing","ì„œìˆëŠ”"],["sitting","ì•‰ì€"],["kneeling","ë¬´ë¦ê¿‡ì€"],["lying down","ëˆ„ìš´"],["walking","ê±·ëŠ”"],["running","ë›°ëŠ”"],["jumping","ì í”„"],["fighting pose","ì „íˆ¬ìì„¸"],["dancing","ì¶¤ì¶”ëŠ”"],["floating","ë– ìˆëŠ”"]]},armPose:{name:"íŒ”í¬ì¦ˆ",icon:"ğŸ’ª",tags:[["arms at sides","íŒ”ë‚´ë¦¼"],["crossed arms","íŒ”ì§±"],["hands behind","ë’·ì§"],["hands on hips","í—ˆë¦¬ì†"],["raised arm","íŒ”ë“¤ê¸°"],["waving","ì†í”ë“¤ê¸°"]]},viewAngle:{name:"ì‹œì ",icon:"ğŸ“·",tags:[["front view","ì •ë©´"],["side view","ì¸¡ë©´"],["back view","ë’·ëª¨ìŠµ"],["three quarter view","3/4ì•µê¸€"],["from above","ìœ„ì—ì„œ"],["from below","ì•„ë˜ì—ì„œ"],["close up","í´ë¡œì¦ˆì—…"],["full body","ì „ì‹ "]]}}},style:{name:"ìŠ¤íƒ€ì¼",icon:"ğŸ¨",items:{artStyle:{name:"ê·¸ë¦¼ì²´",icon:"ğŸ¨",tags:[["korean webtoon","í•œêµ­ì›¹íˆ°"],["japanese anime","ì¼ë³¸ì• ë‹ˆ"],["ghibli style","ì§€ë¸Œë¦¬"],["disney pixar","ë””ì¦ˆë‹ˆí”½ì‚¬"],["semi realistic","ì„¸ë¯¸ë¦¬ì–¼"],["realistic","ì‹¤ì‚¬"],["chibi","ì¹˜ë¹„"],["manhwa","ë§Œí™”"],["watercolor","ìˆ˜ì±„í™”"],["oil painting","ìœ í™”"]]},quality:{name:"í’ˆì§ˆ",icon:"âœ¨",tags:[["masterpiece","ê±¸ì‘"],["best quality","ìµœê³ í’ˆì§ˆ"],["highly detailed","ìƒì„¸í•œ"],["sharp focus","ì„ ëª…í•œ"]]},mood:{name:"ë¶„ìœ„ê¸°",icon:"ğŸŒŸ",tags:[["bright","ë°ì€"],["dark","ì–´ë‘ìš´"],["warm","ë”°ëœ»í•œ"],["cold","ì°¨ê°€ìš´"],["dramatic","ê·¹ì ì¸"],["soft","ë¶€ë“œëŸ¬ìš´"],["vibrant","ìƒë™ê°ìˆëŠ”"]]}}},negative:{name:"ë„¤ê±°í‹°ë¸Œ",icon:"â›”",items:{negative:{name:"ì œì™¸í• ê²ƒ",icon:"â›”",tags:[["low quality","ì €í’ˆì§ˆ"],["blurry","íë¦°"],["ugly","ëª»ìƒê¸´"],["deformed","ë³€í˜•"],["bad anatomy","í•´ë¶€í•™ì˜¤ë¥˜"],["extra limbs","íŒ”ë‹¤ë¦¬ì¶”ê°€"],["missing limbs","íŒ”ë‹¤ë¦¬ì—†ìŒ"],["extra fingers","ì†ê°€ë½ì¶”ê°€"],["bad hands","ì´ìƒí•œì†"],["multiple characters","ì—¬ëŸ¬ìºë¦­í„°"],["watermark","ì›Œí„°ë§ˆí¬"],["text","í…ìŠ¤íŠ¸"]],isNeg:!0}}}},la={style:{name:"ìŠ¤íƒ€ì¼",icon:"ğŸ¨",items:{artStyle:{name:"ê·¸ë¦¼ì²´",icon:"ğŸ¨",tags:[["webtoon style","ì›¹íˆ°"],["anime style","ì• ë‹ˆë©”"],["ghibli style","ì§€ë¸Œë¦¬"],["photorealistic","ì‹¤ì‚¬"],["concept art","ì»¨ì…‰ì•„íŠ¸"],["watercolor","ìˆ˜ì±„í™”"],["oil painting","ìœ í™”"],["pixel art","í”½ì…€"]]},quality:{name:"í’ˆì§ˆ",icon:"âœ¨",tags:[["masterpiece","ê±¸ì‘"],["best quality","ìµœê³ í’ˆì§ˆ"],["highly detailed","ìƒì„¸í•œ"],["8k","8K"],["sharp focus","ì„ ëª…"]]}}},sky:{name:"í•˜ëŠ˜",icon:"ğŸŒ…",items:{timeOfDay:{name:"ì‹œê°„ëŒ€",icon:"ğŸ•",type:"slider",min:0,max:100,default:50,labels:["ìƒˆë²½","ì•„ì¹¨","ë‚®","ì„ì–‘","ë°¤"],prompt:l=>l<15?"dawn, early morning":l<35?"morning, sunrise":l<65?"daytime, bright sky":l<85?"sunset, golden hour":"night, dark sky, stars"},weather:{name:"ë‚ ì”¨",icon:"ğŸŒ¤ï¸",tags:[["clear sky","ë§‘ìŒ"],["cloudy","íë¦¼"],["overcast","ì”ëœ©íë¦¼"],["rainy","ë¹„"],["snowy","ëˆˆ"],["foggy","ì•ˆê°œ"],["stormy","í­í’"]]},clouds:{name:"êµ¬ë¦„",icon:"â˜ï¸",type:"slider",min:0,max:100,default:30,labels:["ì—†ìŒ","ì•½ê°„","ë§ìŒ"],prompt:l=>l<20?"clear sky":"cloudy sky"}}},far:{name:"ì›ê²½",icon:"ğŸ”ï¸",items:{farBg:{name:"ë¨¼ë°°ê²½",icon:"ğŸ”ï¸",tags:[["none","ì—†ìŒ"],["mountains","ì‚°"],["city skyline","ë„ì‹œìŠ¤ì¹´ì´ë¼ì¸"],["forest horizon","ìˆ²ì§€í‰ì„ "],["ocean horizon","ë°”ë‹¤ìˆ˜í‰ì„ "],["desert dunes","ì‚¬ë§‰ì–¸ë•"]]},farDetail:{name:"ì›ê²½ë””í…Œì¼",icon:"ğŸ”­",type:"slider",min:0,max:100,default:30,labels:["íë¦¿","ë³´í†µ","ì„ ëª…"],prompt:l=>l<30?"blurry distant background":"sharp detailed background"}}},mid:{name:"ì¤‘ê²½",icon:"ğŸ ",items:{location:{name:"ì¥ì†Œ",icon:"ğŸ“",tags:[["city street","ë„ì‹œê±°ë¦¬"],["alley","ê³¨ëª©"],["park","ê³µì›"],["forest","ìˆ²ì†"],["beach","í•´ë³€"],["mountain path","ì‚°ê¸¸"],["river","ê°•ê°€"],["bridge","ë‹¤ë¦¬"]]},building:{name:"ê±´ë¬¼",icon:"ğŸ¢",tags:[["none","ì—†ìŒ"],["houses","ì£¼íƒ"],["apartments","ì•„íŒŒíŠ¸"],["skyscrapers","ë§ˆì²œë£¨"],["traditional houses","ì „í†µê°€ì˜¥"],["shops","ìƒì ê°€"],["school","í•™êµ"],["castle","ì„±"]]},interior:{name:"ì‹¤ë‚´",icon:"ğŸ ",tags:[["none","ì—†ìŒ"],["living room","ê±°ì‹¤"],["bedroom","ì¹¨ì‹¤"],["kitchen","ì£¼ë°©"],["cafe","ì¹´í˜"],["restaurant","ë ˆìŠ¤í† ë‘"],["classroom","êµì‹¤"],["library","ë„ì„œê´€"],["office","ì‚¬ë¬´ì‹¤"]]}}},near:{name:"ê·¼ê²½",icon:"ğŸ›¤ï¸",items:{ground:{name:"ë°”ë‹¥",icon:"ğŸ›¤ï¸",tags:[["asphalt","ì•„ìŠ¤íŒ”íŠ¸"],["concrete","ì½˜í¬ë¦¬íŠ¸"],["grass","ì”ë””"],["dirt","í™"],["sand","ëª¨ë˜"],["wood floor","ë‚˜ë¬´ë°”ë‹¥"],["tile","íƒ€ì¼"],["carpet","ì¹´í«"]]},foreground:{name:"ì „ê²½ë¬¼ì²´",icon:"ğŸŒ³",tags:[["none","ì—†ìŒ"],["trees","ë‚˜ë¬´"],["flowers","ê½ƒ"],["rocks","ë°”ìœ„"],["fence","ìš¸íƒ€ë¦¬"],["bench","ë²¤ì¹˜"],["street lamp","ê°€ë¡œë“±"],["car","ìë™ì°¨"]]},depthBlur:{name:"ì‹¬ë„(ë¸”ëŸ¬)",icon:"ğŸ“¸",type:"slider",min:0,max:100,default:0,labels:["ì—†ìŒ","ì•½ê°„","ê°•í•¨"],prompt:l=>l<20?"":"depth of field, bokeh"}}},light:{name:"ì¡°ëª…",icon:"ğŸ’¡",items:{lightType:{name:"ì¡°ëª…ì¢…ë¥˜",icon:"ğŸ’¡",tags:[["natural light","ìì—°ê´‘"],["cinematic lighting","ì‹œë„¤ë§ˆí‹±"],["soft lighting","ë¶€ë“œëŸ¬ìš´"],["dramatic lighting","ê·¹ì ì¸"],["backlight","ì—­ê´‘"],["rim light","ë¦¼ë¼ì´íŠ¸"],["neon lights","ë„¤ì˜¨"],["candlelight","ì´›ë¶ˆ"]]},lightTemp:{name:"ìƒ‰ì˜¨ë„",icon:"ğŸŒ¡ï¸",type:"slider",min:0,max:100,default:50,labels:["ì°¨ê°€ì›€","ì¤‘ë¦½","ë”°ëœ»í•¨"],prompt:l=>l<30?"cool blue tones":l>70?"warm orange tones":""},brightness:{name:"ë°ê¸°",icon:"â˜€ï¸",type:"slider",min:0,max:100,default:50,labels:["ì–´ë‘ì›€","ë³´í†µ","ë°ìŒ"],prompt:l=>l<30?"dark, low key":l>70?"bright, high key":""},saturation:{name:"ì±„ë„",icon:"ğŸ¨",type:"slider",min:0,max:100,default:50,labels:["íƒí•¨","ë³´í†µ","ì„ ëª…"],prompt:l=>l<30?"desaturated, muted colors":l>70?"vibrant, saturated colors":""}}},negative:{name:"ë„¤ê±°í‹°ë¸Œ",icon:"â›”",items:{negative:{name:"ì œì™¸í• ê²ƒ",icon:"â›”",tags:[["low quality","ì €í’ˆì§ˆ"],["blurry","íë¦°"],["ugly","ëª»ìƒê¸´"],["watermark","ì›Œí„°ë§ˆí¬"],["text","í…ìŠ¤íŠ¸"],["cropped","ì˜ë¦°"]],isNeg:!0}}}},ra=[{name:"ğŸ‘¨ ì›¹íˆ°ë‚¨ì£¼",icon:"ğŸ‘¨",data:{artStyle:["korean webtoon"],quality:["masterpiece","best quality"],gender:["male"],age:25,height:178,headRatio:8,hairStyle:["short hair"],hairColor:{h:30,l:20},eyeShape:["double eyelid"],expression:["neutral"],topLayer1:["t-shirt"],topLayer1Color:{h:220,l:50},bottom:["jeans"],bottomColor:{h:220,l:40},shoes:["sneakers"],bodyPose:["standing"],viewAngle:["front view"]}},{name:"ğŸ‘© ì›¹íˆ°ì—¬ì£¼",icon:"ğŸ‘©",data:{artStyle:["korean webtoon"],quality:["masterpiece","best quality"],gender:["female"],age:22,height:165,headRatio:7.5,hairStyle:["long hair"],hairBangs:["side swept bangs"],hairColor:{h:30,l:15},eyeSize:60,eyeShape:["double eyelid"],expression:["smiling"],topLayer1:["blouse"],topLayer1Color:{h:0,l:90},bottom:["skirt"],bottomColor:{h:220,l:35},shoes:["loafers"],bodyPose:["standing"],viewAngle:["front view"]}},{name:"ğŸ‘¦ ê³ ë“±í•™ìƒë‚¨",icon:"ğŸ‘¦",data:{artStyle:["korean webtoon"],quality:["masterpiece","best quality"],gender:["male"],age:17,height:175,headRatio:7.5,hairStyle:["short hair"],hairColor:{h:30,l:15},topLayer1:["shirt"],topLayer1Color:{h:0,l:95},topLayer2:["blazer"],topLayer2Color:{h:220,l:25},neckwear:["tie"],neckwearColor:{h:0,l:40},bottom:["slacks"],bottomColor:{h:220,l:25},shoes:["loafers"],bodyPose:["standing"],viewAngle:["front view"]}},{name:"ğŸ‘§ ê³ ë“±í•™ìƒì—¬",icon:"ğŸ‘§",data:{artStyle:["korean webtoon"],quality:["masterpiece","best quality"],gender:["female"],age:17,height:162,headRatio:7,hairStyle:["long hair"],hairBangs:["blunt bangs"],hairColor:{h:30,l:15},eyeSize:60,topLayer1:["blouse"],topLayer1Color:{h:0,l:95},topLayer2:["cardigan"],topLayer2Color:{h:220,l:30},bottom:["pleated skirt"],bottomColor:{h:220,l:25},socks:["knee socks"],socksColor:{h:220,l:20},shoes:["loafers"],bodyPose:["standing"],viewAngle:["front view"]}},{name:"ğŸ‘” ì§ì¥ì¸ë‚¨",icon:"ğŸ‘”",data:{artStyle:["korean webtoon"],quality:["masterpiece","best quality"],gender:["male"],age:30,height:180,headRatio:8,hairStyle:["short hair"],hairColor:{h:30,l:15},expression:["serious"],topLayer1:["shirt"],topLayer1Color:{h:0,l:95},topLayer2:["blazer"],topLayer2Color:{h:220,l:20},neckwear:["tie"],neckwearColor:{h:220,l:30},bottom:["slacks"],bottomColor:{h:220,l:20},shoes:["loafers"],bodyPose:["standing"],viewAngle:["front view"]}},{name:"ğŸ‘©â€ğŸ’¼ ì§ì¥ì¸ì—¬",icon:"ğŸ‘©â€ğŸ’¼",data:{artStyle:["korean webtoon"],quality:["masterpiece","best quality"],gender:["female"],age:28,height:167,headRatio:7.5,hairStyle:["medium hair"],hairColor:{h:30,l:20},expression:["neutral"],topLayer1:["blouse"],topLayer1Color:{h:0,l:95},topLayer2:["blazer"],topLayer2Color:{h:220,l:25},bottom:["skirt"],bottomColor:{h:220,l:25},shoes:["high heels"],bodyPose:["standing"],viewAngle:["front view"]}},{name:"ğŸ¤´ ë¡œë§¨ìŠ¤ë‚¨ì£¼",icon:"ğŸ¤´",data:{artStyle:["korean webtoon"],quality:["masterpiece","best quality"],gender:["male"],age:27,height:185,headRatio:8.5,bodyType:60,hairStyle:["short hair"],hairColor:{h:30,l:10},eyeColor:{h:220,l:50},expression:["serious"],faceShape:["oval face"],topLayer1:["shirt"],topLayer1Color:{h:0,l:95},topLayer3:["coat"],topLayer3Color:{h:0,l:15},bottom:["slacks"],bottomColor:{h:0,l:15},bodyPose:["standing"],viewAngle:["three quarter view"],mood:["dramatic"]}},{name:"ğŸ‘¸ ë¡œë§¨ìŠ¤ì—¬ì£¼",icon:"ğŸ‘¸",data:{artStyle:["korean webtoon"],quality:["masterpiece","best quality"],gender:["female"],age:23,height:165,headRatio:7.5,hairStyle:["very long hair","wavy hair"],hairColor:{h:30,l:70},eyeSize:65,eyeColor:{h:200,l:60},expression:["shy"],faceShape:["oval face"],topLayer1:["blouse"],topLayer1Color:{h:330,l:85},bottom:["long skirt"],bottomColor:{h:0,l:95},bodyPose:["standing"],viewAngle:["three quarter view"],mood:["soft"]}},{name:"âš”ï¸ íŒíƒ€ì§€ê¸°ì‚¬",icon:"âš”ï¸",data:{artStyle:["semi realistic"],quality:["masterpiece","highly detailed"],gender:["male"],species:["human"],age:32,height:185,bodyType:80,hairStyle:["short hair"],hairColor:{h:30,l:25},expression:["serious"],topLayer1:["vest"],topLayer3:["cape"],topLayer3Color:{h:0,l:40},weapon:["sword"],bodyPose:["fighting pose"],mood:["dramatic"]}},{name:"ğŸ§™â€â™€ï¸ ë§ˆë²•ì‚¬",icon:"ğŸ§™â€â™€ï¸",data:{artStyle:["japanese anime"],quality:["masterpiece","best quality"],gender:["female"],age:20,headRatio:7,hairStyle:["very long hair"],hairColor:{h:270,l:70},eyeSize:70,eyeColor:{h:270,l:60},topLayer1:["shirt"],topLayer3:["cloak"],topLayer3Color:{h:270,l:30},weapon:["staff"],bodyPose:["standing"]}},{name:"ğŸ¦¸ íˆì–´ë¡œ",icon:"ğŸ¦¸",data:{artStyle:["japanese anime"],quality:["masterpiece","best quality"],gender:["male"],age:25,height:180,bodyType:75,hairStyle:["short hair"],hairColor:{h:0,l:15},expression:["serious"],topLayer1:["tank top"],topLayer1Color:{h:0,l:50},bottom:["jeans"],bottomColor:{h:220,l:30},bodyPose:["fighting pose"],mood:["dramatic"]}},{name:"ğŸ§› ë±€íŒŒì´ì–´",icon:"ğŸ§›",data:{species:["vampire"],artStyle:["semi realistic"],quality:["masterpiece","highly detailed"],gender:["male"],age:200,skinTone:{h:0,s:40,l:90},hairStyle:["medium hair"],hairColor:{h:0,l:10},eyeColor:{h:0,l:50},expression:["seductive"],topLayer1:["shirt"],topLayer1Color:{h:0,l:95},topLayer3:["coat"],topLayer3Color:{h:0,l:10},mood:["dark"]}},{name:"ğŸ§ ì—˜í”„",icon:"ğŸ§",data:{species:["elf"],artStyle:["semi realistic"],quality:["masterpiece","highly detailed"],gender:["female"],age:150,height:170,skinTone:{h:30,l:85},hairStyle:["very long hair","straight hair"],hairColor:{h:60,l:85},eyeColor:{h:120,l:60},expression:["neutral"],topLayer1:["shirt"],topLayer1Color:{h:120,l:80},topLayer3:["cloak"],topLayer3Color:{h:120,l:35},mood:["soft"]}}],ia=[{name:"ğŸ“š êµì‹¤",icon:"ğŸ“š",data:{artStyle:["webtoon style"],quality:["masterpiece","best quality"],interior:["classroom"],lightType:["natural light"],timeOfDay:50,brightness:60}},{name:"â˜• ì¹´í˜",icon:"â˜•",data:{artStyle:["webtoon style"],quality:["masterpiece","best quality"],interior:["cafe"],lightType:["soft lighting"],lightTemp:70,saturation:55}},{name:"ğŸ  ê±°ì‹¤",icon:"ğŸ ",data:{artStyle:["webtoon style"],quality:["masterpiece","best quality"],interior:["living room"],lightType:["soft lighting"],lightTemp:60,brightness:55}},{name:"ğŸ›ï¸ ì¹¨ì‹¤",icon:"ğŸ›ï¸",data:{artStyle:["webtoon style"],quality:["masterpiece","best quality"],interior:["bedroom"],lightType:["soft lighting"],lightTemp:65,brightness:45}},{name:"ğŸ’¼ ì‚¬ë¬´ì‹¤",icon:"ğŸ’¼",data:{artStyle:["webtoon style"],quality:["masterpiece","best quality"],interior:["office"],lightType:["natural light"],timeOfDay:50,brightness:60}},{name:"ğŸ“– ë„ì„œê´€",icon:"ğŸ“–",data:{artStyle:["webtoon style"],quality:["masterpiece","best quality"],interior:["library"],lightType:["soft lighting"],lightTemp:55,brightness:50}},{name:"ğŸ™ï¸ ë„ì‹œê±°ë¦¬",icon:"ğŸ™ï¸",data:{artStyle:["webtoon style"],quality:["masterpiece","best quality"],location:["city street"],building:["shops"],lightType:["natural light"],timeOfDay:50}},{name:"ğŸ« í•™êµ",icon:"ğŸ«",data:{artStyle:["webtoon style"],quality:["masterpiece","best quality"],building:["school"],location:["city street"],ground:["concrete"],lightType:["natural light"],timeOfDay:45}},{name:"ğŸŒ³ ê³µì›",icon:"ğŸŒ³",data:{artStyle:["webtoon style"],quality:["masterpiece","best quality"],location:["park"],ground:["grass"],foreground:["trees"],lightType:["natural light"],timeOfDay:50}},{name:"ğŸŒ¸ ë²šê½ƒê¸¸",icon:"ğŸŒ¸",data:{artStyle:["anime style"],quality:["masterpiece","best quality"],location:["park"],foreground:["flowers","trees"],timeOfDay:40,lightTemp:60,mood:["soft"]}},{name:"ğŸŒƒ ì•¼ê²½",icon:"ğŸŒƒ",data:{artStyle:["anime style"],quality:["masterpiece","best quality"],location:["city street"],building:["skyscrapers"],timeOfDay:95,lightType:["neon lights"],saturation:70}},{name:"ğŸŒ… ì„ì–‘",icon:"ğŸŒ…",data:{artStyle:["webtoon style"],quality:["masterpiece","best quality"],location:["river"],timeOfDay:75,lightType:["backlight"],lightTemp:80,saturation:65}},{name:"ğŸ° íŒíƒ€ì§€ì„±",icon:"ğŸ°",data:{artStyle:["concept art"],quality:["masterpiece","highly detailed"],building:["castle"],farBg:["mountains"],timeOfDay:70,lightType:["dramatic lighting"]}},{name:"ğŸŒ² ìˆ²ì†",icon:"ğŸŒ²",data:{artStyle:["anime style"],quality:["masterpiece","best quality"],location:["forest"],foreground:["trees"],depthBlur:30,lightType:["natural light"],brightness:40}},{name:"ğŸ–ï¸ í•´ë³€",icon:"ğŸ–ï¸",data:{artStyle:["anime style"],quality:["masterpiece","best quality"],location:["beach"],ground:["sand"],farBg:["ocean horizon"],timeOfDay:50,lightType:["natural light"],saturation:65}},{name:"ğŸŒ™ ë°¤í•˜ëŠ˜",icon:"ğŸŒ™",data:{artStyle:["anime style"],quality:["masterpiece","best quality"],timeOfDay:100,weather:["clear sky"],farBg:["none"],lightType:["soft lighting"],brightness:25,saturation:45}}],pe=[{id:"gemini-2.5-flash-image",name:"ë‚˜ë…¸ë°”ë‚˜ë‚˜ (2.5 Flash)",desc:"ë¹ ë¥¸ ìƒì„±, 1K í•´ìƒë„",maxSize:"1K",price:"~$0.039/ì¥"},{id:"gemini-3-pro-image-preview",name:"ë‚˜ë…¸ë°”ë‚˜ë‚˜ Pro (3 Pro)",desc:"ìµœê³  í’ˆì§ˆ, 2K/4K ì§€ì›, ì°¸ì¡°ì´ë¯¸ì§€ 14ì¥",maxSize:"4K",price:"ìœ ë£Œ (í”„ë¦¬ë¯¸ì—„)"}],Fe=["gemini-3-pro-image-preview"],oa=["1K","2K","4K"],ca=["1:1","2:3","3:2","3:4","4:3","4:5","5:4","9:16","16:9","21:9"],ht=l=>{var d,c,p,u,x;const h=((p=(c=(d=l.candidates)==null?void 0:d[0])==null?void 0:c.content)==null?void 0:p.parts)||[];for(const g of h){const T=((u=g.inlineData)==null?void 0:u.data)||((x=g.inline_data)==null?void 0:x.data);if(T)return T}return null};async function it(l,h,d=pe[0].id,c){const p=`https://generativelanguage.googleapis.com/v1beta/models/${d}:generateContent?key=${l}`,u={responseModalities:["TEXT","IMAGE"]},x=Fe.includes(d);(c!=null&&c.aspectRatio||c!=null&&c.imageSize&&x)&&(u.imageConfig={},c.aspectRatio&&(u.imageConfig.aspectRatio=c.aspectRatio),c.imageSize&&x&&(u.imageConfig.imageSize=c.imageSize));const g={contents:[{parts:[{text:h}]}],generationConfig:u};console.log("[generateImage] ìš”ì²­:",JSON.stringify(g,null,2));const f=await(await fetch(p,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)})).json();if(console.log("[generateImage] ì‘ë‹µ:",f.error?f.error:"ì„±ê³µ"),f.error)throw new Error(f.error.message||"API ì˜¤ë¥˜");const N=ht(f);if(!N)throw new Error("ì´ë¯¸ì§€ ìƒì„± ì‹¤íŒ¨");return{base64:N,url:`data:image/png;base64,${N}`}}async function V(l,h,d,c=pe[0].id,p="image/png",u,x){const g=`https://generativelanguage.googleapis.com/v1beta/models/${c}:generateContent?key=${l}`,T=[{text:d},{inline_data:{mime_type:p,data:h}}];if(u){const ne=(Array.isArray(u)?u:[u]).slice(0,14);for(const oe of ne)oe&&T.push({inline_data:{mime_type:p,data:oe}})}const f={responseModalities:["TEXT","IMAGE"]},N=Fe.includes(c);(x!=null&&x.aspectRatio||x!=null&&x.imageSize&&N)&&(f.imageConfig={},x.aspectRatio&&(f.imageConfig.aspectRatio=x.aspectRatio),x.imageSize&&N&&(f.imageConfig.imageSize=x.imageSize));const q={contents:[{parts:T}],generationConfig:f};console.log("[editImage] ìš”ì²­:",{model:c,mimeType:p,promptLength:d.length,imageDataLength:h.length,hasReference:!!u,referenceLength:(u==null?void 0:u.length)||0});const S=await(await fetch(g,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(q)})).json();if(console.log("[editImage] ì‘ë‹µ:",S.error?S.error:"ì„±ê³µ"),S.error)throw new Error(S.error.message||"API ì˜¤ë¥˜");const X=ht(S);if(!X)throw new Error("ì´ë¯¸ì§€ í¸ì§‘ ì‹¤íŒ¨");return{base64:X,url:`data:image/png;base64,${X}`}}function da(l,h,d){const c=document.createElement("canvas");c.width=l.width,c.height=l.height,c.getContext("2d").putImageData(l,0,0);const u=document.createElement("canvas");u.width=h,u.height=d;const x=u.getContext("2d");return x.drawImage(c,0,0,h,d),x.getImageData(0,0,h,d)}function ha(l,h){let d=h;(l.width!==h.width||l.height!==h.height)&&(console.warn(`[extractAlpha] ì´ë¯¸ì§€ í¬ê¸° ë¶ˆì¼ì¹˜! í°ë°°ê²½: ${l.width}x${l.height}, ê²€ì •ë°°ê²½: ${h.width}x${h.height}`),console.log("[extractAlpha] ê²€ì •ë°°ê²½ ì´ë¯¸ì§€ë¥¼ í°ë°°ê²½ í¬ê¸°ë¡œ ë¦¬ì‚¬ì´ì¦ˆí•©ë‹ˆë‹¤."),d=da(h,l.width,l.height));const c=l.width,p=l.height,u=l.data,x=d.data,g=new Uint8ClampedArray(u.length),T=Math.sqrt(765*255);for(let f=0;f<c*p;f++){const N=f*4,q=u[N],ye=u[N+1],S=u[N+2],X=x[N],ee=x[N+1],ne=x[N+2];let D=1-Math.sqrt(Math.pow(q-X,2)+Math.pow(ye-ee,2)+Math.pow(S-ne,2))/T;D=Math.max(0,Math.min(1,D));let y=0,$=0,C=0;D>.01&&(y=X/D,$=ee/D,C=ne/D),g[N]=Math.round(Math.min(255,y)),g[N+1]=Math.round(Math.min(255,$)),g[N+2]=Math.round(Math.min(255,C)),g[N+3]=Math.round(D*255)}return new ImageData(g,c,p)}function ot(l){return new Promise((h,d)=>{const c=new Image;c.onload=()=>{const p=document.createElement("canvas");p.width=c.width,p.height=c.height;const u=p.getContext("2d");u.drawImage(c,0,0),h(u.getImageData(0,0,p.width,p.height))},c.onerror=()=>d(new Error("ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨")),c.src=l})}function ma(l){const h=document.createElement("canvas");return h.width=l.width,h.height=l.height,h.getContext("2d").putImageData(l,0,0),h.toDataURL("image/png")}async function Ne(l,h,d=pe[0].id,c){c==null||c("ê²€ì •ë°°ê²½ìœ¼ë¡œ ë³€í™˜ ì¤‘...");const p=await V(l,h,"Change the white background to solid pure black #000000. Keep everything else exactly the same. Do not modify the character at all, only change the background color.",d);c==null||c("íˆ¬ëª… ë°°ê²½ ìƒì„± ì¤‘...");const u=`data:image/png;base64,${h}`,[x,g]=await Promise.all([ot(u),ot(p.url)]),T=ha(x,g);return ma(T)}function ga({onImageGenerated:l}){const h=ta(),{assets:d,addAsset:c,removeAsset:p}=dt(),[u,x]=r.useState("char"),[g,T]=r.useState(""),[f,N]=r.useState(pe[0].id),[q,ye]=r.useState("1K"),[S,X]=r.useState("1:1"),[ee,ne]=r.useState(1),[oe,D]=r.useState(!1),[y,$]=r.useState([]),[C,A]=r.useState(-1),[fe,mt]=r.useState(450),[gt,Ge]=r.useState(!1),[He,Se]=r.useState(!1),[ut,ce]=r.useState(!1),[R,be]=r.useState("same"),[xe,ve]=r.useState({pose:!0,expr:!0,angle:!0,cloth:!1}),[pt,yt]=r.useState("expression"),[ua,pa]=r.useState([]),[ft,bt]=r.useState("age"),[xt,vt]=r.useState(0),[jt,wt]=r.useState(100),[Ie,kt]=r.useState([]),[$e,Ae]=r.useState([]),[Ve,ya]=r.useState("style"),[je,fa]=r.useState("korean webtoon"),[qe,ba]=r.useState(1),[Le,I]=r.useState(0),[xa,Je]=r.useState(!1),[Te,we]=r.useState([]),[Re,va]=r.useState("all"),[ja,We]=r.useState(!1),[_,Pe]=r.useState(null),[Z,P]=r.useState(""),[te,E]=r.useState(!1),[J,Ee]=r.useState([]),[Ye,F]=r.useState(null),[ae,Ct]=r.useState(!1),[de,Q]=r.useState([]),[Oe,Me]=r.useState(null),Nt=r.useCallback(e=>{ye(e),(e==="2K"||e==="4K")&&(Fe.includes(f)||N("gemini-3-pro-image-preview"))},[f]),[St,It]=r.useState({cat:"basic",values:{},negTags:["low quality","blurry","bad anatomy","extra limbs","bad hands","multiple characters"],refImgs:[]}),[$t,At]=r.useState({cat:"style",values:{},negTags:["low quality","blurry","watermark","text"],refImgs:[]}),[K,M]=r.useState([]),[le,Xe]=r.useState(()=>{const e=localStorage.getItem("ai-studio-custom-presets");return e?JSON.parse(e):[]}),[he,Ze]=r.useState(""),[qt,me]=r.useState(!1),[B,Qe]=r.useState(0),[G,et]=r.useState(70),[H,tt]=r.useState(50),[at,Lt]=r.useState(()=>{const e=localStorage.getItem("ai-studio-color-palette");return e?JSON.parse(e):[]}),b=u==="char"?St:$t,k=u==="char"?It:At,ge=u==="char"?na:la,Tt=u==="char"?ra:ia,Rt=r.useCallback(e=>{k(a=>({...a,cat:e}))},[k]),Pt=r.useCallback((e,a,s)=>{k(n=>{if(s){const i=n.negTags.includes(a)?n.negTags.filter(m=>m!==a):[...n.negTags,a];return{...n,negTags:i}}else{const i=n.values[e];let m;return Array.isArray(i)?m=i.includes(a)?i.filter(j=>j!==a):[...i,a]:m=[a],{...n,values:{...n.values,[e]:m.length>0?m:void 0}}}})},[k]),st=r.useCallback((e,a)=>{k(s=>({...s,values:{...s.values,[e]:a}}))},[k]);r.useCallback((e,a,s)=>{k(n=>{const i=n.values[e]||{h:30,l:50};return{...n,values:{...n.values,[e]:{...i,[a]:s}}}})},[k]);const nt=r.useCallback(e=>{k(a=>({...a,values:{...a.values,[e]:{h:B,s:G,l:H}}})),Lt(a=>{if(a.some(i=>i.h===B&&i.s===G&&i.l===H))return a;const n=[{h:B,s:G,l:H},...a].slice(0,16);return localStorage.setItem("ai-studio-color-palette",JSON.stringify(n)),n})},[B,G,H,k]),Et=r.useCallback((e,a)=>{k(s=>{if(a)return{...s,negTags:[]};const n={...s.values};return delete n[e],delete n[e+"Color"],delete n[e+"Str"],{...s,values:n}})},[k]),lt=r.useCallback(e=>{k(a=>({...a,values:{...e.data}}))},[k]),Ot=r.useCallback(()=>{k(e=>({...e,values:{}}))},[k]),rt=r.useCallback(()=>{if(!he.trim()){alert("í”„ë¦¬ì…‹ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”");return}const e={name:he.trim(),icon:u==="char"?"ğŸ‘¤":"ğŸ™ï¸",data:{...b.values}},a=[...le,e];Xe(a),localStorage.setItem("ai-studio-custom-presets",JSON.stringify(a)),Ze(""),me(!1),alert(`"${he}" í”„ë¦¬ì…‹ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤`)},[he,u,b.values,le]),Mt=r.useCallback(e=>{if(!confirm("ì´ í”„ë¦¬ì…‹ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?"))return;const a=le.filter((s,n)=>n!==e);Xe(a),localStorage.setItem("ai-studio-custom-presets",JSON.stringify(a))},[le]);r.useCallback(async e=>{const a=[];for(const s of Array.from(e)){if(b.refImgs.length+a.length>=14)break;const n=URL.createObjectURL(s),i=await ie(s);a.push({url:n,b64:i,type:"style",strength:.8})}k(s=>({...s,refImgs:[...s.refImgs,...a]}))},[b.refImgs.length,k]),r.useCallback(e=>{k(a=>({...a,refImgs:a.refImgs.filter((s,n)=>n!==e)}))},[k]),r.useCallback((e,a)=>{k(s=>({...s,refImgs:s.refImgs.map((n,i)=>i===e?{...n,type:a}:n)}))},[k]),r.useCallback((e,a)=>{k(s=>({...s,refImgs:s.refImgs.map((n,i)=>i===e?{...n,strength:a}:n)}))},[k]);const re=r.useMemo(()=>{const e=[];Object.values(ge).forEach(s=>{Object.entries(s.items).forEach(([n,i])=>{if("isNeg"in i&&i.isNeg)return;const m=b.values[n];if(m==null||m===""||Array.isArray(m)&&m.length===0)return;let j="";if("type"in i&&i.type){const v=i;if(v.type==="hue"||v.type==="skin"){const O=m;j=v.prompt(O.h,O.s??70,O.l)}else j=v.prompt(m)}else if("tags"in i){const v=i,z=(Array.isArray(m)?m:[m]).filter(o=>o&&o!=="none"&&!o.startsWith("no ")&&!o.startsWith("empty"));if(z.length===0)return;if(v.hasColor&&b.values[n+"Color"]){const o=b.values[n+"Color"];j=z.map(U=>_e(o.h,o.s??70,o.l)+" colored "+U).join(", ")}else j=z.join(", ")}if(j){const v=b.values[n+"Str"]??1;e.push(v!==1?`(${j}:${v})`:j)}})});let a=e.join(", ");return u==="char"&&(a=`A single character, full body, pure white background, ${a}. Only ONE character.`),a},[ge,b.values,u]),ze=r.useMemo(()=>b.negTags.join(", "),[b.negTags]);r.useMemo(()=>Re==="all"?d:d.filter(e=>e.category===Re),[d,Re]);const zt=r.useCallback(async(e,a)=>{let s;if(b.refImgs.length>0){const n=b.refImgs.map(i=>i.b64);s=await V(g,n[0],e,f,"image/png",n.slice(1),{imageSize:q,aspectRatio:S})}else s=await it(g,e,f,{imageSize:q,aspectRatio:S});if(ae){F(`ì´ë¯¸ì§€ ${a+1} íˆ¬ëª…í™” ì²˜ë¦¬ ì¤‘...`);const n=await Ne(g,s.base64,f,m=>F(`ì´ë¯¸ì§€ ${a+1}: ${m}`)),i=n.split(",")[1];return{url:n,b64:i,prompt:`[íˆ¬ëª…ë°°ê²½] ${e}`}}return{url:s.url,b64:s.base64,prompt:e}},[g,b.refImgs,f,q,S,ae]),Dt=r.useCallback(()=>{Oe&&Oe.abort(),Q([]),D(!1),F(null),Me(null)},[Oe]),Kt=r.useCallback(e=>{Q(a=>a.map(s=>s.id===e?{...s,status:"cancelled"}:s))},[]),Bt=r.useCallback(async()=>{if(!g){alert("API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”");return}if(ae&&!window.confirm(`âš ï¸ íˆ¬ëª…ë°°ê²½ ìƒì„± ì•ˆë‚´

â€¢ í°ë°°ê²½ ì´ë¯¸ì§€ ìƒì„± í›„ ê²€ì •ë°°ê²½ìœ¼ë¡œ ë³€í™˜í•˜ì—¬ ì•ŒíŒŒ ì±„ë„ì„ ì¶”ì¶œí•©ë‹ˆë‹¤.
â€¢ ì¼ë°˜ ìƒì„±ë³´ë‹¤ 2ë°°ì˜ API í˜¸ì¶œì´ í•„ìš”í•©ë‹ˆë‹¤.
â€¢ ì²˜ë¦¬ ì‹œê°„ì´ ë” ì˜¤ë˜ ê±¸ë¦½ë‹ˆë‹¤.

ê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`))return;D(!0);const e=new AbortController;Me(e);const a=Array.from({length:ee},(s,n)=>({id:`gen-${Date.now()}-${n}`,index:n,status:"generating"}));Q(a);try{let s=re;if(b.refImgs.length>0){const o=ct(b.refImgs);s+=`

`+o}b.negTags.length>0&&(s+=`

Avoid: ${ze}`);const n=(o,U,L)=>{Q(W=>W.map(Y=>Y.id===o?{...Y,progress:U,...L?{status:L}:{}}:Y))},i=async o=>{const U=de.find(L=>L.id===o.id);if((U==null?void 0:U.status)==="cancelled")return{slotId:o.id,result:null,failed:!1};try{n(o.id,"API í˜¸ì¶œ ì¤‘...");let L;if(b.refImgs.length>0){n(o.id,"ì°¸ì¡° ì´ë¯¸ì§€ ì²˜ë¦¬ ì¤‘...");const W=b.refImgs.map(Y=>Y.b64);L=await V(g,W[0],s,f,"image/png",W.slice(1),{imageSize:q,aspectRatio:S})}else n(o.id,"ì´ë¯¸ì§€ ìƒì„± ì¤‘..."),L=await it(g,s,f,{imageSize:q,aspectRatio:S});if(n(o.id,"ì´ë¯¸ì§€ ìˆ˜ì‹  ì™„ë£Œ"),ae){n(o.id,"íˆ¬ëª…í™” ì¤€ë¹„...","transparent");const W=await Ne(g,L.base64,f,ue=>n(o.id,ue,"transparent")),Y=W.split(",")[1];return{slotId:o.id,result:{url:W,b64:Y,prompt:`[íˆ¬ëª…ë°°ê²½] ${s}`},failed:!1}}return{slotId:o.id,result:{url:L.url,b64:L.base64,prompt:s},failed:!1}}catch(L){const W=L instanceof Error?L.message:"ìƒì„± ì‹¤íŒ¨";return Q(Y=>Y.map(ue=>ue.id===o.id?{...ue,status:"failed",error:W,progress:"ì‹¤íŒ¨"}:ue)),{slotId:o.id,result:null,failed:!0}}},m=a.map(o=>i(o)),j=await Promise.all(m),v=j.filter(o=>o.result!==null&&!o.failed).map(o=>o.result).reverse(),O=j.filter(o=>o.result!==null&&!o.failed).map(o=>o.slotId);Q(o=>o.filter(U=>!O.includes(U.id))),v.length>0&&(M(o=>[...v,...o]),v.forEach(o=>{l==null||l(o.url,o.prompt||""),c({url:o.url,prompt:o.prompt,category:u==="char"?"character":"background",source:"whiteboard"})}));const z=j.filter(o=>o.failed).length;z>0&&console.log(`${z}ê°œ ì´ë¯¸ì§€ ìƒì„± ì‹¤íŒ¨`)}catch(s){s instanceof Error&&s.name==="AbortError"?console.log("ìƒì„±ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤"):(console.error("ìƒì„± ì˜¤ë¥˜:",s),alert(s instanceof Error?s.message:"ìƒì„± ì‹¤íŒ¨"))}finally{D(!1),F(null),Q(s=>s.filter(n=>n.status==="failed")),Me(null)}},[g,ee,re,b.refImgs,b.negTags,ze,zt,ae,l,de]),Ut=r.useCallback((e,a)=>{const s=document.createElement("a");s.href=e.url,s.download=`image_${Date.now()}_${a}.png`,s.click()},[]),_t=r.useCallback(()=>{confirm("ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ëª¨ë“  ì´ë¯¸ì§€ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&M([])},[]),Ft=r.useCallback((e,a)=>{if(a.ctrlKey||a.metaKey)$(s=>{if(s.includes(e)){const n=s.filter(i=>i!==e);return C===e&&A(n.length>0?n[0]:-1),n}else return[...s,e].sort((n,i)=>n-i)});else if(a.shiftKey&&y.length>0){const s=y[y.length-1],n=Math.min(s,e),i=Math.max(s,e),m=Array.from({length:i-n+1},(j,v)=>n+v);$(j=>[...new Set([...j,...m])].sort((v,O)=>v-O)),A(e)}else $([e]),A(e)},[y,C]),ke=r.useCallback(()=>{$([]),A(-1)},[]),De=r.useCallback(()=>{$(K.map((e,a)=>a)),A(0)},[K]),Ke=r.useCallback(()=>{if(y.length===0)return;const e=y.indexOf(C);e>0&&A(y[e-1])},[y,C]),Be=r.useCallback(()=>{if(y.length===0)return;const e=y.indexOf(C);e<y.length-1&&A(y[e+1])},[y,C]),Ce=C>=0?K[C]:null,w=y.map(e=>K[e]).filter(Boolean),Ue=r.useCallback(e=>{y.length!==0&&(e.key==="ArrowLeft"?Ke():e.key==="ArrowRight"?Be():e.key==="Escape"?ke():e.key==="a"&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),De()))},[y,Ke,Be,ke,De]);r.useEffect(()=>(window.addEventListener("keydown",Ue),()=>window.removeEventListener("keydown",Ue)),[Ue]);const Gt=r.useCallback(e=>{confirm("ì´ ì´ë¯¸ì§€ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&(M(a=>a.filter((s,n)=>n!==e)),$(a=>a.filter(s=>s!==e).map(s=>s>e?s-1:s)),C===e?A(-1):C>e&&A(a=>a-1))},[C]),Ht=r.useCallback(()=>{y.length!==0&&confirm(`ì„ íƒí•œ ${y.length}ê°œ ì´ë¯¸ì§€ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)&&(M(e=>e.filter((a,s)=>!y.includes(s))),$([]),A(-1))},[y]),Vt=r.useCallback(e=>{e.preventDefault(),Ge(!0);const a=e.clientY,s=fe,n=m=>{const j=a-m.clientY,v=Math.min(Math.max(s+j,200),800);mt(v)},i=()=>{Ge(!1),window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",i)};window.addEventListener("mousemove",n),window.addEventListener("mouseup",i)},[fe]),Jt=r.useCallback(async e=>{const a=e.target.files;if(!a)return;const s=[];for(const n of Array.from(a)){const i=URL.createObjectURL(n),m=await ie(n);s.push({url:i,b64:m,prompt:`[ì—…ë¡œë“œ] ${n.name}`})}M(n=>[...s,...n]),e.target.value=""},[]),Wt=r.useCallback(async e=>{e.preventDefault(),Se(!1);const a=e.dataTransfer.files;if(!a.length)return;const s=[];for(const n of Array.from(a)){if(!n.type.startsWith("image/"))continue;const i=URL.createObjectURL(n),m=await ie(n);s.push({url:i,b64:m,prompt:`[ì—…ë¡œë“œ] ${n.name}`})}s.length>0&&M(n=>[...s,...n])},[]),Yt=r.useCallback(e=>{e.preventDefault(),e.stopPropagation(),Se(!0)},[]),Xt=r.useCallback(e=>{e.preventDefault(),e.stopPropagation();const a=e.currentTarget.getBoundingClientRect(),s=e.clientX,n=e.clientY;s>=a.left&&s<=a.right&&n>=a.top&&n<=a.bottom||Se(!1)},[]);r.useCallback(async e=>{const a=e.target.files;if(!a)return;const s=[];for(const n of Array.from(a)){const i=URL.createObjectURL(n),m=await ie(n);s.push({url:i,b64:m})}kt(n=>[...n,...s]),e.target.value=""},[]),r.useCallback(async e=>{const a=[];for(const s of Array.from(e)){if(Te.length+a.length>=14)break;const n=URL.createObjectURL(s),i=await ie(s);a.push({url:n,b64:i,type:"style",strength:.8})}we(s=>[...s,...a])},[Te.length]),r.useCallback(e=>{we(a=>a.filter((s,n)=>n!==e))},[]),r.useCallback((e,a)=>{we(s=>s.map((n,i)=>i===e?{...n,type:a}:n))},[]),r.useCallback((e,a)=>{we(s=>s.map((n,i)=>i===e?{...n,strength:a}:n))},[]),r.useCallback(async()=>{if(!g||Ie.length===0){alert("API í‚¤ì™€ ë³€í™˜í•  ì´ë¯¸ì§€ë¥¼ ì¶”ê°€í•˜ì„¸ìš”");return}Je(!0),I(0),Ae([]);const e={style:`Convert this image to ${je} art style. Keep the composition and subject the same.`,full:`Completely redraw this image in ${je} style. Reimagine all elements.`,color:`Adjust the color palette of this image to match ${je} aesthetic. Keep everything else the same.`,pose:"Change the pose of the character in this image to a different pose. Keep the same character, style, and background. Use reference images for the new pose if provided.",angle:"Change the camera angle/view of this image. Keep the same subject and style but show it from a different perspective. Use reference images if provided.",expression:"Change the facial expression of the character in this image. Keep everything else the same - same pose, clothes, background.",lineart:"Extract clean line art from this image. Black lines on white background, no colors.",sketch:"Convert this image to a pencil sketch style. Grayscale, hand-drawn look.",enhance:"Enhance this image with better quality, sharper details, and improved lighting.",upscale:"Upscale and enhance this image while preserving all details.",removebg:"Remove the background and make it pure white. Keep the main subject intact.",nightify:"Convert this daytime scene to a nighttime scene. Add moonlight and stars.",dayify:"Convert this nighttime scene to a daytime scene. Add sunlight and blue sky."};let a=e[Ve]||e.style;if(b.refImgs.length>0){const m=ct(b.refImgs);a+=`

`+m}const s=[];Ie.forEach((m,j)=>{for(let v=0;v<qe;v++)s.push({input:m,idx:j*qe+v})});const n=s.length;let i=0;try{const m=s.map(async({input:v})=>{const O=b.refImgs.map(o=>o.b64),z=await V(g,v.b64,a,f,"image/png",O.length>0?O:void 0,{imageSize:q,aspectRatio:S});return i++,I(i/n*100),{url:z.url,b64:z.base64,prompt:a}}),j=await Promise.all(m);Ae(j),j.forEach(v=>{c({url:v.url,prompt:v.prompt,category:"batch",source:"whiteboard"})})}catch(m){console.error("ë°°ì¹˜ ì˜¤ë¥˜:",m),alert(m instanceof Error?m.message:"ë°°ì¹˜ ì²˜ë¦¬ ì‹¤íŒ¨")}finally{Je(!1)}},[g,Ie,qe,Ve,je,Te,f,q,S,c]),r.useCallback(e=>{Pe(e),P(""),We(!0)},[]),r.useCallback(async()=>{if(!g||!_||!Z.trim()){alert("API í‚¤ì™€ í¸ì§‘ í”„ë¡¬í”„íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”");return}E(!0);try{const e=await V(g,_.b64,Z,f,"image/png",void 0,{imageSize:q,aspectRatio:S});Pe({url:e.url,b64:e.base64,prompt:Z})}catch(e){console.error("í¸ì§‘ ì˜¤ë¥˜:",e),alert(e instanceof Error?e.message:"í¸ì§‘ ì‹¤íŒ¨")}finally{E(!1)}},[g,_,Z,f,q,S]),r.useCallback(()=>{_&&(M(e=>[_,...e]),We(!1))},[_]),r.useCallback(async(e,a)=>{if(!g){alert("API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”");return}F(`ì´ë¯¸ì§€ ${a+1} íˆ¬ëª…í™” ì²˜ë¦¬ ì¤‘...`);try{const s=await Ne(g,e.b64,f,m=>F(`ì´ë¯¸ì§€ ${a+1}: ${m}`)),n=s.split(",")[1],i={url:s,b64:n,prompt:`[íˆ¬ëª…ë°°ê²½] ${e.prompt||""}`};M(m=>[i,...m]),l==null||l(s,i.prompt||"")}catch(s){console.error("íˆ¬ëª…í™” ì˜¤ë¥˜:",s),alert(s instanceof Error?s.message:"íˆ¬ëª…í™” ì‹¤íŒ¨")}finally{F(null)}},[g,f,l]),r.useCallback(async()=>{if(!g||!_){alert("API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”");return}E(!0),F("íˆ¬ëª…í™” ì²˜ë¦¬ ì¤‘...");try{const e=await Ne(g,_.b64,f,s=>F(s)),a=e.split(",")[1];Pe({url:e,b64:a,prompt:`[íˆ¬ëª…ë°°ê²½] ${_.prompt||""}`})}catch(e){console.error("íˆ¬ëª…í™” ì˜¤ë¥˜:",e),alert(e instanceof Error?e.message:"íˆ¬ëª…í™” ì‹¤íŒ¨")}finally{E(!1),F(null)}},[g,_,f]);const Zt=(e,a)=>{if(!a||Array.isArray(a)&&a.length===0)return"";if("type"in e&&e.type==="slider")return`${a}${e.unit||""}`;if("type"in e&&(e.type==="hue"||e.type==="skin")){const s=a;return sa(s.h,s.l)}if("tags"in e){const s=e,n=Array.isArray(a)?a:[a],i=n.slice(0,2).map(m=>{var j;return((j=s.tags.find(v=>v[0]===m))==null?void 0:j[1])||m}).join(", ");return n.length>2?i+"...":i}return String(a)},Qt=e=>{const a=ge[e];return Object.keys(a.items).some(s=>{const n=b.values[s];return n!=null&&n!==""&&!(Array.isArray(n)&&n.length===0)})};return t.jsxs("div",{className:"ai-studio",children:[t.jsxs("header",{className:"studio-header",children:[t.jsx("button",{className:"nav-btn back-btn",onClick:()=>h("/workspace"),children:"â† ì›Œí¬ìŠ¤í˜ì´ìŠ¤"}),t.jsx("div",{className:"logo",children:"ğŸ¨ AI ìŠ¤íŠœë””ì˜¤"}),t.jsxs("div",{className:"header-controls",children:[t.jsx("input",{type:"password",className:"inp api-input",value:g,onChange:e=>T(e.target.value),placeholder:"ğŸ”‘ API Key"}),t.jsx("select",{className:"sel model-select",value:f,onChange:e=>N(e.target.value),title:"AI ëª¨ë¸",children:pe.map(e=>t.jsx("option",{value:e.id,title:`${e.desc} | ${e.price}`,children:e.name},e.id))}),t.jsx("select",{className:"sel",value:q,onChange:e=>Nt(e.target.value),title:"í•´ìƒë„",children:oa.map(e=>t.jsx("option",{value:e,children:e},e))}),t.jsx("select",{className:"sel",value:S,onChange:e=>X(e.target.value),title:"ë¹„ìœ¨",children:ca.map(e=>t.jsx("option",{value:e,children:e},e))}),t.jsx("select",{className:"sel",value:ee,onChange:e=>ne(Number(e.target.value)),title:"ìƒì„± ê°œìˆ˜",children:[1,2,3,4,6,8,10].map(e=>t.jsxs("option",{value:e,children:[e,"ì¥"]},e))}),t.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:()=>ce(!0),title:"ì—¬ëŸ¬ì¥ ìƒì„± ì˜µì…˜",children:["âš™ï¸ ",R==="same"?"ë™ì¼":R==="random"?"ëœë¤":R==="sequence"?"ìˆœì°¨":"ë³´ê°„"]}),t.jsxs("label",{className:"transparent-toggle",title:"íˆ¬ëª…ë°°ê²½ìœ¼ë¡œ ìƒì„±",children:[t.jsx("input",{type:"checkbox",checked:ae,onChange:e=>Ct(e.target.checked)}),t.jsx("span",{children:"ğŸ”®"})]}),oe?t.jsxs("button",{className:"btn btn-danger",onClick:Dt,children:["â¹ï¸ ì·¨ì†Œ (",de.length,")"]}):t.jsx("button",{className:"btn btn-primary",onClick:Bt,children:ae?"ğŸ”® íˆ¬ëª…ìƒì„±":"ğŸ¨ ìƒì„±"})]})]}),t.jsxs("div",{className:"studio-main",children:[t.jsxs("div",{className:"left-panel",children:[t.jsxs("div",{className:"page-tabs",children:[t.jsx("button",{className:`page-tab ${u==="char"?"active":""}`,onClick:()=>x("char"),children:"ğŸ‘¤ ìºë¦­í„°"}),t.jsx("button",{className:`page-tab ${u==="bg"?"active":""}`,onClick:()=>x("bg"),children:"ğŸ™ï¸ ë°°ê²½"})]}),t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"cat-bar",children:Object.entries(ge).map(([e,a])=>t.jsxs("button",{className:`cat-btn ${b.cat===e?"active":""} ${Qt(e)?"has-val":""}`,onClick:()=>Rt(e),children:[t.jsx("span",{className:"dot"}),a.icon," ",a.name]},e))}),t.jsx("div",{className:"settings",children:ea()}),t.jsxs("div",{className:"panel-section color-picker-section",children:[t.jsxs("div",{className:"panel-title",children:[t.jsx("span",{children:"ğŸ¨"})," ìƒ‰ìƒ ì„ íƒ"]}),t.jsx("div",{className:"color-preview-box",style:{background:se(B,G,H)},children:t.jsx("span",{className:"color-hex-label",children:se(B,G,H)})}),t.jsxs("div",{className:"color-slider-row",children:[t.jsx("span",{className:"color-slider-label",children:"ìƒ‰ìƒ"}),t.jsx("div",{className:"color-slider-track hue-track",children:t.jsx("input",{type:"range",min:0,max:360,value:B,onChange:e=>Qe(Number(e.target.value))})}),t.jsxs("span",{className:"color-slider-value",children:[B,"Â°"]})]}),t.jsxs("div",{className:"color-slider-row",children:[t.jsx("span",{className:"color-slider-label",children:"ì±„ë„"}),t.jsx("div",{className:"color-slider-track sat-track",style:{"--hue":B,"--light":H},children:t.jsx("input",{type:"range",min:0,max:100,value:G,onChange:e=>et(Number(e.target.value))})}),t.jsxs("span",{className:"color-slider-value",children:[G,"%"]})]}),t.jsxs("div",{className:"color-slider-row",children:[t.jsx("span",{className:"color-slider-label",children:"ëª…ë„"}),t.jsx("div",{className:"color-slider-track light-track",style:{"--hue":B,"--sat":G},children:t.jsx("input",{type:"range",min:5,max:95,value:H,onChange:e=>tt(Number(e.target.value))})}),t.jsxs("span",{className:"color-slider-value",children:[H,"%"]})]}),at.length>0&&t.jsx("div",{className:"mini-palette",children:t.jsx("div",{className:"mini-palette-grid compact",children:at.slice(0,16).map((e,a)=>t.jsx("button",{className:`mini-palette-color ${B===e.h&&G===e.s&&H===e.l?"selected":""}`,style:{background:se(e.h,e.s,e.l)},onClick:()=>{Qe(e.h),et(e.s),tt(e.l)},title:`H:${e.h} S:${e.s} L:${e.l}`},a))})})]}),t.jsxs("div",{className:"panel-section left-preset-section",children:[t.jsxs("div",{className:"panel-title",children:[t.jsx("span",{children:"ğŸ“š"})," í”„ë¦¬ì…‹",t.jsx("button",{className:"preset-save-btn",onClick:()=>me(!0),title:"í˜„ì¬ ì„¤ì •ì„ í”„ë¦¬ì…‹ìœ¼ë¡œ ì €ì¥",children:"+ ì €ì¥"})]}),t.jsxs("div",{className:"preset-list compact",children:[le.length>0&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"preset-divider",children:"ë‚´ í”„ë¦¬ì…‹"}),le.map((e,a)=>t.jsxs("div",{className:"preset-item custom",onClick:()=>lt(e),children:[t.jsx("span",{className:"preset-name",children:e.name}),t.jsx("button",{className:"preset-del",onClick:s=>{s.stopPropagation(),Mt(a)},children:"Ã—"})]},`custom-${a}`)),t.jsx("div",{className:"preset-divider",children:"ê¸°ë³¸"})]}),Tt.slice(0,6).map((e,a)=>t.jsx("div",{className:"preset-item",onClick:()=>lt(e),children:t.jsx("span",{className:"preset-name",children:e.name.replace(/^[^\s]+\s*/,"")})},a))]})]}),t.jsxs("div",{className:"panel-section left-prompt-section",children:[t.jsxs("div",{className:"panel-title",children:[t.jsx("span",{children:"âœ¨"})," í”„ë¡¬í”„íŠ¸"]}),t.jsx("div",{className:"prompt-preview",children:re?re.slice(0,100)+(re.length>100?"...":""):"(íƒœê·¸ ì„ íƒ)"}),t.jsxs("div",{className:"prompt-actions-mini",children:[t.jsx("button",{className:"btn-mini",onClick:Ot,children:"ğŸ”„ ì´ˆê¸°í™”"}),t.jsx("button",{className:"btn-mini",onClick:()=>navigator.clipboard.writeText(`Positive:
${re}

Negative:
${ze}`),children:"ğŸ“‹ ë³µì‚¬"})]})]})]})]}),t.jsxs("div",{className:"center-panel",children:[t.jsxs("div",{className:"lib-header",children:[t.jsx("span",{className:"title",children:"ğŸ“¸ ë¼ì´ë¸ŒëŸ¬ë¦¬"}),t.jsx("span",{className:"count",children:K.length}),Ye&&t.jsxs("span",{className:"progress-text",style:{marginLeft:10,fontSize:"0.55rem",color:"var(--purple)"},children:["â³ ",Ye]}),t.jsx("div",{className:"spacer"}),t.jsx("button",{className:"btn btn-secondary",onClick:()=>{var e;return(e=document.getElementById("lib-upload"))==null?void 0:e.click()},children:"ğŸ“¤ ì—…ë¡œë“œ"}),t.jsx("input",{type:"file",id:"lib-upload",accept:"image/*",multiple:!0,hidden:!0,onChange:Jt}),t.jsx("button",{className:"btn btn-secondary",onClick:_t,children:"ğŸ—‘ï¸ ì „ì²´ì‚­ì œ"})]}),t.jsxs("div",{className:`lib-area ${He?"drag-over":""}`,onDrop:Wt,onDragOver:Yt,onDragLeave:Xt,children:[He&&t.jsx("div",{className:"drop-overlay",children:t.jsx("div",{className:"drop-message",children:"ğŸ“¥ ì´ë¯¸ì§€ë¥¼ ì—¬ê¸°ì— ë†“ìœ¼ì„¸ìš”"})}),t.jsxs("div",{className:"lib-grid large",children:[de.map(e=>t.jsxs("div",{className:`lib-card generating ${e.status}`,children:[t.jsx("div",{className:"generating-content",children:e.status==="failed"?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"failed-icon",children:"âŒ"}),t.jsx("span",{className:"generating-text failed-text",children:"ìƒì„± ì‹¤íŒ¨"}),t.jsx("span",{className:"failed-error",children:e.error||"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜"})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"spinner"}),t.jsx("span",{className:"generating-text",children:e.progress||(e.status==="transparent"?"íˆ¬ëª…í™” ì¤‘...":e.status==="cancelled"?"ì·¨ì†Œë¨":"ìƒì„± ì¤‘...")}),t.jsxs("span",{className:"generating-index",children:["#",e.index+1]}),e.status==="transparent"&&t.jsx("span",{className:"generating-status-badge",children:"ğŸ”® íˆ¬ëª…í™”"})]})}),t.jsx("div",{className:"actions",children:e.status==="failed"?t.jsx("button",{onClick:()=>Q(a=>a.filter(s=>s.id!==e.id)),title:"ë‹«ê¸°",children:"âœ–ï¸"}):t.jsx("button",{onClick:()=>Kt(e.id),title:"ì´ ì´ë¯¸ì§€ ì·¨ì†Œ",disabled:e.status==="cancelled",children:"â¹ï¸"})})]},e.id)),K.length===0&&de.length===0?t.jsx("div",{className:"empty-lib",children:"ğŸ¨ ì´ë¯¸ì§€ë¥¼ ìƒì„±í•˜ë©´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤"}):K.map((e,a)=>t.jsxs("div",{className:`lib-card clickable ${y.includes(a)?"selected":""} ${C===a?"previewing":""}`,onClick:s=>Ft(a,s),children:[t.jsx("img",{src:e.url,alt:`Generated ${a}`}),y.includes(a)&&y.length>1&&t.jsx("div",{className:"selection-badge",children:y.indexOf(a)+1})]},a))]})]}),t.jsxs(t.Fragment,{children:[t.jsx("div",{className:`preview-resize-handle ${gt?"resizing":""}`,onMouseDown:Vt,title:"ë“œë˜ê·¸í•˜ì—¬ í¬ê¸° ì¡°ì ˆ",children:t.jsx("div",{className:"resize-bar"})}),t.jsxs("div",{className:"preview-panel-large",style:{height:fe},children:[t.jsx("div",{className:"preview-viewer",children:Ce?t.jsxs(t.Fragment,{children:[t.jsx("button",{className:"preview-nav-lg prev",onClick:Ke,disabled:y.indexOf(C)<=0,title:"ì´ì „ ì´ë¯¸ì§€ (â†)",children:"â€¹"}),t.jsx("div",{className:"preview-image-lg-container",children:t.jsx("img",{src:Ce.url,alt:"Preview",className:"preview-image-lg",style:{maxHeight:fe-70}})}),t.jsx("button",{className:"preview-nav-lg next",onClick:Be,disabled:y.indexOf(C)>=y.length-1,title:"ë‹¤ìŒ ì´ë¯¸ì§€ (â†’)",children:"â€º"}),t.jsxs("div",{className:"preview-info-bar",children:[t.jsx("span",{className:"preview-counter-lg",children:y.length>1?`${y.indexOf(C)+1}/${y.length} ì„ íƒë¨`:`${C+1} / ${K.length}`}),t.jsxs("div",{className:"preview-quick-actions",children:[t.jsx("button",{onClick:()=>Ce&&Ut(Ce,C),title:"PNGë¡œ ì €ì¥",children:"ğŸ’¾"}),y.length>1?t.jsxs("button",{onClick:Ht,title:`ì„ íƒí•œ ${y.length}ê°œ ì‚­ì œ`,className:"danger",children:["ğŸ—‘ï¸ ",y.length]}):t.jsx("button",{onClick:()=>Gt(C),title:"ì‚­ì œ",className:"danger",children:"ğŸ—‘ï¸"}),t.jsx("button",{onClick:ke,title:"ì„ íƒ í•´ì œ",children:"âœ•"})]})]})]}):t.jsxs("div",{className:"preview-empty",children:[t.jsx("div",{className:"preview-empty-icon",children:"ğŸ–¼ï¸"}),t.jsx("div",{className:"preview-empty-text",children:"ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ì´ë¯¸ì§€ë¥¼ ì„ íƒí•˜ì„¸ìš”"}),t.jsx("div",{className:"preview-empty-hint",children:"Ctrl+í´ë¦­ìœ¼ë¡œ ì—¬ëŸ¬ ì´ë¯¸ì§€ ì„ íƒ, Shift+í´ë¦­ìœ¼ë¡œ ë²”ìœ„ ì„ íƒ"})]})}),t.jsxs("div",{className:"preview-edit-panel",children:[t.jsxs("div",{className:"preview-edit-header",children:[t.jsx("span",{className:"selection-info",children:y.length===0?"ì´ë¯¸ì§€ë¥¼ ì„ íƒí•˜ì„¸ìš”":y.length===1?"ğŸ–¼ï¸ ë‹¨ì¼ í¸ì§‘":`ğŸ“‹ ${y.length}ì¥ ì¼ê´„ ë³€í™˜`}),y.length>0&&t.jsx("button",{className:"btn-select-all",onClick:K.length===y.length?ke:De,children:K.length===y.length?"ì „ì²´ í•´ì œ":"ì „ì²´ ì„ íƒ"})]}),t.jsxs("div",{className:"preview-edit-section",children:[t.jsx("div",{className:"preview-edit-title",children:"ğŸ¤– AI í¸ì§‘"}),t.jsxs("div",{className:"edit-ref-area",children:[t.jsxs("div",{className:"edit-ref-header",children:[t.jsxs("span",{children:["ğŸ“ ì°¸ì¡° ì´ë¯¸ì§€ ",J.length>0&&`(${J.length})`]}),t.jsx("button",{className:"btn-add-ref",onClick:()=>{var e;return(e=document.getElementById("edit-ref-upload"))==null?void 0:e.click()},children:"+ ì¶”ê°€"}),t.jsx("input",{type:"file",id:"edit-ref-upload",accept:"image/*",multiple:!0,hidden:!0,onChange:async e=>{const a=e.target.files;if(!a)return;const s=[];for(const n of Array.from(a)){const i=URL.createObjectURL(n),m=await ie(n);s.push({url:i,b64:m})}Ee(n=>[...n,...s].slice(0,5)),e.target.value=""}})]}),J.length>0&&t.jsx("div",{className:"edit-ref-thumbs",children:J.map((e,a)=>t.jsxs("div",{className:"edit-ref-thumb",children:[t.jsx("img",{src:e.url,alt:`Ref ${a}`}),t.jsx("button",{className:"del",onClick:()=>Ee(s=>s.filter((n,i)=>i!==a)),children:"Ã—"})]},a))}),J.length===0&&t.jsx("div",{className:"edit-ref-hint",children:"ì†Œí’ˆ/ìŠ¤íƒ€ì¼ í•©ì„± ì‹œ ì°¸ì¡° ì´ë¯¸ì§€ ì¶”ê°€"})]}),t.jsx("textarea",{className:"preview-edit-prompt",value:Z,onChange:e=>P(e.target.value),placeholder:J.length>0?`ì°¸ì¡° ì´ë¯¸ì§€ì™€ í•©ì„±í•  ë‚´ìš©...
ì˜ˆ: Add the sword from the reference image to the character`:y.length>1?`${y.length}ì¥ ì´ë¯¸ì§€ì— ì ìš©í•  ë³€ê²½ì‚¬í•­...
ì˜ˆ: ì›¹íˆ° ìŠ¤íƒ€ì¼ë¡œ ë³€í™˜`:`ì›í•˜ëŠ” ë³€ê²½ì‚¬í•­ ì…ë ¥...
ì˜ˆ: ë¨¸ë¦¬ìƒ‰ì„ íŒŒë€ìƒ‰ìœ¼ë¡œ`}),t.jsx("div",{className:"preview-edit-presets",children:J.length>0?t.jsxs(t.Fragment,{children:[t.jsx("span",{onClick:()=>P("Add the object from the reference image to this character, blend naturally"),children:"ğŸ”—í•©ì„±"}),t.jsx("span",{onClick:()=>P("Apply the style from the reference image to this image"),children:"ğŸ¨ìŠ¤íƒ€ì¼"}),t.jsx("span",{onClick:()=>P("Replace the outfit with the one from the reference image"),children:"ğŸ‘”ì˜ìƒ"}),t.jsx("span",{onClick:()=>P("Add the accessory from the reference image"),children:"ğŸ’ì†Œí’ˆ"}),t.jsx("span",{onClick:()=>P("Use the pose from the reference image"),children:"ğŸ•ºí¬ì¦ˆ"}),t.jsx("span",{onClick:()=>P("Blend both images into one scene"),children:"ğŸ–¼ï¸ì¥ë©´"})]}):t.jsxs(t.Fragment,{children:[t.jsx("span",{onClick:()=>P("change hair color to blue"),children:"ğŸ’™ë¨¸ë¦¬ìƒ‰"}),t.jsx("span",{onClick:()=>P("add soft lighting"),children:"ğŸ’¡ì¡°ëª…"}),t.jsx("span",{onClick:()=>P("change to night scene"),children:"ğŸŒ™ì•¼ê²½"}),t.jsx("span",{onClick:()=>P("make it anime style"),children:"ğŸ¨ì• ë‹ˆí™”"}),t.jsx("span",{onClick:()=>P("enhance details and quality"),children:"âœ¨ì„ ëª…"}),t.jsx("span",{onClick:()=>P("change background to white"),children:"â¬œë°°ê²½"})]})}),t.jsx("button",{className:"preview-edit-btn primary",onClick:async()=>{if(w.length===0){alert("ì´ë¯¸ì§€ë¥¼ ì„ íƒí•˜ì„¸ìš”");return}if(!g||!Z.trim()){alert("API í‚¤ì™€ í¸ì§‘ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”");return}E(!0),I(0);try{const e=[],a=J.map(s=>s.b64);for(let s=0;s<w.length;s++){I(s+1);const n=w[s],i=await V(g,n.b64,Z,f,"image/png",a.length>0?a:void 0,{imageSize:q,aspectRatio:S});e.push({url:i.url,b64:i.base64,prompt:Z})}M(s=>[...e,...s]),$([0]),A(0),Ee([])}catch(e){alert("í¸ì§‘ ì‹¤íŒ¨: "+(e instanceof Error?e.message:"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜"))}finally{E(!1),I(0)}},disabled:te||w.length===0,children:te?`â³ ì²˜ë¦¬ì¤‘... (${Le}/${w.length})`:J.length>0?"ğŸ”— ì°¸ì¡° ì´ë¯¸ì§€ì™€ í•©ì„±":w.length>1?`âœ¨ ${w.length}ì¥ ì¼ê´„ í¸ì§‘`:"âœ¨ AI í¸ì§‘ ì ìš©"})]}),t.jsxs("div",{className:"preview-edit-section",children:[t.jsxs("div",{className:"preview-edit-title",children:["âš¡ ë¹ ë¥¸ ë³€í™˜ ",w.length>1&&`(${w.length}ì¥)`]}),t.jsxs("div",{className:"preview-quick-transforms",children:[t.jsx("button",{onClick:async()=>{if(w.length!==0){if(!g){alert("API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”");return}E(!0),I(0);try{const e=[];for(let a=0;a<w.length;a++){I(a+1);const s=w[a],n=await V(g,s.b64,"Remove background completely, make it transparent. Keep only the main subject.",f,"image/png");e.push({url:n.url,b64:n.base64,prompt:"[íˆ¬ëª…ë°°ê²½]"})}M(a=>[...e,...a]),$([0]),A(0)}catch{alert("ë³€í™˜ ì‹¤íŒ¨")}finally{E(!1),I(0)}}},disabled:te||w.length===0,children:te&&Le>0?`â³ ${Le}/${w.length}`:"ğŸ”® íˆ¬ëª…ë°°ê²½"}),t.jsx("button",{onClick:async()=>{if(w.length===0){alert("ì´ë¯¸ì§€ë¥¼ ì„ íƒí•˜ì„¸ìš”");return}if(!g){alert("API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”");return}E(!0),I(0);try{const e=[];for(let a=0;a<w.length;a++){I(a+1);const s=w[a],n=await V(g,s.b64,"Extract clean black line art on white background. No colors, just lines.",f,"image/png");e.push({url:n.url,b64:n.base64,prompt:"[ë¼ì¸ì•„íŠ¸]"})}M(a=>[...e,...a]),$([0]),A(0)}catch{alert("ë³€í™˜ ì‹¤íŒ¨")}finally{E(!1),I(0)}},disabled:te||w.length===0,children:"âœï¸ ë¼ì¸ì•„íŠ¸"}),t.jsx("button",{onClick:async()=>{if(w.length===0){alert("ì´ë¯¸ì§€ë¥¼ ì„ íƒí•˜ì„¸ìš”");return}if(!g){alert("API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”");return}E(!0),I(0);try{const e=[];for(let a=0;a<w.length;a++){I(a+1);const s=w[a],n=await V(g,s.b64,"Enhance image quality, sharpen details, improve colors and lighting.",f,"image/png");e.push({url:n.url,b64:n.base64,prompt:"[í’ˆì§ˆí–¥ìƒ]"})}M(a=>[...e,...a]),$([0]),A(0)}catch{alert("ë³€í™˜ ì‹¤íŒ¨")}finally{E(!1),I(0)}},disabled:te||w.length===0,children:"âœ¨ í’ˆì§ˆí–¥ìƒ"}),t.jsx("button",{onClick:async()=>{if(w.length===0){alert("ì´ë¯¸ì§€ë¥¼ ì„ íƒí•˜ì„¸ìš”");return}if(!g){alert("API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”");return}E(!0),I(0);try{const e=[];for(let a=0;a<w.length;a++){I(a+1);const s=w[a],n=await V(g,s.b64,"Convert to Korean webtoon style illustration. Clean lines, flat colors.",f,"image/png");e.push({url:n.url,b64:n.base64,prompt:"[ì›¹íˆ°í™”]"})}M(a=>[...e,...a]),$([0]),A(0)}catch{alert("ë³€í™˜ ì‹¤íŒ¨")}finally{E(!1),I(0)}},disabled:te||w.length===0,children:"ğŸ¨ ì›¹íˆ°í™”"})]})]}),$e.length>0&&t.jsxs("div",{className:"preview-edit-section",children:[t.jsxs("div",{className:"preview-edit-title",children:["âœ… ìµœê·¼ ë³€í™˜ ê²°ê³¼ (",$e.length,")"]}),t.jsx("div",{className:"batch-results-inline",children:$e.map((e,a)=>t.jsx("div",{className:"batch-result-thumb",onClick:()=>{const s=K.findIndex(n=>n.url===e.url);s>=0&&($([s]),A(s))},children:t.jsx("img",{src:e.url,alt:`Result ${a}`})},a))}),t.jsx("button",{className:"preview-edit-btn",onClick:()=>Ae([]),children:"ğŸ—‘ï¸ ê²°ê³¼ ë¹„ìš°ê¸°"})]})]})]})]})]})]}),ut&&t.jsx("div",{className:"gen-modal show",onClick:()=>ce(!1),children:t.jsxs("div",{className:"gen-modal-content",onClick:e=>e.stopPropagation(),children:[t.jsxs("div",{className:"gen-modal-title",children:["âš™ï¸ ì—¬ëŸ¬ì¥ ìƒì„± ì˜µì…˜",t.jsx("button",{className:"gen-modal-close",onClick:()=>ce(!1),children:"Ã—"})]}),t.jsxs("div",{className:`gen-mode-item ${R==="same"?"selected":""}`,onClick:()=>be("same"),children:[t.jsx("input",{type:"radio",name:"genModeRadio",checked:R==="same",readOnly:!0}),t.jsxs("div",{className:"gen-mode-info",children:[t.jsx("div",{className:"name",children:"ğŸ“‹ ë™ì¼ ì„¤ì •"}),t.jsx("div",{className:"desc",children:"ê°™ì€ í”„ë¡¬í”„íŠ¸ë¡œ ì—¬ëŸ¬ì¥ ìƒì„± (ì‹œë“œë§Œ ë‹¤ë¦„)"})]})]}),t.jsxs("div",{className:`gen-mode-item ${R==="random"?"selected":""}`,onClick:()=>be("random"),children:[t.jsx("input",{type:"radio",name:"genModeRadio",checked:R==="random",readOnly:!0}),t.jsxs("div",{className:"gen-mode-info",children:[t.jsx("div",{className:"name",children:"ğŸ² ëœë¤ ë³€í˜•"}),t.jsx("div",{className:"desc",children:"ë§¤ ì¥ë§ˆë‹¤ ì„ íƒí•œ í•­ëª©ì„ ëœë¤í•˜ê²Œ ë³€ê²½"}),R==="random"&&t.jsxs("div",{className:"gen-mode-opts",style:{display:"block"},children:[t.jsxs("label",{children:[t.jsx("input",{type:"checkbox",checked:xe.pose,onChange:e=>ve(a=>({...a,pose:e.target.checked}))})," í¬ì¦ˆ ë³€í˜•"]}),t.jsxs("label",{children:[t.jsx("input",{type:"checkbox",checked:xe.expr,onChange:e=>ve(a=>({...a,expr:e.target.checked}))})," í‘œì • ë³€í˜•"]}),t.jsxs("label",{children:[t.jsx("input",{type:"checkbox",checked:xe.angle,onChange:e=>ve(a=>({...a,angle:e.target.checked}))})," ì•µê¸€ ë³€í˜•"]}),t.jsxs("label",{children:[t.jsx("input",{type:"checkbox",checked:xe.cloth,onChange:e=>ve(a=>({...a,cloth:e.target.checked}))})," ì˜ìƒ ë³€í˜•"]})]})]})]}),t.jsxs("div",{className:`gen-mode-item ${R==="sequence"?"selected":""}`,onClick:()=>be("sequence"),children:[t.jsx("input",{type:"radio",name:"genModeRadio",checked:R==="sequence",readOnly:!0}),t.jsxs("div",{className:"gen-mode-info",children:[t.jsx("div",{className:"name",children:"ğŸ”¢ ìˆœì°¨ ë³€í˜•"}),t.jsx("div",{className:"desc",children:"íŠ¹ì • í•­ëª©ì„ ìˆœì„œëŒ€ë¡œ ë³€ê²½í•˜ë©° ìƒì„±"}),R==="sequence"&&t.jsxs("div",{className:"gen-mode-opts",style:{display:"block"},children:[t.jsxs("div",{className:"gen-seq-item",children:[t.jsx("label",{children:"í•­ëª©:"}),t.jsxs("select",{className:"sel",value:pt,onChange:e=>yt(e.target.value),children:[t.jsx("option",{value:"expression",children:"í‘œì •"}),t.jsx("option",{value:"bodyPose",children:"í¬ì¦ˆ"}),t.jsx("option",{value:"viewAngle",children:"ì•µê¸€"}),t.jsx("option",{value:"artStyle",children:"í™”í’"})]})]}),t.jsx("div",{style:{fontSize:"0.5rem",color:"var(--text3)",marginTop:4},children:"â€» ìƒì„± ê°œìˆ˜ë§Œí¼ ìˆœì„œëŒ€ë¡œ ë³€í˜•ë©ë‹ˆë‹¤"})]})]})]}),t.jsxs("div",{className:`gen-mode-item ${R==="interpolate"?"selected":""}`,onClick:()=>be("interpolate"),children:[t.jsx("input",{type:"radio",name:"genModeRadio",checked:R==="interpolate",readOnly:!0}),t.jsxs("div",{className:"gen-mode-info",children:[t.jsx("div",{className:"name",children:"ğŸŒˆ ìŠ¬ë¼ì´ë” ê·¸ë¼ë°ì´ì…˜"}),t.jsx("div",{className:"desc",children:"ìŠ¬ë¼ì´ë” ê°’ì„ ì ì§„ì ìœ¼ë¡œ ë³€í™”ì‹œí‚¤ë©° ìƒì„±"}),R==="interpolate"&&t.jsxs("div",{className:"gen-mode-opts",style:{display:"block"},children:[t.jsxs("div",{className:"gen-seq-item",children:[t.jsx("label",{children:"í•­ëª©:"}),t.jsxs("select",{className:"sel",value:ft,onChange:e=>bt(e.target.value),children:[t.jsx("option",{value:"age",children:"ë‚˜ì´"}),t.jsx("option",{value:"bodyType",children:"ì²´í˜•"}),t.jsx("option",{value:"eyeSize",children:"ëˆˆí¬ê¸°"}),t.jsx("option",{value:"timeOfDay",children:"ì‹œê°„ëŒ€"}),t.jsx("option",{value:"brightness",children:"ë°ê¸°"})]})]}),t.jsxs("div",{className:"gen-seq-item",children:[t.jsx("label",{children:"ì‹œì‘:"}),t.jsx("input",{type:"number",className:"inp",style:{width:60},value:xt,onChange:e=>vt(Number(e.target.value))}),t.jsx("label",{children:"ë:"}),t.jsx("input",{type:"number",className:"inp",style:{width:60},value:jt,onChange:e=>wt(Number(e.target.value))})]})]})]})]}),t.jsxs("div",{className:"gen-modal-actions",children:[t.jsx("button",{className:"btn btn-secondary",onClick:()=>ce(!1),children:"ì·¨ì†Œ"}),t.jsx("button",{className:"btn btn-primary",onClick:()=>ce(!1),children:"âœ… í™•ì¸"})]})]})}),qt&&t.jsx("div",{className:"preset-modal show",onClick:()=>me(!1),children:t.jsxs("div",{className:"preset-modal-content",onClick:e=>e.stopPropagation(),children:[t.jsxs("div",{className:"preset-modal-title",children:["ğŸ’¾ í”„ë¦¬ì…‹ ì €ì¥",t.jsx("button",{className:"preset-modal-close",onClick:()=>me(!1),children:"Ã—"})]}),t.jsxs("div",{className:"preset-modal-body",children:[t.jsx("p",{children:"í˜„ì¬ ì„¤ì •ì„ í”„ë¦¬ì…‹ìœ¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤."}),t.jsx("input",{type:"text",className:"inp",value:he,onChange:e=>Ze(e.target.value),placeholder:"í”„ë¦¬ì…‹ ì´ë¦„ ì…ë ¥...",style:{width:"100%",marginTop:10},autoFocus:!0,onKeyDown:e=>e.key==="Enter"&&rt()})]}),t.jsxs("div",{className:"preset-modal-actions",children:[t.jsx("button",{className:"btn btn-secondary",onClick:()=>me(!1),children:"ì·¨ì†Œ"}),t.jsx("button",{className:"btn btn-primary",onClick:rt,children:"ğŸ’¾ ì €ì¥"})]})]})})]});function ea(){const e=ge[b.cat];return e?t.jsx("div",{className:"settings-grid",children:Object.entries(e.items).map(([a,s])=>{var j,v,O,z;const n=b.values[a],i="isNeg"in s&&s.isNeg,m=i?b.negTags.length>0:n!=null&&n!==""&&!(Array.isArray(n)&&n.length===0);return t.jsxs("div",{className:`card ${m?"active":""}`,children:[t.jsxs("div",{className:"card-header",children:[t.jsx("span",{className:"card-icon",children:"icon"in s?s.icon:""}),t.jsx("span",{children:s.name}),t.jsx("span",{className:"card-val",children:i?b.negTags.length>0?`${b.negTags.length}ê°œ`:"":Zt(s,n)}),m&&t.jsx("button",{className:"card-clear",onClick:()=>Et(a,i),children:"Ã—"})]}),"tags"in s&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"hasColor"in s&&s.hasColor?"tags-with-bucket":"",children:[t.jsx("div",{className:"tags",children:s.tags.map(([o,U])=>{const L=i?b.negTags.includes(o):Array.isArray(n)?n.includes(o):n===o;return t.jsx("div",{className:`tag ${L?"selected":""}`,onClick:()=>Pt(a,o,i||!1),children:U},o)})}),"hasColor"in s&&s.hasColor&&m&&t.jsx("div",{className:"color-inline-box",onClick:()=>nt(a+"Color"),title:"í´ë¦­í•˜ì—¬ ìƒ‰ìƒ ì ìš©",style:{background:se(((j=b.values[a+"Color"])==null?void 0:j.h)??0,((v=b.values[a+"Color"])==null?void 0:v.s)??70,((O=b.values[a+"Color"])==null?void 0:O.l)??50)}})]}),!i&&m&&t.jsxs("div",{className:"slider-row weight-slider",children:[t.jsx("span",{className:"slider-label",children:"ê°•ë„"}),t.jsxs("div",{className:"slider-track",children:[t.jsx("input",{type:"range",min:.5,max:1.5,step:.1,value:b.values[a+"Str"]??1,onChange:o=>st(a+"Str",parseFloat(o.target.value))}),t.jsx("div",{className:"thumb",style:{left:`${((b.values[a+"Str"]??1)-.5)/1*100}%`}})]}),t.jsxs("span",{className:"slider-value",children:[b.values[a+"Str"]??1,"x"]})]})]}),"type"in s&&s.type==="slider"&&t.jsxs("div",{className:"slider-row",children:[t.jsx("span",{className:"slider-label",children:((z=s.labels)==null?void 0:z[0])||s.min}),t.jsxs("div",{className:"slider-track",children:[t.jsx("input",{type:"range",min:s.min,max:s.max,step:s.step||1,value:n??s.default,onChange:o=>st(a,parseFloat(o.target.value))}),t.jsx("div",{className:"thumb",style:{left:`${((n??s.default)-s.min)/(s.max-s.min)*100}%`}})]}),t.jsxs("span",{className:"slider-value",children:[n??s.default,s.unit||""]})]}),"type"in s&&(s.type==="hue"||s.type==="skin")&&t.jsxs("div",{className:"color-inline-row",children:[t.jsx("span",{className:"color-inline-label",children:s.name}),t.jsx("div",{className:"color-inline-box",onClick:()=>nt(a),title:"í´ë¦­í•˜ì—¬ ìƒ‰ìƒ ì ìš©",style:{background:se((n==null?void 0:n.h)??30,(n==null?void 0:n.s)??70,(n==null?void 0:n.l)??50)}})]})]},a)})}):null}}async function ie(l){return new Promise(h=>{const d=new FileReader;d.onload=()=>h(d.result.split(",")[1]),d.readAsDataURL(l)})}function ct(l){if(l.length===0)return"";const h={style:"match the art style, color palette, and atmosphere",pose:"match the pose, posture, and body position",outfit:"use the same outfit, clothing, and accessories",color:"use the same color scheme and palette",face:"match the facial features and expression",bg:"use the same background setting and elements",all:"closely replicate all visual elements"},d={};l.forEach((p,u)=>{d[p.type]||(d[p.type]=[]),d[p.type].push({idx:u+1,str:p.strength})});const c=[];return Object.entries(d).forEach(([p,u])=>{const x=h[p]||"use as reference",g=u.length===1?`the provided reference image #${u[0].idx}`:`reference images #${u.map(T=>T.idx).join(", #")}`;c.push(`Using ${g}, ${x}.`)}),c.join(" ")}function Ca(){const{addAsset:l}=dt(),h=(d,c)=>{l({url:d,prompt:c,category:"ai-generated",source:"whiteboard"})};return t.jsx("div",{style:{height:"100vh",display:"flex",flexDirection:"column"},children:t.jsx(ga,{onImageGenerated:h})})}export{Ca as default};
